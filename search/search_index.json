{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u603b\u4f53\u4ecb\u7ecd \u00b6 JumpServer \u662f\u5168\u7403\u9996\u6b3e\u5b8c\u5168\u5f00\u6e90\u7684\u5821\u5792\u673a, \u4f7f\u7528 GNU GPL v2.0 \u5f00\u6e90\u534f\u8bae, \u662f\u7b26\u5408 4A \u7684\u4e13\u4e1a\u8fd0\u7ef4\u5ba1\u8ba1\u7cfb\u7edf\u3002 JumpServer \u4f7f\u7528 Python / Django \u8fdb\u884c\u5f00\u53d1, \u9075\u5faa Web 2.0 \u89c4\u8303, \u914d\u5907\u4e86\u4e1a\u754c\u9886\u5148\u7684 Web Terminal \u89e3\u51b3\u65b9\u6848, \u4ea4\u4e92\u754c\u9762\u7f8e\u89c2\u3001\u7528\u6237\u4f53\u9a8c\u597d\u3002 JumpServer \u91c7\u7eb3\u5206\u5e03\u5f0f\u67b6\u6784, \u652f\u6301\u591a\u673a\u623f\u8de8\u533a\u57df\u90e8\u7f72, \u4e2d\u5fc3\u8282\u70b9\u63d0\u4f9b API, \u5404\u673a\u623f\u90e8\u7f72\u767b\u5f55\u8282\u70b9, \u53ef\u6a2a\u5411\u6269\u5c55\u3001\u65e0\u5e76\u53d1\u8bbf\u95ee\u9650\u5236\u3002 JumpServer \u73b0\u5df2\u652f\u6301\u7ba1\u7406 SSH\u3001 Telnet\u3001 RDP\u3001 VNC \u534f\u8bae\u8d44\u4ea7\u3002 \u6539\u53d8\u4e16\u754c, \u4ece\u4e00\u70b9\u70b9\u5f00\u59cb\u3002 KubeOperator \u662f JumpServer \u56e2\u961f\u5728 Kubernetes \u9886\u57df\u7684\u7684\u53c8\u4e00\u5168\u65b0\u529b\u4f5c\uff0c\u6b22\u8fce\u5173\u6ce8\u548c\u4f7f\u7528\u3002 \u7279\u8272\u4f18\u52bf \u00b6 \u5f00\u6e90: \u96f6\u95e8\u69db\uff0c\u7ebf\u4e0a\u5feb\u901f\u83b7\u53d6\u548c\u5b89\u88c5\uff1b \u5206\u5e03\u5f0f: \u8f7b\u677e\u652f\u6301\u5927\u89c4\u6a21\u5e76\u53d1\u8bbf\u95ee\uff1b \u65e0\u63d2\u4ef6: \u4ec5\u9700\u6d4f\u89c8\u5668\uff0c\u6781\u81f4\u7684 Web Terminal \u4f7f\u7528\u4f53\u9a8c\uff1b \u591a\u4e91\u652f\u6301: \u4e00\u5957\u7cfb\u7edf\uff0c\u540c\u65f6\u7ba1\u7406\u4e0d\u540c\u4e91\u4e0a\u9762\u7684\u8d44\u4ea7\uff1b \u4e91\u7aef\u5b58\u50a8: \u5ba1\u8ba1\u5f55\u50cf\u4e91\u7aef\u5b58\u50a8\uff0c\u6c38\u4e0d\u4e22\u5931\uff1b \u591a\u79df\u6237: \u4e00\u5957\u7cfb\u7edf\uff0c\u591a\u4e2a\u5b50\u516c\u53f8\u548c\u90e8\u95e8\u540c\u65f6\u4f7f\u7528\u3002 \u529f\u80fd\u5217\u8868 \u00b6 \u8eab\u4efd\u8ba4\u8bc1 Authentication \u767b\u5f55\u8ba4\u8bc1 \u8d44\u6e90\u7edf\u4e00\u767b\u5f55\u4e0e\u8ba4\u8bc1 LDAP/AD \u8ba4\u8bc1 RADIUS \u8ba4\u8bc1 OpenID \u8ba4\u8bc1\uff08\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\uff09 CAS \u8ba4\u8bc1 \uff08\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\uff09 MFA\u8ba4\u8bc1 MFA \u4e8c\u6b21\u8ba4\u8bc1\uff08Google Authenticator\uff09 RADIUS \u4e8c\u6b21\u8ba4\u8bc1 \u767b\u5f55\u590d\u6838\uff08X-PACK\uff09 \u7528\u6237\u767b\u5f55\u884c\u4e3a\u53d7\u7ba1\u7406\u5458\u7684\u76d1\u7ba1\u4e0e\u63a7\u5236 \u8d26\u53f7\u7ba1\u7406 Account \u96c6\u4e2d\u8d26\u53f7 \u7ba1\u7406\u7528\u6237\u7ba1\u7406 \u7cfb\u7edf\u7528\u6237\u7ba1\u7406 \u7edf\u4e00\u5bc6\u7801 \u8d44\u4ea7\u5bc6\u7801\u6258\u7ba1 \u81ea\u52a8\u751f\u6210\u5bc6\u7801 \u81ea\u52a8\u63a8\u9001\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u8bbe\u7f6e \u6279\u91cf\u6539\u5bc6\uff08X-PACK\uff09 \u5b9a\u671f\u6279\u91cf\u6539\u5bc6 \u591a\u79cd\u5bc6\u7801\u7b56\u7565 \u591a\u4e91\u7eb3\u7ba1\uff08X-PACK\uff09 \u5bf9\u79c1\u6709\u4e91\u3001\u516c\u6709\u4e91\u8d44\u4ea7\u81ea\u52a8\u7edf\u4e00\u7eb3\u7ba1 \u6536\u96c6\u7528\u6237\uff08X-PACK\uff09 \u81ea\u5b9a\u4e49\u4efb\u52a1\u5b9a\u671f\u6536\u96c6\u4e3b\u673a\u7528\u6237 \u5bc6\u7801\u5323\u5b50\uff08X-PACK\uff09 \u7edf\u4e00\u5bf9\u8d44\u4ea7\u4e3b\u673a\u7684\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u67e5\u770b\u3001\u66f4\u65b0\u3001\u6d4b\u8bd5\u64cd\u4f5c \u6388\u6743\u63a7\u5236 Authorization \u591a\u7ef4\u6388\u6743 \u5bf9\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u8d44\u4ea7\u3001\u8d44\u4ea7\u8282\u70b9\u3001\u5e94\u7528\u4ee5\u53ca\u7cfb\u7edf\u7528\u6237\u8fdb\u884c\u6388\u6743 \u8d44\u4ea7\u6388\u6743 \u8d44\u4ea7\u4ee5\u6811\u72b6\u7ed3\u6784\u8fdb\u884c\u5c55\u793a \u8d44\u4ea7\u548c\u8282\u70b9\u5747\u53ef\u7075\u6d3b\u6388\u6743 \u8282\u70b9\u5185\u8d44\u4ea7\u81ea\u52a8\u7ee7\u627f\u6388\u6743 \u5b50\u8282\u70b9\u81ea\u52a8\u7ee7\u627f\u7236\u8282\u70b9\u6388\u6743 \u5e94\u7528\u6388\u6743 \u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u5e94\u7528\u7ea7\u6388\u6743 MySQL \u6570\u636e\u5e93\u5e94\u7528\u3001RemoteApp \u8fdc\u7a0b\u5e94\u7528\uff08X-PACK\uff09 \u52a8\u4f5c\u6388\u6743 \u5b9e\u73b0\u5bf9\u6388\u6743\u8d44\u4ea7\u7684\u6587\u4ef6\u4e0a\u4f20\u3001\u4e0b\u8f7d\u4ee5\u53ca\u8fde\u63a5\u52a8\u4f5c\u7684\u63a7\u5236 \u65f6\u95f4\u6388\u6743 \u5b9e\u73b0\u5bf9\u6388\u6743\u8d44\u6e90\u4f7f\u7528\u65f6\u95f4\u6bb5\u7684\u9650\u5236 \u7279\u6743\u6307\u4ee4 \u5b9e\u73b0\u5bf9\u7279\u6743\u6307\u4ee4\u7684\u4f7f\u7528\uff08\u652f\u6301\u9ed1\u767d\u540d\u5355\uff09 \u547d\u4ee4\u8fc7\u6ee4 \u5b9e\u73b0\u5bf9\u6388\u6743\u7cfb\u7edf\u7528\u6237\u6240\u6267\u884c\u7684\u547d\u4ee4\u8fdb\u884c\u63a7\u5236 \u6587\u4ef6\u4f20\u8f93 SFTP \u6587\u4ef6\u4e0a\u4f20/\u4e0b\u8f7d \u6587\u4ef6\u7ba1\u7406 \u5b9e\u73b0 Web SFTP \u6587\u4ef6\u7ba1\u7406 \u5de5\u5355\u7ba1\u7406\uff08X-PACK\uff09 \u652f\u6301\u5bf9\u7528\u6237\u767b\u5f55\u8bf7\u6c42\u884c\u4e3a\u8fdb\u884c\u63a7\u5236 \u7ec4\u7ec7\u7ba1\u7406\uff08X-PACK\uff09 \u5b9e\u73b0\u591a\u79df\u6237\u7ba1\u7406\u4e0e\u6743\u9650\u9694\u79bb \u5b89\u5168\u5ba1\u8ba1 Audit \u64cd\u4f5c\u5ba1\u8ba1 \u7528\u6237\u64cd\u4f5c\u884c\u4e3a\u5ba1\u8ba1 \u4f1a\u8bdd\u5ba1\u8ba1 \u5728\u7ebf\u4f1a\u8bdd\u5185\u5bb9\u5ba1\u8ba1 \u5386\u53f2\u4f1a\u8bdd\u5185\u5bb9\u5ba1\u8ba1 \u5f55\u50cf\u5ba1\u8ba1 \u652f\u6301\u5bf9 Linux\u3001Windows \u7b49\u8d44\u4ea7\u64cd\u4f5c\u7684\u5f55\u50cf\u8fdb\u884c\u56de\u653e\u5ba1\u8ba1 \u652f\u6301\u5bf9 RemoteApp\uff08X-PACK\uff09\u3001MySQL \u7b49\u5e94\u7528\u64cd\u4f5c\u7684\u5f55\u50cf\u8fdb\u884c\u56de\u653e\u5ba1\u8ba1 \u6307\u4ee4\u5ba1\u8ba1 \u652f\u6301\u5bf9\u8d44\u4ea7\u548c\u5e94\u7528\u7b49\u64cd\u4f5c\u7684\u547d\u4ee4\u8fdb\u884c\u5ba1\u8ba1 \u6587\u4ef6\u4f20\u8f93 \u53ef\u5bf9\u6587\u4ef6\u7684\u4e0a\u4f20\u3001\u4e0b\u8f7d\u8bb0\u5f55\u8fdb\u884c\u5ba1\u8ba1 \u6848\u4f8b\u7814\u7a76 \u00b6 JumpServer \u5821\u5792\u673a\u62a4\u822a\u987a\u4e30\u79d1\u6280\u8d85\u5927\u89c4\u6a21\u8d44\u4ea7\u5b89\u5168\u8fd0\u7ef4 JumpServer \u5821\u5792\u673a\u8ba9\u201c\u5927\u667a\u6167\u201d\u7684\u6df7\u5408 IT \u8fd0\u7ef4\u66f4\u667a\u6167 \u643a\u7a0b JumpServer \u5821\u5792\u673a\u90e8\u7f72\u4e0e\u8fd0\u8425\u5b9e\u6218 \u5c0f\u7ea2\u4e66\u7684JumpServer\u5821\u5792\u673a\u5927\u89c4\u6a21\u8d44\u4ea7\u8de8\u7248\u672c\u8fc1\u79fb\u4e4b\u8def JumpServer\u5821\u5792\u673a\u52a9\u529b\u4e2d\u624b\u6e38\u63d0\u5347\u591a\u4e91\u73af\u5883\u4e0b\u5b89\u5168\u8fd0\u7ef4\u80fd\u529b \u4e2d\u901a\u5feb\u9012\uff1aJumpServer\u4e3b\u673a\u5b89\u5168\u8fd0\u7ef4\u5b9e\u8df5 \u4e1c\u65b9\u660e\u73e0\uff1aJumpServer\u9ad8\u6548\u7ba1\u63a7\u5f02\u6784\u5316\u3001\u5206\u5e03\u5f0f\u4e91\u7aef\u8d44\u4ea7 \u6c5f\u82cf\u519c\u4fe1\uff1aJumpServer\u5821\u5792\u673a\u52a9\u529b\u884c\u4e1a\u4e91\u5b89\u5168\u8fd0\u7ef4","title":"\u603b\u4f53\u4ecb\u7ecd"},{"location":"#_1","text":"JumpServer \u662f\u5168\u7403\u9996\u6b3e\u5b8c\u5168\u5f00\u6e90\u7684\u5821\u5792\u673a, \u4f7f\u7528 GNU GPL v2.0 \u5f00\u6e90\u534f\u8bae, \u662f\u7b26\u5408 4A \u7684\u4e13\u4e1a\u8fd0\u7ef4\u5ba1\u8ba1\u7cfb\u7edf\u3002 JumpServer \u4f7f\u7528 Python / Django \u8fdb\u884c\u5f00\u53d1, \u9075\u5faa Web 2.0 \u89c4\u8303, \u914d\u5907\u4e86\u4e1a\u754c\u9886\u5148\u7684 Web Terminal \u89e3\u51b3\u65b9\u6848, \u4ea4\u4e92\u754c\u9762\u7f8e\u89c2\u3001\u7528\u6237\u4f53\u9a8c\u597d\u3002 JumpServer \u91c7\u7eb3\u5206\u5e03\u5f0f\u67b6\u6784, \u652f\u6301\u591a\u673a\u623f\u8de8\u533a\u57df\u90e8\u7f72, \u4e2d\u5fc3\u8282\u70b9\u63d0\u4f9b API, \u5404\u673a\u623f\u90e8\u7f72\u767b\u5f55\u8282\u70b9, \u53ef\u6a2a\u5411\u6269\u5c55\u3001\u65e0\u5e76\u53d1\u8bbf\u95ee\u9650\u5236\u3002 JumpServer \u73b0\u5df2\u652f\u6301\u7ba1\u7406 SSH\u3001 Telnet\u3001 RDP\u3001 VNC \u534f\u8bae\u8d44\u4ea7\u3002 \u6539\u53d8\u4e16\u754c, \u4ece\u4e00\u70b9\u70b9\u5f00\u59cb\u3002 KubeOperator \u662f JumpServer \u56e2\u961f\u5728 Kubernetes \u9886\u57df\u7684\u7684\u53c8\u4e00\u5168\u65b0\u529b\u4f5c\uff0c\u6b22\u8fce\u5173\u6ce8\u548c\u4f7f\u7528\u3002","title":"\u603b\u4f53\u4ecb\u7ecd"},{"location":"#_2","text":"\u5f00\u6e90: \u96f6\u95e8\u69db\uff0c\u7ebf\u4e0a\u5feb\u901f\u83b7\u53d6\u548c\u5b89\u88c5\uff1b \u5206\u5e03\u5f0f: \u8f7b\u677e\u652f\u6301\u5927\u89c4\u6a21\u5e76\u53d1\u8bbf\u95ee\uff1b \u65e0\u63d2\u4ef6: \u4ec5\u9700\u6d4f\u89c8\u5668\uff0c\u6781\u81f4\u7684 Web Terminal \u4f7f\u7528\u4f53\u9a8c\uff1b \u591a\u4e91\u652f\u6301: \u4e00\u5957\u7cfb\u7edf\uff0c\u540c\u65f6\u7ba1\u7406\u4e0d\u540c\u4e91\u4e0a\u9762\u7684\u8d44\u4ea7\uff1b \u4e91\u7aef\u5b58\u50a8: \u5ba1\u8ba1\u5f55\u50cf\u4e91\u7aef\u5b58\u50a8\uff0c\u6c38\u4e0d\u4e22\u5931\uff1b \u591a\u79df\u6237: \u4e00\u5957\u7cfb\u7edf\uff0c\u591a\u4e2a\u5b50\u516c\u53f8\u548c\u90e8\u95e8\u540c\u65f6\u4f7f\u7528\u3002","title":"\u7279\u8272\u4f18\u52bf"},{"location":"#_3","text":"\u8eab\u4efd\u8ba4\u8bc1 Authentication \u767b\u5f55\u8ba4\u8bc1 \u8d44\u6e90\u7edf\u4e00\u767b\u5f55\u4e0e\u8ba4\u8bc1 LDAP/AD \u8ba4\u8bc1 RADIUS \u8ba4\u8bc1 OpenID \u8ba4\u8bc1\uff08\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\uff09 CAS \u8ba4\u8bc1 \uff08\u5b9e\u73b0\u5355\u70b9\u767b\u5f55\uff09 MFA\u8ba4\u8bc1 MFA \u4e8c\u6b21\u8ba4\u8bc1\uff08Google Authenticator\uff09 RADIUS \u4e8c\u6b21\u8ba4\u8bc1 \u767b\u5f55\u590d\u6838\uff08X-PACK\uff09 \u7528\u6237\u767b\u5f55\u884c\u4e3a\u53d7\u7ba1\u7406\u5458\u7684\u76d1\u7ba1\u4e0e\u63a7\u5236 \u8d26\u53f7\u7ba1\u7406 Account \u96c6\u4e2d\u8d26\u53f7 \u7ba1\u7406\u7528\u6237\u7ba1\u7406 \u7cfb\u7edf\u7528\u6237\u7ba1\u7406 \u7edf\u4e00\u5bc6\u7801 \u8d44\u4ea7\u5bc6\u7801\u6258\u7ba1 \u81ea\u52a8\u751f\u6210\u5bc6\u7801 \u81ea\u52a8\u63a8\u9001\u5bc6\u7801 \u5bc6\u7801\u8fc7\u671f\u8bbe\u7f6e \u6279\u91cf\u6539\u5bc6\uff08X-PACK\uff09 \u5b9a\u671f\u6279\u91cf\u6539\u5bc6 \u591a\u79cd\u5bc6\u7801\u7b56\u7565 \u591a\u4e91\u7eb3\u7ba1\uff08X-PACK\uff09 \u5bf9\u79c1\u6709\u4e91\u3001\u516c\u6709\u4e91\u8d44\u4ea7\u81ea\u52a8\u7edf\u4e00\u7eb3\u7ba1 \u6536\u96c6\u7528\u6237\uff08X-PACK\uff09 \u81ea\u5b9a\u4e49\u4efb\u52a1\u5b9a\u671f\u6536\u96c6\u4e3b\u673a\u7528\u6237 \u5bc6\u7801\u5323\u5b50\uff08X-PACK\uff09 \u7edf\u4e00\u5bf9\u8d44\u4ea7\u4e3b\u673a\u7684\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u67e5\u770b\u3001\u66f4\u65b0\u3001\u6d4b\u8bd5\u64cd\u4f5c \u6388\u6743\u63a7\u5236 Authorization \u591a\u7ef4\u6388\u6743 \u5bf9\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u8d44\u4ea7\u3001\u8d44\u4ea7\u8282\u70b9\u3001\u5e94\u7528\u4ee5\u53ca\u7cfb\u7edf\u7528\u6237\u8fdb\u884c\u6388\u6743 \u8d44\u4ea7\u6388\u6743 \u8d44\u4ea7\u4ee5\u6811\u72b6\u7ed3\u6784\u8fdb\u884c\u5c55\u793a \u8d44\u4ea7\u548c\u8282\u70b9\u5747\u53ef\u7075\u6d3b\u6388\u6743 \u8282\u70b9\u5185\u8d44\u4ea7\u81ea\u52a8\u7ee7\u627f\u6388\u6743 \u5b50\u8282\u70b9\u81ea\u52a8\u7ee7\u627f\u7236\u8282\u70b9\u6388\u6743 \u5e94\u7528\u6388\u6743 \u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u5e94\u7528\u7ea7\u6388\u6743 MySQL \u6570\u636e\u5e93\u5e94\u7528\u3001RemoteApp \u8fdc\u7a0b\u5e94\u7528\uff08X-PACK\uff09 \u52a8\u4f5c\u6388\u6743 \u5b9e\u73b0\u5bf9\u6388\u6743\u8d44\u4ea7\u7684\u6587\u4ef6\u4e0a\u4f20\u3001\u4e0b\u8f7d\u4ee5\u53ca\u8fde\u63a5\u52a8\u4f5c\u7684\u63a7\u5236 \u65f6\u95f4\u6388\u6743 \u5b9e\u73b0\u5bf9\u6388\u6743\u8d44\u6e90\u4f7f\u7528\u65f6\u95f4\u6bb5\u7684\u9650\u5236 \u7279\u6743\u6307\u4ee4 \u5b9e\u73b0\u5bf9\u7279\u6743\u6307\u4ee4\u7684\u4f7f\u7528\uff08\u652f\u6301\u9ed1\u767d\u540d\u5355\uff09 \u547d\u4ee4\u8fc7\u6ee4 \u5b9e\u73b0\u5bf9\u6388\u6743\u7cfb\u7edf\u7528\u6237\u6240\u6267\u884c\u7684\u547d\u4ee4\u8fdb\u884c\u63a7\u5236 \u6587\u4ef6\u4f20\u8f93 SFTP \u6587\u4ef6\u4e0a\u4f20/\u4e0b\u8f7d \u6587\u4ef6\u7ba1\u7406 \u5b9e\u73b0 Web SFTP \u6587\u4ef6\u7ba1\u7406 \u5de5\u5355\u7ba1\u7406\uff08X-PACK\uff09 \u652f\u6301\u5bf9\u7528\u6237\u767b\u5f55\u8bf7\u6c42\u884c\u4e3a\u8fdb\u884c\u63a7\u5236 \u7ec4\u7ec7\u7ba1\u7406\uff08X-PACK\uff09 \u5b9e\u73b0\u591a\u79df\u6237\u7ba1\u7406\u4e0e\u6743\u9650\u9694\u79bb \u5b89\u5168\u5ba1\u8ba1 Audit \u64cd\u4f5c\u5ba1\u8ba1 \u7528\u6237\u64cd\u4f5c\u884c\u4e3a\u5ba1\u8ba1 \u4f1a\u8bdd\u5ba1\u8ba1 \u5728\u7ebf\u4f1a\u8bdd\u5185\u5bb9\u5ba1\u8ba1 \u5386\u53f2\u4f1a\u8bdd\u5185\u5bb9\u5ba1\u8ba1 \u5f55\u50cf\u5ba1\u8ba1 \u652f\u6301\u5bf9 Linux\u3001Windows \u7b49\u8d44\u4ea7\u64cd\u4f5c\u7684\u5f55\u50cf\u8fdb\u884c\u56de\u653e\u5ba1\u8ba1 \u652f\u6301\u5bf9 RemoteApp\uff08X-PACK\uff09\u3001MySQL \u7b49\u5e94\u7528\u64cd\u4f5c\u7684\u5f55\u50cf\u8fdb\u884c\u56de\u653e\u5ba1\u8ba1 \u6307\u4ee4\u5ba1\u8ba1 \u652f\u6301\u5bf9\u8d44\u4ea7\u548c\u5e94\u7528\u7b49\u64cd\u4f5c\u7684\u547d\u4ee4\u8fdb\u884c\u5ba1\u8ba1 \u6587\u4ef6\u4f20\u8f93 \u53ef\u5bf9\u6587\u4ef6\u7684\u4e0a\u4f20\u3001\u4e0b\u8f7d\u8bb0\u5f55\u8fdb\u884c\u5ba1\u8ba1","title":"\u529f\u80fd\u5217\u8868"},{"location":"#_4","text":"JumpServer \u5821\u5792\u673a\u62a4\u822a\u987a\u4e30\u79d1\u6280\u8d85\u5927\u89c4\u6a21\u8d44\u4ea7\u5b89\u5168\u8fd0\u7ef4 JumpServer \u5821\u5792\u673a\u8ba9\u201c\u5927\u667a\u6167\u201d\u7684\u6df7\u5408 IT \u8fd0\u7ef4\u66f4\u667a\u6167 \u643a\u7a0b JumpServer \u5821\u5792\u673a\u90e8\u7f72\u4e0e\u8fd0\u8425\u5b9e\u6218 \u5c0f\u7ea2\u4e66\u7684JumpServer\u5821\u5792\u673a\u5927\u89c4\u6a21\u8d44\u4ea7\u8de8\u7248\u672c\u8fc1\u79fb\u4e4b\u8def JumpServer\u5821\u5792\u673a\u52a9\u529b\u4e2d\u624b\u6e38\u63d0\u5347\u591a\u4e91\u73af\u5883\u4e0b\u5b89\u5168\u8fd0\u7ef4\u80fd\u529b \u4e2d\u901a\u5feb\u9012\uff1aJumpServer\u4e3b\u673a\u5b89\u5168\u8fd0\u7ef4\u5b9e\u8df5 \u4e1c\u65b9\u660e\u73e0\uff1aJumpServer\u9ad8\u6548\u7ba1\u63a7\u5f02\u6784\u5316\u3001\u5206\u5e03\u5f0f\u4e91\u7aef\u8d44\u4ea7 \u6c5f\u82cf\u519c\u4fe1\uff1aJumpServer\u5821\u5792\u673a\u52a9\u529b\u884c\u4e1a\u4e91\u5b89\u5168\u8fd0\u7ef4","title":"\u6848\u4f8b\u7814\u7a76"},{"location":"about/change_log/","text":"\u66f4\u65b0\u65e5\u5fd7 \u00b6 1.5.9 \u00b6 2020\u5e7405\u670821\u65e5 \u65b0\u7248 OpenID Connect \u8ba4\u8bc1\u914d\u7f6e\u6587\u6863 \u4e0b\u8f7d\u79bb\u7ebf\u64ad\u653e\u5668 \u7533\u8bf7\u8bd5\u7528JumpServer \u4f01\u4e1a\u7248 \u65b0\u589e\u529f\u80fd \u652f\u6301\u6807\u51c6 OpenID Connect \u4f18\u5316\u529f\u80fd \u4f18\u5316\u4eea\u8868\u76d8\u52a0\u8f7d\u901f\u5ea6 \u4f18\u5316\u8d44\u4ea7\u67e5\u8be2\u901f\u5ea6 \u66f4\u65b0\u4e91\u7ba1\u4e2d\u5fc3\u4e2d\u5404\u4e91\u670d\u52a1\u63d0\u4f9b\u5546\u652f\u6301\u7684\u5730\u57df\u5217\u8868\uff08\u6bd4\u5982\uff1a\u963f\u91cc\u4e91-\u897f\u53571\uff09\u3010XPack\u3011 \u4f18\u5316\u8fde\u63a5\u65e5\u5fd7\u4fe1\u606f \u8c03\u6574TreeAPI\u8bf7\u6c42\u5730\u5740 \u6dfb\u52a0\u652f\u6301\u76f4\u63a5\u8fde\u63a5\u6570\u636e\u5e93\u5e94\u7528 \u4fee\u590dBug \u4fee\u590dMFA\u4e8c\u6b21\u8ba4\u8bc1\u7684\u5f02\u5e38\u95ee\u9898 \u4fee\u590dAPI Key\u4e0d\u80fd\u5220\u9664\u7684\u95ee\u9898 \u4fee\u590d\u591a\u7ec4\u7ec7\u4e0b\u4eea\u8868\u76d8\u6570\u636e\u663e\u793a\u4e0d\u51c6\u786e\u95ee\u9898 \u4fee\u590dFTP\u65e5\u5fd7\u6ca1\u6709\u6309\u7167\u7ec4\u7ec7\u8fdb\u884c\u5b58\u653e\u7684\u95ee\u9898 \u4fee\u590d\u7528\u6237\u6388\u6743\u8d44\u4ea7\u6811\u53ca\u5217\u8868\u6570\u636e\u663e\u793a\u4e0d\u7a33\u5b9a\u95ee\u9898 \u4fee\u590d\u7528\u6237\u9875\u9762\u66f4\u65b0MFA\u65f6\u89e3\u9664\u7ba1\u7406\u5458\u5f3a\u5236\u542f\u7528\u7684\u95ee\u9898 \u4fee\u590d\u4efb\u52a1\u5217\u8868\u6267\u884c\u5386\u53f2\u4e2d\u7edf\u8ba1\u6570\u636e\u663e\u793a\u4e0d\u51c6\u786e\u7684\u95ee\u9898 \u4fee\u590d\u8d44\u4ea7\u6388\u6743\u7528\u6237/\u7528\u6237\u7ec4\u9875\u9762\u5220\u9664\u7528\u6237\u7ec4\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u53f3\u51fb\u8d44\u4ea7\u6811\u70b9\u51fb\u4ec5\u663e\u793a\u5f53\u524d\u8282\u70b9\u4e0b\u8d44\u4ea7\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u6a21\u5757\u7684\u4fe1\u53f7\u5904\u7406\u5668\u7531\u4e8e\u4e0d\u80fd\u6b63\u5e38\u76d1\u63a7\u800c\u5bfc\u81f4\u7684\u7cfb\u7edf\u7528\u6237\u4e0d\u80fd\u81ea\u52a8\u63a8\u9001\u5230\u8d44\u4ea7\u4ee5\u53ca\u6ca1\u6709\u5173\u8054\u8d44\u4ea7\u7684\u95ee\u9898 \u4fee\u590d\u8fde\u63a5\u8d44\u4ea7\u65e0\u53cd\u5e94\u95ee\u9898 \u5347\u7ea7\u4f9d\u8d56 jumpserver-django-oidc-rp==0.3.7.4 1.5.8 \u00b6 2020\u5e7404\u670816\u65e5 \u4e0b\u8f7d\u79bb\u7ebf\u64ad\u653e\u5668 \u7533\u8bf7\u8bd5\u7528 JumpServer \u4f01\u4e1a\u7248 \u65b0\u589e\u529f\u80fd \u5728\u7ebf\u4f1a\u8bdd\u76d1\u63a7\uff08\u5907\u6ce8\uff1a\u76ee\u524d\u4ec5\u652f\u6301\u534f\u8bae\u7c7b\u578b\u4e3assh\u3001telnet\u3001mysql\u7684\u5728\u7ebf\u4f1a\u8bdd\uff09 \u6279\u91cf\u6539\u5bc6\uff08\u652f\u6301\u4fee\u6539root\u3001administrator\u7b49\u7279\u6b8a\u7528\u6237\uff09\u3010XPack\u3011 \u521b\u5efa\u4e91\u7ba1\u4e2d\u5fc3\u540c\u6b65\u5b9e\u4f8b\u4efb\u52a1\u65f6\uff0c\u53ef\u9009\u62e9\u662f\u5426\u8986\u76d6\u540c\u6b65\u7684\u8d44\u4ea7\u4fe1\u606f\u3010XPack\u3011 \u65b0\u589e\u5728\u7ebf\u4f1a\u8bdd\u76d1\u63a7\u3010koko\u3011 \u4f18\u5316\u529f\u80fd \u521b\u5efa\u5f55\u50cf\u5b58\u50a8\u65f6\u81ea\u52a8\u6e05\u9664\u7a7a\u767d\u5b57\u7b26 \u4fee\u6539\u4e2d\u95f4\u4ef6\u4e2d\u83b7\u53d6\u5f53\u524d\u7ec4\u7ec7\u7684\u4f18\u5148\u7ea7 \u66f4\u65b0\u64ad\u653e\u5668\u4e0b\u8f7d\u5730\u5740\u94fe\u63a5 \u4f18\u5316\u521b\u5efaAuthBook\u903b\u8f91\uff08\u6dfb\u52a0\u4e92\u65a5\u9501\u673a\u5236\uff09 \u4fee\u6539\u7ec4\u7ec7\u83b7\u53d6\u4f18\u5148\u7ea7 \u7981\u7528ansible\u7684ssh\u8fde\u63a5\u590d\u7528 \u4fee\u6539\u9879\u76ee\u4f7f\u7528\u7684cache default(redis_cache -> redis_lock) \u66f4\u65b0\u7528\u6237\u65f6\u663e\u793aCAS\u7528\u6237\u6765\u6e90\u9009\u9879 \u4fee\u590dBug \u4fee\u590d\u5217\u8868\u4e2d\u65e5\u671f\u663e\u793a\u95ee\u9898 \u4fee\u590d\u8d44\u4ea7\u7528\u6237\u5217\u8868\u5220\u9664\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u5bfc\u51fa\u95ee\u9898\uff08\u5bfc\u51fa\u6ee1\u8db3\u641c\u7d22\u6761\u4ef6\u7684\u547d\u4ee4\u8bb0\u5f55\uff09 \u4fee\u590d\u56e0\u6570\u636e\u4e0d\u652f\u6301timezone\u5f15\u8d77\u7684\u4eea\u8868\u76d8\u6570\u636e\u4e3a\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u81ea\u5b9a\u4e49\u5e73\u53f0\u5217\u8868\u5728\u8be6\u60c5\u9875\u5220\u9664\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55/\u64cd\u4f5c/\u6539\u5bc6\u65e5\u5fd7\u641c\u7d22\u5b57\u6bb5\u6ca1\u6e05\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u7cfb\u7edf\u8bbe\u7f6e-\u7ec8\u7aef\u8bbe\u7f6e-\u8d44\u4ea7\u6392\u5e8f\u8bbe\u7f6e\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u70b9\u51fb\u6d4b\u8bd5\u90ae\u4ef6\u540e\uff0c\u914d\u7f6e\u4fe1\u606f\u83b7\u53d6\u4e0d\u7a33\u5b9a\u7684\u95ee\u9898 \u4fee\u590d\u4f7f\u7528\u5bb9\u5668\u65f6\uff0cAzure\u5f55\u50cf\u4e0a\u4f20\u95ee\u9898\uff08 \u955c\u50cf\u6dfb\u52a0ca-certificates\u4f9d\u8d56 \uff09\u3010koko\u3011 \u66f4\u65b0\u4f9d\u8d56 python-redis-lock==3.5.0 jms-storage-sdk==0.0.29 1.5.7 \u00b6 2020\u5e743\u670819\u65e5 JumpServer \u5f55\u50cf\u79bb\u7ebf\u64ad\u653e\u5668 \u65b0\u589e\u529f\u80fd \u652f\u6301 CAS Server \uff08\u4e2d\u592e\u8ba4\u8bc1\u670d\u52a1\uff09\u7528\u6237\u767b\u5f55\u8ba4\u8bc1 \u63d0\u51fa\u52a8\u6001\u7cfb\u7edf\u7528\u6237\u7684\u6982\u5ff5\uff0c\u5f53\u7528\u6237\u767b\u5f55\u8d44\u4ea7\u65f6\u81ea\u52a8\u4f7f\u7528\u4e0e\u5176 JumpServer\u7528\u6237\u540d\u76f8\u540c\u7684\u7cfb\u7edf\u7528\u6237\u8fde\u63a5\u8d44\u4ea7 \u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u4e0a\u4f20\u8def\u5f84\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u4e3a\u4e0d\u540c\u7cfb\u7edf\u7528\u6237\u6307\u5b9a\u4e0d\u540c\u7684SFTP\u6302\u8f7d\u76ee\u5f55\uff0c\u76ee\u524d\u4ec5\u652f\u6301Linux\u8d44\u4ea7 \u652f\u6301\u4e0b\u8f7d\u4f1a\u8bdd\u5f55\u50cf\uff0c\u53ef\u914d\u5408JumpServer Video Player \u8fdb\u884c\u79bb\u7ebf\u64ad\u653e\uff0c\u5e76\u9644\u5e26\u5f55\u50cf\u7684\u64cd\u4f5c\u4fe1\u606f\uff0cJumpServer Video Player \u9002\u914d Mac \u3001Windows \u548c Linux \u4e91\u7ba1\u4e2d\u5fc3\u652f\u6301\u540c\u6b65\u534e\u4e3a\u4e91\u5b9e\u4f8b\uff1b\u5bf9\u4e91\u4e0a\u5df2\u91ca\u653e\u5b9e\u4f8b\u8fdb\u884c\u672c\u5730\u6807\u8bb0 \u3010XPack\u3011 \u6279\u91cf\u6539\u5bc6\u9488\u5bf9\u7279\u6b8a\u7528\u6237\uff08\u5982root\u3001administrator\u7b49\uff09\u5f00\u653e\u6539\u5bc6\u64cd\u4f5c\u3010XPack\u3011 \u652f\u6301\u52a8\u6001\u7684\u7cfb\u7edf\u7528\u6237\u540d \u589e\u52a0\u547d\u4ee4\u8bb0\u5f55\u98ce\u9669\u6807\u8bb0 \u589e\u52a0\u7528\u6237 SSH \u8fde\u63a5\u5fc3\u8df3\u8bbe\u7f6e\uff0c\u9ed8\u8ba430s \u9694\u79bb MySql \u8fde\u63a5\u7684\u8fdb\u7a0b\u7a7a\u95f4 \u4f18\u5316\u529f\u80fd \u4f18\u5316Dashboard\u9875\u9762\u52a0\u8f7d\u901f\u5ea6 \u4f18\u5316MFA\u767b\u5f55\u9875\u9762 \u4f18\u5316\u8d44\u4ea7\u6388\u6743\u89c4\u5219\uff0c\u5f53\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u8d44\u4ea7\u3001\u8282\u70b9\u3001\u7cfb\u7edf\u7528\u6237\u7b49\u53d8\u66f4\u65f6\uff0c\u5b9e\u65f6\u5237\u65b0\u4e0e\u5176\u4ed6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb \u4f18\u5316\u8d44\u4ea7\u7528\u6237\u5217\u8868\u5c55\u793a\u548cAPI\u6027\u80fd\u4f18\u5316 \u4f18\u5316LDAP/AD\u914d\u7f6e\u6a21\u5757\u7684\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u903b\u8f91\uff0c\u5e76\u6dfb\u52a0\u6d4b\u8bd5\u7528\u6237\u767b\u5f55\u7684\u529f\u80fd \u4f18\u5316\u53ef\u8fde\u63a5\u6027\u6d4b\u8bd5\u903b\u8f91 \u4f18\u5316\u90e8\u5206API\uff08\u5305\u62ec\u8d44\u4ea7\u3001\u7cfb\u7edf\u7528\u6237\u3001\u7ba1\u7406\u7528\u6237\u7b49\u76f8\u5173API\uff09\u5904\u7406\u903b\u8f91 \u4f18\u5316\u6539\u5bc6\u8ba1\u5212\u6267\u884c\u6d41\u7a0b\u3010XPack\u3011 \u589e\u5f3a SSH Client \u590d\u7528\u8fde\u63a5\uff0c\u514d\u53d7 SSH MaxSessions \u9650\u5236 \u589e\u5f3a Websocket \u8fde\u63a5\u5904\u7406\u80fd\u529b \u589e\u5f3a Web \u6587\u4ef6\u7ba1\u7406\u529f\u80fd\uff0c\u652f\u6301\u8f6f\u8fde\u63a5\u76ee\u5f55\uff0c\u589e\u52a0\u9519\u8bef\u4fe1\u606f\u63d0\u793a \u589e\u5f3a SFTP \u529f\u80fd\uff0c\u6839\u76ee\u5f55\u53ef\u4f9d\u636e\u7cfb\u7edf\u7528\u6237\u52a8\u6001\u914d\u7f6e \u589e\u5f3a Telnet Client \u8fde\u63a5 \u5f55\u50cf\u5b58\u50a8\u914d\u7f6e\u52a8\u6001\u66f4\u65b0 \u4fee\u590dBug \u4fee\u590d\u65e0\u6cd5\u5220\u9664\u7a7a\u8282\u70b9\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u3001\u6279\u91cf\u547d\u4ee4\u6ca1\u6709\u9488\u5bf9\u7ec4\u7ec7\u8fdb\u884c\u5206\u7ec4\u663e\u793a\u7684\u95ee\u9898 \u4fee\u590d\u5b58\u5728\u65e0\u6548 ES \u5b58\u50a8\u65f6\u8bbf\u95ee\u547d\u4ee4\u8bb0\u5f55\u9875\u9762\u5931\u6548\u7684\u95ee\u9898 \u4fee\u590d\u4f1a\u5bf9\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u7528\u6237\u53d1\u9001\u521b\u5efa\u7528\u6237\u6210\u529f\u90ae\u4ef6\u3001\u5bc6\u7801\u8fc7\u671f\u63d0\u9192\u90ae\u4ef6\u7684\u95ee\u9898 \u4fee\u590d\u90e8\u5206pip\u4f9d\u8d56\u5305\u7248\u672c\u4e0d\u517c\u5bb9\u7684\u95ee\u9898 \u4fee\u590d Telnet \u8d44\u4ea7\u7f51\u5173\u8fde\u63a5\u672a\u5173\u95ed\u95ee\u9898 \u4fee\u590d\u4e3b\u8fdb\u7a0b\u5047\u6b7b\u95ee\u9898 \u4fee\u590d\u9996\u6b21\u542f\u52a8\u83b7\u53d6\u5f55\u50cf\u5b58\u50a8\u7c7b\u578b\u4e3a Null \u7684\u95ee\u9898 1.5.6 \u00b6 2020\u5e741\u67082\u65e5 \u6f0f\u6d1e\u4fee\u590d \u4fee\u590d\u7528\u6237\u88ab\u5f3a\u5236\u5f00\u542f\u4f7f\u7528 MFA \u4e8c\u6b21\u8ba4\u8bc1\u540e\u53ef\u4ee5\u81ea\u4e3b\u7ed5\u8fc7\u7ed1\u5b9a\u7684\u95ee\u9898 \u65b0\u589e\u529f\u80fd \u5168\u9762\u652f\u6301 IPv6 \u6570\u636e\u5e93\u5e94\u7528\u3010\u5546\u4e1a\u7248\u3011 Windows \u6279\u91cf\u547d\u4ee4 \u5f55\u50cf\u5b58\u50a8\u7c7b\u578b\uff1aSwift\u3001Ceph \u8282\u70b9\u8be6\u60c5\uff08\u53f3\u51fb\u8282\u70b9\u663e\u793a\uff09 \u8d44\u4ea7\u5e73\u53f0\u5217\u8868 \u4f18\u5316\u529f\u80fd \u5f55\u50cf/\u547d\u4ee4\u5b58\u50a8\u914d\u7f6e\u8fc1\u79fb\u5230 Terminal \u6a21\u5757 \u4f18\u5316\u7528\u6237\u8be6\u60c5\u9875\u9762 \u7528\u6237\u5217\u8868\u6dfb\u52a0\u79fb\u9664\u64cd\u4f5c\uff08\u975eDEFAULT\u7ec4\u7ec7\uff09\u3010\u5546\u4e1a\u7248\u3011 \u7528\u6237\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u540e\uff0c\u53ea\u5728\u521b\u5efa\u65f6\u4fee\u6539\u7528\u6237\u6765\u6e90\u4fe1\u606f \u4f18\u5316\u524d\u7aef Form \u6e32\u67d3\u903b\u8f91\uff08\u5b58\u50a8\u914d\u7f6e\u3001RemoteApp\u3001DatabaseApp\uff09 \u7edf\u4e00\u5bfc\u5165\u5bfc\u51fa\u7ec4\u4ef6 \u7edf\u4e00\u4e86\u6811\u5217\u8868\u57fa\u7840\u6a21\u677f \u4f18\u5316\u65e5\u5fd7\u5ba1\u8ba1\uff08\u64cd\u4f5c\u65e5\u5fd7\uff0c\u6539\u5bc6\u65e5\u5fd7\uff09 API \u91c7\u7528 serializer_classes \u5b57\u6bb5\uff08default, display\uff09 \u7edf\u4e00\u7cfb\u7edf\u914d\u7f6e\u7684 Tab \u5207\u6362 \u7edf\u4e00\u6ca1\u6709nav\u7684\u9875\u9762\uff08\u91cd\u7f6e\u5bc6\u7801\uff0c\u5fd8\u8bb0\u5bc6\u7801\uff0c\u91cd\u7f6e\u4e2d\u8bbe\u7f6e\u5bc6\u7801\uff0c\u72ec\u7acb message \u9875\u9762\uff09 \u4f18\u5316\u7528\u6237\u7ec4\u5217\u8868\u9875\uff08\u4e0d\u8fd4\u56de\u7ec4\u4e2d\u7528\u6237\uff0c\u53ea\u8fd4\u56de\u6570\u91cf\uff09 \u7ec4\u7ec7\u7684\u4e00\u4e9b\u65b9\u6cd5\u53d8\u4e3alayzproperty\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97 \u7528\u6237\u7ec4\u589e\u52a0\u5220\u9664\u7528\u6237\uff08\u7528\u6237\u7ec4\u8be6\u60c5\u9875\uff09 \u4f18\u5316Ops Task\u8868\u7ed3\u6784\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2\u6b21\u6570 \u4f18\u5316\u57fa\u7840\u7684 Encryptjsonfield \u4fee\u6539 Adhoc \u8fd4\u56de\u7684 become \u5b57\u6bb5\uff0c\u907f\u514d\u5bc6\u7801\u6cc4\u9732 \u4fee\u6539\u6821\u9a8c\u7528\u6237\u8d44\u4ea7\u6743\u9650API\u4e0d\u4f7f\u7528\u7f13\u5b58 \u7528\u6237\u767b\u5f55\u65e5\u5fd7\uff0c\u91c7\u7528\u540c\u6b65\u673a\u5236 \u53f3\u51fb\u8282\u70b9\u83dc\u5355\u4f4d\u7f6e\u8ba1\u7b97 \u547d\u4ee4\u5b58\u50a8\uff08ES\uff09\u76f8\u5173\u5b57\u6bb5\u8bbe\u7f6e\u4e3a required \u64cd\u4f5c\u65e5\u5fd7\u6587\u6848\uff0c\u7528\u6237\u4fee\u6539\u4e3a\u64cd\u4f5c\u8005 \u8c03\u6574 Web \u6587\u4ef6\u7ba1\u7406\u4e3a\u8282\u70b9\u6811\u7ed3\u6784 \u652f\u6301 Web \u6587\u4ef6\u7ba1\u7406\u7684\u8d44\u4ea7\u641c\u7d22 \u589e\u52a0 SSH \u8fde\u63a5\u7684\u52a0\u5bc6\u7b97\u6cd5\u4ee5\u652f\u6301\u65e7\u8bbe\u5907 \u4fee\u590dBug \u68c0\u9a8c\u7528\u6237\u6709\u6548\u6027\u903b\u8f91\uff08\u89e3\u51b3\u542f\u7528LDAP\u7b49\u8ba4\u8bc1\u65f6\uff0c\u663e\u793a\u7528\u6237\u540d\u4e0d\u5b58\u5728\uff09 \u5de5\u5355\u6309\u7528\u6237\u641c\u7d22\u65e0\u6548\u7684\u95ee\u9898 \u5bc6\u7801\u5323\u5b50\u9009\u62e9 id \u5bfc\u51fa\u65f6\u7684\u95ee\u9898 \u89e3\u51b3\u5bc6\u7801\u5323\u5b50\u7ffb\u9875\u518d\u6b21\u9009\u62e9\u8d44\u4ea7\u65f6\u4e0d\u80fd\u8bbe\u7f6e\u5230\u9009\u62e9\u6846\u7684\u95ee\u9898 \u89e3\u51b3\u7ba1\u7406\u5458\u91cd\u7f6e\u7528\u6237MFA\u540e\uff0c\u81ea\u52a8\u9000\u51fa\u7684\u95ee\u9898 \u4fee\u590d\u65e0\u6cd5\u4f7f\u7528\u4e2d\u6587\u641c\u7d22\u8d44\u4ea7 \u4fee\u590d\u56e0\u81ea\u5b9a\u4e49\u6b63\u5219\u9020\u6210\u7684\u7a0b\u5e8f\u5f02\u5e38 \u4fee\u590d\u56e0S3\u914d\u7f6e\u9020\u6210\u7684\u7a0b\u5e8f\u5f02\u5e38 \u4f18\u5316\u90e8\u5206\u4ee3\u7801 \u66f4\u65b0\u4f9d\u8d56 psutil==5.6.5 go-elasticsearch v6.8.5 1.5.5 \u00b6 2019\u5e7412\u67084\u65e5 \u65b0\u589e\u529f\u80fd \u5de5\u5355\u7ba1\u7406\u3010\u5546\u4e1a\u7248\u3011 \u4e8c\u6b21\u590d\u5408\uff08\u7528\u6237\u767b\u5f55\uff09\u3010\u5546\u4e1a\u7248\u3011 \u4e8c\u6b21\u8ba4\u8bc1\uff08MFA Radius\uff09 \u91cd\u542f\u540e\u652f\u6301\u81ea\u52a8\u4e0a\u4f20\u9057\u7559\u5f55\u50cf \u652f\u6301 Windows \u8fde\u63a5\u8d85\u65f6\u65ad\u5f00 \u4f18\u5316\u529f\u80fd LDAP/AD \u903b\u8f91 \u53ef\u4fee\u6539\u7528\u6237\u6765\u6e90\uff08\u7528\u6237\u521b\u5efa\uff09 \u6536\u96c6\u8d44\u4ea7\u7528\u6237\uff08\u663e\u793a\u7528\u6237\u6700\u540e\u767b\u5f55\u65f6\u95f4\uff09 \u5de6\u4fa7\u7ec4\u7ec7\u589e\u52a0\u641c\u7d22\u8fc7\u6ee4 \u53ef\u5173\u95ed\u9875\u9762\u63d0\u793a\u4fe1\u606f \u8d44\u4ea7\u7528\u6237\u5217\u8868\u652f\u6301\u6a21\u7cca\u641c\u7d22 \u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u914d\u7f6e\uff08Windows\uff09 \u4f18\u5316\u6388\u6743\u8d44\u4ea7\u5206\u9875\u5c55\u793a \u652f\u6301\u6388\u6743\u8d44\u4ea7\u7684\u591a\u7ea7\u641c\u7d22 \u652f\u6301\u7528\u6237\u767b\u5f55\u7684\u4e8c\u6b21\u5ba1\u6838 \u4fee\u590dBug \u4fee\u590d\u7528\u6237\u6388\u6743\u8d44\u4ea7\u95ee\u9898\uff08\u7528\u6237\u7ec4/\u7528\u6237\u6388\u6743\u53d8\u66f4\u5237\u65b0\u95ee\u9898\uff09 \u4fee\u590d\u56e0\u7248\u672c\u4e0d\u4e00\u81f4\u9020\u6210\u7684\u5f02\u5e38 \u4fee\u590d\u90e8\u5206 telnet \u767b\u5f55\u95ee\u9898 1.5.4 \u00b6 2019\u5e7410\u670823\u65e5 \u65b0\u589e\u529f\u80fd \u7528\u6237\u6536\u85cf\u8d44\u4ea7\uff08\u7528\u6237\u9875\u9762 -> \u6211\u7684\u8d44\u4ea7\uff09 LDAP \u767b\u5f55\u8ba4\u8bc1\u6dfb\u52a0\u914d\u7f6e\u9879\uff1a\u53ea\u6709\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u4f1a\u88ab\u5141\u8bb8\u8ba4\u8bc1\uff08\u914d\u7f6e\u9879\u53ef\u5728 config_example.yml \u4e2d\u67e5\u627e AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS\uff09 \u4f18\u5316\u529f\u80fd \u4f18\u5316 LDAP \u7528\u6237\u5bfc\u5165/\u641c\u7d22\u7684\u903b\u8f91\uff08\u91c7\u7528\u7528\u6237\u8fc7\u6ee4\u5668\u65b9\u5f0f\uff09 \u4f18\u5316\u547d\u4ee4\u5217\u8868\u4e2d\u547d\u4ee4\u7684\u663e\u793a\uff08\u89e3\u51b3\u547d\u4ee4\u592a\u957f\u7684\u95ee\u9898\uff09 \u4f18\u5316 select2 js/css \u4f9d\u8d56\u7248\u672c(4.0.10)\uff08\u89e3\u51b3\u591a\u9009\u4e0b\u62c9\u6846\u81ea\u52a8\u56de\u8df3\u5230\u9876\u90e8\u7684\u95ee\u9898\uff09 \u4f18\u5316 celery log \u663e\u793a\uff08\u91c7\u7528 Websocket \u65b9\u5f0f\uff09 \u4f18\u5316\u8282\u70b9\u5220\u9664 API\uff0c\u8fd4\u56de\u5220\u9664\u5931\u8d25\u539f\u56e0\uff08\u5305\u542b\u5b50\u8282\u70b9\u6216\u8d44\u4ea7\uff09 \u9650\u5236\u7cfb\u7edf\u7528\u6237 name \u5b57\u6bb5\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26 \u6dfb\u52a0\u811a\u672c\uff1aget_no_parent_nodes.py \u66f4\u65b0\u521b\u5efa/\u66f4\u65b0\u7528\u6237\u7ec4\u7684\u53d6\u6d88\u6309\u94ae->\u91cd\u7f6e\u6309\u94ae\uff08\u907f\u514d\u5f15\u8d77\u6b67\u4e49\uff09 \u4f18\u5316\u6240\u6709 API \u7684 get_queryset \u65b9\u5f0f \u4fee\u6539\u83b7\u53d6\u7cfb\u7edf\u7528\u6237 API \u4e3a\u53ea\u8fd4\u56de\u8282\u70b9\u6570\u91cf\uff08\u4e4b\u524d\u662f\u8fd4\u56de\u8282\u70b9\u5217\u8868\uff09 \u4fee\u6539 session \u652f\u6301 protocol \u641c\u7d22 \u4fee\u6539 form serializer \u5bf9\u5e94\u7684\u591a\u5bf9\u591a\u5b57\u6bb5 \u4fee\u6539\u547d\u4ee4\u6279\u91cf\u6267\u884c\u5de6\u4fa7\u9009\u62e9\u7cfb\u7edf\u7528\u6237 \u4fee\u6539\u67e5\u770b\u8d44\u4ea7\u7528\u6237 Auth info \u53ef\u914d\u7f6e\u5173\u95ed MFA \u6821\u9a8c \u4f18\u5316\u521b\u5efa\u7528\u6237\u90ae\u4ef6\u5185\u5bb9 \u4f18\u5316\u7528\u6237\u7ec4\u8be6\u60c5\u9875\u9762\u9009\u62e9\u7528\u6237\u4e0b\u62c9\u5217\u8868\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d \u4f18\u5316\u547d\u4ee4\u8fc7\u6ee4\u8be6\u60c5\u7ed1\u5b9a\u5230\u7cfb\u7edf\u7528\u6237\u70b9\u51fb\u4e0b\u62c9\u6846\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898 \u4f18\u5316\u63d0\u4ea4 api \u62a5\u9519\u65f6\u6eda\u52a8\u5230\u9519\u8bef\u63d0\u793a\u884c \u4f18\u5316 table \u9875\u9762\u67d0\u4e9b\u5217\u5bbd\u5ea6 \u4fee\u6539 jms \u542f\u52a8\u811a\u672c\uff0cstop \u65f6\u589e\u52a0\u8d85\u65f6\u68c0\u6d4b \u4fee\u6539\u5bfc\u51fa\u767b\u5f55\u65e5\u5fd7\u7684\u65e5\u671f\u9009\u62e9\u4ece\u5f00\u59cb\u65e5\u671f\u768400:00:00\uff0c\u5230\u7ed3\u675f\u65e5\u671f\u768423:59:59 \u4fee\u6539\u8fd4\u56de\u8d44\u4ea7\u6811\u5305\u542b\u7ec4\u7ec7\u4fe1\u606f \u9650\u5236\u7ec4\u7ec7\u540d\u79f0\u4e2d\u4f7f\u7528\u7684\u7279\u6b8a\u5b57\u7b26\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u4fee\u590dBug \u4fee\u590d\u8c03\u7528\u7cfb\u7edf\u7528\u6237\u8d44\u4ea7 API \u65f6 Connectivity is not JSON serializable \u7684 Bug \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u4ece es \u4e2d\u83b7\u53d6\u5931\u8d25\uff08\u539f\u56e0\uff1a\u65f6\u95f4\u65e5\u671f\u683c\u5f0f\u4e0d\u5339\u914d\uff09 \u4fee\u6539\u7ec8\u7aef\u547d\u4ee4\u7c7b\u578b MAPPING\uff08elasticsearch -> es\uff09 \u4fee\u590d\u8d44\u4ea7\u6388\u6743\u5217\u8868\u641c\u7d22 invalid:false \u65f6\u51fa\u73b0 500 \u9519\u8bef \u4fee\u590d\u5bfc\u51fa\u8d44\u4ea7 csv \u6587\u4ef6\u4e3a\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u5bfc\u81f4 favorite \u548c empty \u540c\u65f6\u51fa\u73b0\u7684\u95ee\u9898 \u4fee\u590d\u8bfb\u53d6\u65e5\u5fd7\u65f6\u53ef\u80fd\u89e3\u7801\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u7ec4\u7ec7\u7ba1\u7406\u5458\u5728\u8d44\u4ea7\u8be6\u60c5\u9875\u9762\u4e0d\u663e\u793a\uff08\u5220\u9664/\u66f4\u65b0\uff09\u6309\u94ae\u7684\u95ee\u9898\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u4fee\u590d\u7ec4\u7ec7\u7ba1\u7406\u5458\u67e5\u770b\u7528\u6237\u6743\u9650\u5931\u8d25\u95ee\u9898\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u66f4\u65b0\u4f9d\u8d56 select2 \u5347\u7ea7\u7248\u672c 4.0.10\uff08\u89e3\u51b3\u591a\u9009\u4e0b\u62c9\u6846\u9009\u62e9\u8df3\u5230\u9876\u90e8\u7684\u95ee\u9898\uff09 1.5.3 \u00b6 2019\u5e749\u670824\u65e5 \u7ec4\u4ef6\u8bf4\u660e \u81ea v1.5.3 \u7248\u672c\u8d77\uff08\u5305\u542b v1.5.3\uff09 \uff0cKoko \u5c06\u62c5\u4efb Coco \u5728 JumpServer \u9879\u76ee\u4e2d\u7684\u91cd\u8981\u89d2\u8272\uff0c\u4e4b\u540e\u7684\u7248\u672c\u5c06\u4e0d\u4f1a\u518d\u5bf9 Coco \u8fdb\u884c\u5347\u7ea7\u7ef4\u62a4\u3002 \u65b0\u589e\u529f\u80fd \u6dfb\u52a0\u9875\u9762\u521b\u5efa API Key \u7684\u529f\u80fd\uff08\u53f3\u4e0a\u89d2\u70b9\u51fb\u8d26\u53f7\u4e0b\u62c9\u5217\u8868 -> API Key\uff09 \u5728\u7ebf\u4f1a\u8bdd\u5217\u8868\u4e2d\u5141\u8bb8\u7ec8\u65ad RDP Session \u6dfb\u52a0\u7528\u6237\u6811\u7f13\u5b58 \u4f18\u5316\u529f\u80fd \u4f18\u5316\u8d44\u4ea7\u6811\u52a0\u8f7d\u903b\u8f91 \u4f18\u5316\u8d44\u4ea7\u6388\u6743\u6811\u3001\u6388\u6743\u89c4\u5219\u52a0\u8f7d\u3001\u8fc7\u6ee4\u903b\u8f91 \u4f18\u5316\u524d\u7aef asset modal table \u7edf\u4e00 URL \u5730\u5740 \u4fee\u6539 Swagger \u5141\u8bb8\u6279\u91cf\u5220\u9664\u7528\u6237\uff0c\u4fee\u6539\u524d\u7aef\u63d0\u793a\u4fe1\u606f\u903b\u8f91 \u63a8\u9001\u7cfb\u7edf\u7528\u6237\u65f6\uff0c\u5728\u8d44\u4ea7\u4e0a\u521b\u5efa\u540c\u540d\u7684\u7528\u6237\u7ec4 \u8d44\u4ea7\u534f\u8bae\u4fee\u6539\uff1atelnet (beta) => telnet WebTerminal \u8df3\u8f6c\u65f6\u6dfb\u52a0\u65f6\u95f4\u6233 \u4fee\u590dBug \u4fee\u590d\u6388\u6743\u89c4\u5219\u5217\u8868\u540c\u4e00\u6761\u6570\u636e\u91cd\u590d\u663e\u793a\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u89c4\u5219\u5217\u8868\u7ffb\u9875\u540e\u91cd\u590d\u5c55\u793a\u524d\u51e0\u9875\u4e2d\u6570\u636e\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u8be6\u60c5\u4e2d\u6388\u6743\u8d44\u4ea7\u6216\u8282\u70b9\u6dfb\u52a0\u8d44\u4ea7\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u7cfb\u7edf\u8bbe\u7f6e\u7684\u914d\u7f6e\u5076\u5c14\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u6267\u884c\u5de6\u4fa7\u6811\u70b9\u51fb\u95ee\u9898 \u4fee\u590d\u7528\u6237\u8ba4\u8bc1\u5e8f\u5217\u7c7b\u83b7\u53d6 request \u7684\u95ee\u9898 \u4fee\u590d\u6279\u91cf\u521b\u5efa\u7cfb\u7edf\u7528\u6237\u7b49\u8d44\u6e90\u65f6\uff0cinitial_data \u83b7\u53d6\u6570\u636e\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u521b\u5efa\u6388\u6743\u89c4\u5219\u6388\u6743\u8282\u70b9\u65f6\uff0c\u7cfb\u7edf\u7528\u6237\u4e0d\u81ea\u52a8\u63a8\u9001\u7684\u95ee\u9898 \u4fee\u590d\u6d4f\u89c8\u5668\u5173\u95ed\u540e Session \u4e0d\u5931\u6548\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u5f53\u79fb\u52a8\u8282\u70b9\u540e\uff0c\u88ab\u79fb\u52a8\u7684\u8282\u70b9\u4e0b\u7684\u8d44\u4ea7\u4f1a\u653e\u5230\u672a\u5206\u7ec4\u8282\u70b9\u4e0b\u7684\u95ee\u9898 \u4fee\u590d\u5237\u65b0\u8d44\u4ea7\u786c\u4ef6\u4fe1\u606f\u65f6\u65e0\u6cd5\u68c0\u6d4b NVMe \u7684\u786c\u76d8\u7684\u95ee\u9898 \u89e3\u51b3\u547d\u4ee4\u6267\u884c\u5bbd\u5ea6\u95ee\u9898 \u66f4\u65b0\u4f9d\u8d56 \u5347\u7ea7 jQuery v3.1.1 1.5.2 \u00b6 2019\u5e747\u670816\u65e5 \u65b0\u589e\u529f\u80fd \u7cfb\u7edf\u8bbe\u7f6e-\u5b89\u5168\u8bbe\u7f6e\u4e2d\u6dfb\u52a0\u914d\u7f6e\u9879\uff1a\u7ec8\u7aef\u6ce8\u518c \u4f18\u5316\u529f\u80fd \u83b7\u53d6\u7cfb\u7edf\u7528\u6237\u6388\u6743\u8d44\u4ea7\u65f6\uff0c\u53ea\u8fd4\u56de\u8d44\u4ea7\u534f\u8bae\u652f\u6301\u7684\u7cfb\u7edf\u7528\u6237\u3002 \u8868\u5355\u4f7f\u7528API\u8fdb\u884c\u63d0\u4ea4 \u4f18\u5316\u6388\u6743\u89c4\u5219\u8d44\u4ea7\u5217\u8868\u9875\u9762 \u5728\u7ebf/\u5386\u53f2\u4f1a\u8bdd\u9875\u9762\u53bb\u6389\u534f\u8bae\u641c\u7d22\u9009\u9879 \u4fee\u590dBug \u89e3\u51b3\u547d\u4ee4\u8fc7\u6ee4\u5668\u8be6\u60c5\u6dfb\u52a0\u7cfb\u7edf\u7528\u6237\u5931\u8d25\u7684\u95ee\u9898 \u89e3\u51b3\u547d\u4ee4\u8fc7\u6ee4\u5668\u8be6\u60c5\u9875\u5220\u9664\u529f\u80fd\u4e0d\u53ef\u7528\u7684\u95ee\u9898 \u89e3\u51b3\u53ef\u4ee5\u521b\u5efa\u540c\u540d\u547d\u4ee4\u8fc7\u6ee4\u5668\u7684\u95ee\u9898\uff08\u4fee\u590d\u8d44\u4ea7\u6388\u6743\u8be6\u60c5\u9875\u5220\u9664\u5f39\u51fa\u6846\u7684\u6743\u9650\u540d\u663e\u793a\u4e0d\u5bf9) \u89e3\u51b3\u5728\u8d44\u4ea7\u6388\u6743\u8be6\u60c5\u9875\u5220\u9664\u6388\u6743\u89c4\u5219\u65f6\u5f39\u51fa\u6846\u4e2d\u540d\u79f0\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u7f51\u57df\u8be6\u60c5\u9875\u5220\u9664\u529f\u80fd\u4e0d\u53ef\u7528\u7684\u95ee\u9898 \u89e3\u51b3\u8d44\u4ea7\u5217\u8868\u6570\u91cf\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u521b\u5efa\u547d\u4ee4\u8fc7\u6ee4\u89c4\u5219\u7c7b\u578b\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u65f6\u521b\u5efa\u4e0d\u6210\u529f\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u89c4\u5219\u8be6\u60c5\u7528\u6237\u7ec4\u6570\u91cf\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u65e5\u671f\u663e\u793a\u5dee8\u5c0f\u65f6\u7684\u95ee\u9898 \u89e3\u51b3\u521b\u5efa\u8d44\u4ea7\u5931\u8d25\u7684\u95ee\u9898\uff08\u539f\u56e0\uff1a\u534f\u8bae\u7684\u6dfb\u52a0\u3001\u5220\u9664\u903b\u8f91\uff09 \u89e3\u51b3\u6388\u6743\u9875\u9762\u4e0d\u663e\u793a\u8d44\u4ea7\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u8d44\u4ea7\u5305\u542b\u5df2\u7981\u7528\u8d44\u4ea7\u7684\u95ee\u9898 \u89e3\u51b3\u7cfb\u7edf\u7528\u6237\u3001\u7ba1\u7406\u7528\u6237\u63d0\u4ea4\u4f1a\u91cd\u7f6e\u5bc6\u7801\u7684\u95ee\u9898 \u89e3\u51b3\u6279\u91cf\u6267\u884c\u547d\u4ee4\u6ca1\u6709\u9009\u62e9\u8d44\u4ea7\u7684\u95ee\u9898 1.5.1 \u00b6 2019\u5e747\u67086\u65e5 \u65b0\u589e\u529f\u80fd \u5ba1\u8ba1\u5458\uff08\u7528\u6237\u6dfb\u52a0\u5ba1\u8ba1\u5458\u89d2\u8272\uff09 \u4f18\u5316\u529f\u80fd \u7528\u6237\u9875\u9762\u4f18\u5316\u8d44\u4ea7\u6807\u7b7e\u8fc7\u6ee4\u529f\u80fd \u7528\u6237\u521b\u5efa\u6dfb\u52a0\u5230\u5f53\u524d\u7ec4\u7ec7\uff08API\u8c03\u7528\uff09 \u8d44\u4ea7\u6388\u6743\u6811\u663e\u793a\u7b56\u7565\uff08\u5c06\u5355\u72ec\u6388\u6743\u7684\u8d44\u4ea7\u6dfb\u52a0\u5230\u81ea\u5b9a\u4e49\u7684\u9ed8\u8ba4\u8282\u70b9\u4e0b\uff09 \u8d44\u4ea7\u521b\u5efa\u652f\u6301\u6dfb\u52a0\u591a\u4e2a\u534f\u8bae \u8d44\u4ea7\u521b\u5efa\u8bbe\u7f6e\u8282\u70b9\u7b56\u7565\uff08API/CSV, \u89e3\u51b3\u603b\u662f\u4f1a\u6dfb\u52a0\u5230\u9ed8\u8ba4\u8282\u70b9\u7684\u95ee\u9898\uff09 \u90ae\u4ef6\u8bbe\u7f6e\u6dfb\u52a0\u53d1\u9001\u8d26\u53f7\u9009\u9879\uff08\u89e3\u51b3SMTP\u8d26\u53f7\u548c\u53d1\u9001\u8d26\u53f7\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff09 \u5b89\u5168\u8bbe\u7f6e\u6dfb\u52a0\u6279\u91cf\u547d\u4ee4\u9009\u9879\uff08\u89e3\u51b3\u7981\u6b62\u666e\u901a\u7528\u6237\u6279\u91cf\u6267\u884c\u547d\u4ee4\u7684\u95ee\u9898\uff09 \u7ec8\u7aef(coco/guacamole)\u4e0a\u62a5Session/FTP\u7528\u6237\u4fe1\u606f\u4f7f\u7528 name\uff08username\uff09\u683c\u5f0f Windows\u8d44\u4ea7\u53ef\u901a\u8fc7SSH\u534f\u8bae\u8fde\u63a5 Windows\u8d44\u4ea7\u652f\u6301\u76f4\u63a5\u590d\u5236\u7c98\u8d34\u6587\u672c\uff08\u6d4f\u89c8\u5668\u6388\u6743\u526a\u5207\u677f\u6743\u9650\uff09 \u6dfb\u52a0\u4e00\u952e\u7981\u7528LDAP\u8ba4\u8bc1\u811a\u672c \u89e3\u51b3\u8fde\u63a5windows\u8d44\u4ea7\u51fa\u73b0\u5e7d\u7075\u4f1a\u8bdd\u7684\u95ee\u9898 \u4f18\u5316\u521b\u5efa\u6388\u6743\u89c4\u5219\u65f6\uff0c\u6388\u6743\u52a8\u4f5c\u7684\u5c55\u793a \u89e3\u51b3\u64cd\u4f5c\u65e5\u5fd7\u4e2d\u51fa\u73b0coco/guamole\u66f4\u65b0Default\u8282\u70b9\u7684\u95ee\u9898 \u4f18\u5316\u547d\u4ee4\u8bb0\u5f55\u5217\u8868/\u5728\u7ebf/\u5386\u53f2\u4f1a\u8bdd\u5217\u8868\uff08\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\uff0c\u53d6\u6d88\u8fd4\u56de\u6240\u6709\u8d44\u4ea7\uff09 \u4fee\u590dBug \u4fee\u590d\u6587\u4ef6\u5bfc\u51fa\u4f7f\u7528excel\u6253\u5f00\u4e71\u7801\u7684\u95ee\u9898 \u89e3\u51b3\u7528\u6237\u6388\u6743\u8d44\u4ea7/\u8282\u70b9\u4e3a\u7a7a\u65f6\uff0c\u524d\u7aef\u6784\u5efa\u8d44\u4ea7\u6388\u6743\u6811\u7684Bug 1.5.0 \u00b6 2019\u5e745\u670829\u65e5 \u65b0\u589e\u529f\u80fd \u652f\u6301\u542f\u7528MFA\u7684\u7ba1\u7406\u5458\u67e5\u770b\u8d44\u4ea7\u7528\u6237\u5bc6\u7801 \u53ef\u81ea\u5b9a\u4e49\u521b\u5efa\u7528\u6237\u65f6\u53d1\u9001\u521b\u5efa\u7528\u6237\u6210\u529f\u7684\u90ae\u4ef6\u5185\u5bb9 \u521b\u5efa\u7528\u6237\u65f6\uff0c\u53ef\u9009\u62e9\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u7b56\u7565(\u53ef\u89e3\u51b3\u5ba2\u6237\u6ca1\u6709\u90ae\u4ef6\u7cfb\u7edf\u7684\u573a\u666f) (\u7528\u6237/\u7528\u6237\u7ec4/\u8d44\u4ea7/\u7ba1\u7406\u7528\u6237/\u7cfb\u7edf\u7528\u6237)\u8d44\u6e90\u652f\u6301\u4f7f\u7528csv\u6587\u4ef6\u7c7b\u578b\u8fdb\u884c\u5bfc\u5165\u3001\u5bfc\u51fa\u3001\u66f4\u65b0\u64cd\u4f5c LDAP\u652f\u6301SSL (pem\u8def\u5f84 jumpserver/data/certs/ldap_ca.pem) \u652f\u6301Option\u65b9\u6cd5\u8bf7\u6c42API\u83b7\u53d6\u5bf9\u5e94\u5176\u4ed6HTTP\u65b9\u6cd5\u7684\u6240\u9700\u7684\u5b57\u6bb5\u8bf4\u660e \u652f\u6301RemoteApp \u4f18\u5316\u529f\u80fd \u521b\u5efa\u8d44\u4ea7\u65f6\u5141\u8bb8ip\u5b57\u6bb5\u586b\u5199\u4e3ahost\u5730\u5740 OpenID Middleware\u53bb\u6389\u8f93\u51fa\u65e5\u5fd7 \u8d44\u4ea7\u8282\u70b9API\u6dfb\u52a0search\u529f\u80fd \u89e3\u51b3ldap\u6620\u5c04is_active\u7b49\u5b57\u6bb5\u4e3abool\u503c\u7684\u95ee\u9898(\u53ef\u89e3\u51b3LDAP\u7981\u7528\u7528\u6237\u540e\uff0c\u540c\u65f6\u7981\u6b62\u7528\u6237\u767b\u5f55JumpServer\u7684\u573a\u666f) \u4fee\u590dBug \u4fee\u590dLDAP\u4e0d\u80fd\u5bfc\u5165\u7528\u6237\u540d\u4e2d\u5305\u542b\u7a7a\u683c\u7684\u7528\u6237 \u4fee\u590dLDAP\u53ef\u5bfc\u5165\u8de8\u9875\u9762\u9009\u53d6\u7684\u6240\u6709\u7528\u6237 \u4fee\u590d\u8d44\u4ea7\u7528\u6237\u7ba1\u7406\u5668\u83b7\u53d6\u7528\u6237\u540d\u4e3a\"\"\u7684\u5bf9\u8c61\u65f6\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u7684bug 1.4.10 \u00b6 2019\u5e744\u670830\u65e5 \u65b0\u589e\u529f\u80fd \u65b0\u589e\u6743\u9650\u63a7\u5236\uff1a\u53ef\u5206\u522b\u5bf9\u8fde\u63a5\u3001\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u52a8\u4f5c\u5355\u72ec\u6388\u6743\uff1b \u4f18\u5316\u529f\u80fd \u6743\u9650\u4f18\u5316\uff1a\u7ec4\u7ec7\u7ba1\u7406\u5458\u4e0d\u5141\u8bb8\u5bf9\u8d85\u7ea7\u7ba1\u7406\u5458\u8fdb\u884c\u64cd\u4f5c\uff1b Luna\u4f18\u5316\uff1aLuna\u641c\u7d22\u4f18\u5316\u529f\u80fd\uff1b \u4fee\u590dBug \u4fee\u590d\u901a\u8fc7API\u6279\u91cf\u66f4\u65b0\u7528\u6237\u7684bug \u4fee\u590dluna\u9875\u9762\u5237\u65b0\u4e0d\u8df3\u8f6cOpeID\u8ba4\u8bc1\u7684bug \u4fee\u590d\u521b\u5efaazure\u7c7b\u578b\u7684\u5f55\u50cf\u5b58\u50a8\u65f6\u524d\u7aef\u7684bug \u4fee\u590d\u5176\u4ed6\u524d\u7aef\u9875\u9762bug \u4fee\u590d\u5f55\u50cf\u4e0a\u4f20\u5230Azure\u7684bug 1.4.9 \u00b6 2019\u5e743\u670826\u65e5 \u4fee\u590dBug \u4fee\u590d\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u65f6\u7684\u65f6\u533a\u95ee\u9898 \u4fee\u590dcelery\u65e5\u5fd7\u53ef\u80fd\u64cd\u4f5c\u5173\u95ed\u6587\u4ef6\u7684bug \u4fee\u590d\u4e00\u4e9b\u8bbe\u7f6e\u7f13\u5b58\u7684\u95ee\u9898 \u4fee\u590d\u7528\u6237token\u8fc7\u671f\u7684\u65f6\u95f4\u7b56\u7565 \u4fee\u590d\u7b2c\u4e00\u6b21\u767b\u5f55\u8df3\u8f6c\u7ec4\u7ec7\u9875\u9762\u7684bug \u4f18\u5316\u529f\u80fd sudo\u547d\u4ee4\u6dfb\u52a0\u5e2e\u52a9\u8bf4\u660e\uff0c\u5e76\u517c\u5bb9\u6362\u884c\u5f62\u5f0f \u8ba4\u8bc1\u903b\u8f91\uff0c\u4eceusers\u6a21\u5757\u4e2d\u79fb\u52a8\u5230authentication \u5408\u5e76\u4e00\u4e9bmigrations \u4efb\u52a1\u5217\u8868\u53bb\u6389\u65e5\u671f docker build\u5347\u7ea7Mysql client\u7248\u672c coco,guacamole\u4e0a\u4f20\u5b8c\u5f55\u50cf\u4e0a\u62a5api, \u9875\u9762\u4e0a\u5982\u679c\u6ca1\u6709\u5f55\u50cf\u5219\u64ad\u653e\u6309\u94ae\u662f\u7981\u7528\u7684 \u5b9a\u65f6\u6e05\u7406\u767b\u9646\u65e5\u5fd7 \u7528\u6237\u6388\u6743\u589e\u52a0\u4e24\u5c42\u7f13\u5b58\uff0c\u6388\u6743\u8d44\u4ea7\u6570\u91cf\u5f88\u5927\u65f6\u4e5f\u4e0d\u6015\u4e86 \u8d44\u4ea7\u6a21\u5757\u6dfb\u52a0\u8d44\u4ea7\u7528\u6237\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u4e3a\u8d44\u4ea7\u5355\u72ec\u8bbe\u7f6e \u7ba1\u7406\u7528\u6237\u3001\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801 \u767b\u9646\u65e5\u5fd7\u7684\u5bfc\u51fa \u6570\u636e\u5e93\u652f\u6301ssl ldap\u7528\u6237\u4e00\u952e\u5bfc\u5165 \u4f7f\u7528\u7f51\u5173\u540c\u6837\u6dfb\u52a0\u5fc3\u8df3\u4fe1\u606f \u7528\u6237\u6388\u6743\u8d44\u4ea7\u5217\u8868\u589e\u52a0\u7f13\u5b58 \u4fee\u590d\u4e00\u4e9bsftp\u7684\u5c0fbug \u4fee\u590d\u4e0a\u4f20\u547d\u4ee4\u8bb0\u5f55decode\u7684\u9519\u8bef \u652f\u6301\u7cfb\u7edf\u7528\u6237\u5728\u4e0d\u540c\u673a\u5668\u4e0a\u5bc6\u7801\u4e0d\u4e00\u81f4\u7684\u573a\u666f \u652f\u6301\u5de6\u4fa7\u5217\u8868\u7f13\u5b58 1.4.8 \u00b6 2019\u5e742\u670822\u65e5 \u4fee\u590dcommand filter \u4e0d\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\u7684\u95ee\u9898 LDAP\u652f\u6301\u65e0\u5bc6\u7801 \u5f55\u50cf\u4e0a\u4f20\u8bbe\u7f6e\u4e2d\u53bb\u6389\u4e86ceph, s3\u517c\u5bb9cepht gunicorn\u65e5\u5fd7\u5207\u5272 telnet\u652f\u6301\u5728\u8bbe\u7f6e\u4e2d\u4fee\u6539\u6210\u529f\u7684\u6b63\u5219\u8868\u8fbe\u5f0f \u4fee\u590dsession 10\u5206\u949f\u540e\u4e0d\u5728\u7ebf\u7684\u95ee\u9898 1.4.7 \u00b6 2019\u5e741\u670829\u65e5 \u652f\u6301 radius\u8ba4\u8bc1 \u7edf\u4e00\u751f\u6210coco\u7684host key, \u8fd9\u6837\u90e8\u7f72\u591a\u4e2acoco\u4e5f\u4e0d\u9700\u8981\u518d\u590d\u5236 Host key \u6743\u9650\u5217\u8868\u589e\u52a0\u8be6\u7ec6\u8fc7\u6ee4 \u66f4\u6539\u914d\u7f6e\u6587\u4ef6\u7c7b\u578b\u4e3a yml\u683c\u5f0f \u4fee\u6539\u5fc3\u8df3\u65b9\u5f0f \u4f18\u5316\u4efb\u52a1\u6267\u884c\u7684\u65e5\u5fd7\u8bb0\u5f55\u65b9\u5f0f \u4fee\u590d\u8282\u70b9\u53f3\u51fb\u6d4b\u8bd5\u8fde\u63a5\u8d44\u4ea7\u4e3a\u8282\u70b9\u4e0b\u6240\u6709\u8d44\u4ea7, \u800c\u4e0d\u662f\u76f4\u63a5\u8d44\u4ea7 sftp\u652f\u6301\u4fee\u6539home\u76ee\u5f55, \u652f\u6301\u4e0d\u663e\u793a\u9690\u85cf\u6587\u4ef6 \u4fee\u590dluna\u9690\u85cf\u4fa7\u8fb9\u680f\u7684bug luna\u652f\u6301\u76f4\u63a5\u767b\u5f55\u5230\u67d0\u4e2a\u8d44\u4ea7 1.4.6 \u00b6 2018\u5e7412\u670819\u65e5 \u63a8\u9001\u8d44\u4ea7\u4e0a\u5df2\u5b58\u5728\u7684\u7cfb\u7edf\u7528\u6237\u4f1a\u8986\u76d6\u8be5\u7528\u6237\u7684home\u76ee\u5f55\u6743\u9650 \u4f1a\u8bdd\u65e5\u5fd7\u53ef\u4ee5\u5b9a\u65f6\u6e05\u7406, \u4fdd\u8bc1\u786c\u76d8\u591f\u7528 coco\u91cc p\u53ef\u4ee5\u81ea\u5b9a\u4e49\u662f\u5426\u5206\u9875\u4e86 \u4f18\u5316\u6811\u5f62\u7ed3\u6784, \u4e0d\u6015\u8d44\u4ea7\u592a\u591a\u4e86 \u5176\u4ed6bug 1.4.5 \u00b6 2018\u5e7412\u670812\u65e5 \u7edf\u4e00\u7ef4\u62a4migrations\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d8\u66f4 \u7cfb\u7edf\u914d\u7f6e\u5185\u5bb9\u652f\u6301\u70ed\u52a0\u8f7d, \u4e0d\u7528\u518d\u91cd\u542f jumpserver coco, guacamole\u6ce8\u518c\u673a\u5236\u66f4\u6539, \u4f7f\u7528\u9884\u5171\u4eab\u79d8\u94a5\u81ea\u52a8\u6ce8\u518c, \u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6ce8\u518c \u7528\u6237\u5bc6\u7801\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e ldap\u4e0d\u53ef\u4ee5\u4fee\u6539\u5bc6\u7801 \u9ed8\u8ba4\u7ec4\u7ec7\u91cc\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7528\u6237 \u65e5\u5fd7\u5ba1\u8ba1\u4fee\u6539\u5bc6\u7801\u65e5\u5fd7\u4e2d\u53ea\u80fd\u770b\u5230\u5f53\u524d\u7ec4\u7ec7\u7528\u6237\u7684\u66f4\u6539 luna\u5217\u8868\u56de\u6eda\u4e3a\u539f\u6765\u65b9\u5f0f, \u4e0d\u518d\u662f\u5f02\u6b65\u52a0\u8f7d rdp\u652f\u6301\u5206\u8fa8\u7387\u66f4\u6539 1.4.4 \u00b6 2018\u5e7411\u670811\u65e5 \u5f55\u50cf\u5b58\u50a8\u8bbe\u7f6e, \u4f7f\u7528\u8868\u5355\u6765\u586b\u5199 \u652f\u6301luna\u5f02\u6b65\u52a0\u8f7d \u5404\u5217\u8868\u7edf\u4e00\u4f7f\u7528\u5206\u9875 \u6388\u6743\u65f6\u95f4\u7cbe\u786e\u5230\u5206\u949f \u652f\u6301openid\u8ba4\u8bc1 1.4.3 \u00b6 2018\u5e7410\u670812\u65e5 \u652f\u6301\u547d\u4ee4\u8fc7\u6ee4 1.4.2 \u00b6 2018\u5e7410\u67088\u65e5 \u652f\u6301web sftp, \u652f\u6301\u8de8\u8d44\u4ea7\u590d\u5236\u7c98\u8d34\u6587\u4ef6 \u4f18\u5316\u4e00\u4e9b\u5185\u5bb9 1.4.1 \u00b6 2018\u5e749\u67084\u65e5 \u7cfb\u7edf\u8bbe\u7f6e\u652f\u6301\u52a0\u5bc6\u5b58\u50a8 \u5355\u72ec\u63a8\u9001\u7cfb\u7edf\u7528\u6237\u5230\u67d0\u4e2a\u8d44\u4ea7 \u652f\u6301\u4e86\u7528\u6237\u6539\u5bc6\u65e5\u5fd7\u548c\u64cd\u4f5c\u65e5\u5fd7 \u7ffb\u8bd1\u66f4\u52a0\u5b8c\u5584, \u652f\u6301\u5207\u6362\u8bed\u8a00 \u4e0d\u8bb0\u5f55zmodem\u4fe1\u606f \u652f\u6301\u7a7a\u95f2\u95f4\u9694\u81ea\u52a8\u65ad\u5f00 \u4fee\u590dsession\u65e0\u6cd5\u4e2d\u65ad\u95ee\u9898 \u589e\u52a0ssh\u7528\u6237\u9ed1\u540d\u5355\u548c\u767d\u540d\u5355 luna\u652f\u6301\u641c\u7d22\u652f\u6301IP \u4f18\u5316\u4e00\u4e9b\u5185\u5bb9 1.4.0 \u00b6 2018\u5e748\u67087\u65e5 \u8d85\u7ea7\u7ba1\u7406\u5458\u521b\u5efa\u7ec4\u7ec7, \u4e3a\u6539\u7ec4\u7ec7\u6dfb\u52a0\u7ba1\u7406\u5458, \u7ba1\u7406\u5458\u53ef\u4ee5\u8d1f\u8d23\u8be5\u7ec4\u7ec7\u4e0b \u7528\u6237\u3001\u8d44\u4ea7\u3001\u6388\u6743\u7b49\u7ba1\u7406 Sftp\u663e\u793a\u540c\u540d\u8d44\u4ea7\u4e3a \u4e3b\u673a\u540d.\u7ec4\u7ec7 Luna\u652f\u6301\u6839\u636eIP\u641c\u7d22 \u9f20\u6807\u60ac\u505c\u53ef\u4ee5\u663e\u793a\u4e3b\u673aip \u5176\u4ed6\u4fee\u590dBug\u7b49 1.3.3 \u00b6 2018\u5e747\u670817\u65e5 \u652f\u6301telnet\u534f\u8bae \u652f\u6301\u7528\u6237\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u767b\u9646, \u5bc6\u7801\u4e0d\u7528\u6258\u7ba1\u5230JumpServer \u767b\u9646\u65e5\u5fd7\u589e\u52a0\u5931\u8d25\u539f\u56e0 session\u589e\u52a0\u767b\u9646\u6e90 \u4fee\u590d\u7f51\u5173\u7aef\u53e3\u548c\u5bc6\u7801bug \u6dfb\u52a0\u7528\u6237\u767b\u9646\u5931\u8d25\u6b21\u6570\u9650\u5236 1.3.2 \u00b6 2018\u5e746\u670811\u65e5 \u53ef\u4ee5\u5728\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u6307\u5b9a\u5bc6\u7801\u5f3a\u5ea6, \u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u7279\u6b8a\u5b57\u7b26\u957f\u5ea6\u7b49 \u53ef\u4ee5\u5168\u5c40\u5f00\u542fMFA \u4fee\u6539EMAIL\u4e0d\u9700\u8981\u91cd\u542f \u8bbe\u7f6e\u516c\u94a5\u4ea4\u4e92\u6539\u53d8 \u4fee\u6539\u4e00\u4e9bBUG \u4fee\u6539\u7a97\u53e3\u5927\u5c0f\u7b56\u7565 \u7edf\u4e00requirements\u7248\u672c \u4fee\u6539luna\u6811\u5f62\u7ed3\u6784, \u4ece\u6839\u5f00\u59cb\u5c55\u793a \u4fee\u6539luna\u6811\u5f62\u641c\u7d22 \u4fee\u6539\u521d\u59cb\u7a97\u53e3\u5927\u5c0f\u4e0d\u5bf9\u7684bug \u4fee\u6539\u5f55\u50cf\u64ad\u653e\u7684\u90e8\u5206bug 1.3.1 \u00b6 2018\u5e745\u670824\u65e5 \u7528\u6237\u6388\u6743\u8282\u70b9\u903b\u8f91\u66f4\u6539 \u53bb\u6389window\u65e0\u7528\u4fe1\u606f \u4fee\u590d\u8282\u70b9\u521b\u5efabug \u521b\u5efa\u8282\u70b9 \u4ece0\u5f00\u59cb, \u65b0\u8282\u70b90 \u65b0\u8282\u70b91 \u4fee\u590d\u62d6\u52a8\u8282\u70b9\u5f15\u8d77\u7684\u7236\u8282\u70b9\u5f02\u5e38 \u8d44\u4ea7\u6811\u589e\u52a0\u89c6\u56fe, \u53ea\u663e\u793a\u672c\u8282\u70b9\u8d44\u4ea7\u548c\u663e\u793a\u5b50\u8282\u70b9\u8d44\u4ea7 1.3.0 \u00b6 2018\u5e745\u67082\u65e5 \u652f\u6301\u4e8c\u6b21\u8ba4\u8bc1(Google Authenticator) \u4fee\u590d\u4e00\u4e9bbug \u4f18\u5316\u7b2c\u4e00\u6b21\u767b\u5f55\u9875\u9762 1.2.0 \u00b6 2018\u5e744\u670813\u65e5 sftp\u4e0a\u4f20\u6587\u4ef6\u652f\u6301 \u652f\u6301sftp\u65e5\u5fd7\u5ba1\u8ba1 1.1.1 \u00b6 2018\u5e744\u67086\u65e5 \u52a0\u5f3a\u4efb\u52a1\u6267\u884c \u652f\u6301\u67e5\u770b\u5404\u4e2a\u4efb\u52a1\u7684\u8be6\u7ec6\u6267\u884c\u65e5\u5fd7 \u652f\u6301\u5b9e\u65f6\u67e5\u770b\u4efb\u52a1\u6267\u884c\u8f93\u51fa 1.1.0 \u00b6 2018\u5e744\u67083\u65e5 \u652f\u6301\u6df7\u5408\u4e91\u591a\u7f51\u7edc\u73af\u5883 \u7f51\u57df\u6982\u5ff5\u52a0\u5165 \u7f51\u5173\u6982\u5ff5\u52a0\u5165 rdp gateway\u6982\u5ff5\u52a0\u5165 \u4fee\u590d\u4e00\u4e9bbug 1.0.0 \u00b6 2018\u5e743\u670815\u65e5 Windows\u652f\u6301 \u5bb9\u5668\u5316\u90e8\u7f72 \u8d44\u4ea7\u6811 \u5f55\u50cf/\u547d\u4ee4\u5b58\u50a8\u652f\u6301OSS/S3\u548cES \u5206\u5e03\u5f0f\u90e8\u7f72 \u7cfb\u7edf\u7528\u6237\u81ea\u52a8\u63a8\u9001 \u6807\u7b7e\u7ba1\u7406 \u547d\u4ee4\u7edf\u8ba1\u589e\u52a0\u8f93\u51fa\u5c55\u793a Web Terminal\u6539\u8fdb \u7cfb\u7edf\u8bbe\u7f6e LDAP\u652f\u6301 0.5.0beta \u00b6 2017\u5e745\u670821\u65e5 coco\u548cluna\u529f\u80fd\u62c6\u5206 \u7cfb\u7edf\u8bbe\u7f6e\u652f\u6301 \u5f55\u50cf\u652f\u6301 \u4f5c\u4e1a\u4e2d\u5fc3\u4f18\u5316 \u5176\u5b83\u4fee\u590dBug 0.4.0beta \u00b6 2017\u5e745\u670821\u65e5 \u4f7f\u7528\u6700\u65b0\u7248Python\u548cDjango\u5f00\u53d1 Python3.6.1, Django 1.11 \u4f7f\u7528\u5b8c\u5168\u4f7f\u7528 Django Class Base View\u5f00\u53d1 \u4ee3\u7801\u7ed3\u6784\u66f4\u52a0\u5408\u7406\u89c4\u6574, \u5206\u7ec4\u4ef6\u5f00\u53d1 \u652f\u6301Restful API \u62c6\u5206 JumpServer, terminal, web termial\u4e3a\u4e09\u4e2a\u9879\u76ee JumpServer, coco, luna\u3002coco\u548cluna\u4e3a\u65e0\u72b6\u6001\u7684, \u652f\u6301\u6269\u5c55 \u652f\u6301\u56fd\u9645\u5316, \u82f1\u6587+\u4e2d\u6587 Ansible\u4f7f\u7528 2.1 \u7248\u672c \u5404\u7ec4\u4ef6\u529f\u80fd\u90fd\u6709\u6240\u52a0\u5f3a \u652f\u6301\u767b\u9646\u9a8c\u8bc1\u7801 \u547d\u4ee4\u8be6\u7ec6\u89e3\u6790\u5b58\u50a8\u5230\u6570\u636e\u5e93 \u767b\u5f55\u8bb0\u5f55\u5ba1\u8ba1 \u539f\u6765\u7684\u624b\u52a8\u63a8\u9001\u7528\u6237\u6539\u4e3a\u81ea\u52a8\u63a8\u9001 \u539f\u6765\u7684connect\u811a\u672c, \u6539\u4e3a\u5b9e\u73b0 ssh server, \u7edf\u4e00\u4e86\u8ba4\u8bc1 web terminal \u65e0\u4e0e\u4f26\u6bd4\u7684\u6f02\u4eae \u8d44\u4ea7\u7528\u6237\u6279\u91cf\u5bfc\u5165\u5bfc\u51fa, \u6279\u91cf\u4fee\u6539 \u754c\u9762\u66f4\u52a0\u4f18\u96c5\u6f02\u4eae 0.3.3 \u00b6 2016\u5e7412\u670814\u65e5 \u4fee\u6539\u4e00\u4e9b\u5c0fbug 0.3.2 \u00b6 2016\u5e744\u67085\u65e5 \u6a21\u7cca\u5339\u914d\u652f\u6301 \u641c\u7d22\u6392\u5e8f\u95ee\u9898 \u6279\u91cf\u547d\u4ee4\u4f18\u5316, ip\u83b7\u53d6 0.3.1 \u00b6 2016\u5e743\u670831\u65e5 \u4f18\u5316ssh\u8fde\u63a5\u901f\u5ea6 \u4f18\u5316web terminal\u7a97\u53e3\u5927\u5c0f \u4fee\u590d\u5f55\u50cf\u64ad\u653e\u767d\u5c4f \u4f18\u5316\u547d\u4ee4\u5339\u914d \u4f18\u5316\u5b89\u88c5\u811a\u672c \u4f18\u5316Kill\u4efb\u52a1 \u4fee\u590d\u76d1\u63a7\u5361\u4f4fbug 0.3.0 \u00b6 2015\u5e7412\u670820\u65e5 \u7cbe\u786e\u8bb0\u5f55\u6267\u884c\u547d\u4ee4 \u65b0\u589e\u6587\u4ef6\u4e0a\u4f20\u4e0b\u8f7d \u66f4\u6539\u4e3a\u8f93\u5165ID\u767b\u9646\u4e3b\u673a \u589e\u52a0\u4e3b\u673a\u641c\u7d22 \u6267\u884c\u547d\u4ee4\u4f7f\u7528ansible\u6267\u884c \u4f18\u5316\u811a\u672c \u589e\u52a0web terminal \u589e\u52a0web\u7aef\u6279\u91cf\u547d\u4ee4\u6267\u884c \u589e\u52a0\u5f55\u50cf\u56de\u653e \u8d44\u4ea7\u589e\u52a0\u786c\u4ef6\u4fe1\u606f\u6293\u53d6 \u8d44\u4ea7\u589e\u52a0Excel\u5bfc\u51fa\u548c\u5bfc\u5165 \u8d44\u4ea7\u589e\u52a0\u6279\u91cf\u66f4\u6539 \u5728\u4e3b\u673a\u4e0a\u6388\u6743\u7cfb\u7edf\u7528\u6237(\u7cfb\u7edf\u7528\u6237\u4e3a\u4e00\u4e9b\u901a\u7528\u7528\u6237, \u5982dev, dba\u7b49) \u6388\u6743\u6539\u4e3a\u4ee5\u6388\u6743\u89c4\u5219\u4e3a\u4e2d\u5fc3 \u6dfb\u52a0\u7cfb\u7edf\u7528\u6237\u63a8\u9001 \u66f4\u6539sudo\u7ba1\u7406 \u589e\u52a0\u6267\u884c\u547d\u4ee4\u65e5\u5fd7\u5ba1\u8ba1 \u589e\u52a0\u6587\u4ef6\u4e0a\u4f20\u547d\u4ee4\u5ba1\u8ba1 \u589e\u52a0web\u7aef\u5386\u53f2\u547d\u4ee4\u641c\u7d22 0.2.0 \u00b6 2015\u5e7404\u670819\u65e5 \u4f7f\u7528paramiko\u539f\u751fssh\u534f\u8bae\u767b\u5f55\u540e\u7aef\u4e3b\u673a(\u539f\u6765\u7248\u672c\u4f7f\u7528pexpect\u6a21\u62df\u767b\u5f55) \u65b0\u589e\u4f7f\u7528\u522b\u540d\u6216\u5907\u6ce8\u767b\u5f55 \u65b0\u589e\u4e3b\u673a\u5206\u7ec4\u67e5\u770b, \u4f7f\u7528\u66f4\u65b9\u4fbf \u591a\u7ebf\u7a0b\u6279\u91cf\u6267\u884c\u547d\u4ee4 \u4f18\u5316\u767b\u5f55\u811a\u672c Web\u754c\u9762\u66f4\u52a0\u7f8e\u89c2\u6f02\u4eae \u589e\u52a0\u90e8\u95e8\u7ba1\u7406\u5458\u8d1f\u8d23\u7ba1\u7406\u672c\u90e8\u95e8\u6210\u5458 \u589e\u52a0\u4eea\u8868\u76d8\u7edf\u8ba1\u4fe1\u606f \u589e\u52a0\u90e8\u95e8, \u7528\u6237\u7ec4, \u4e3b\u673a\u7ec4 \u7528\u6237\u4fe1\u606f, \u4e3b\u673a\u4fe1\u606f\u66f4\u52a0\u8be6\u7ec6 \u4e3b\u673a\u767b\u5f55\u65b9\u5f0f\u589e\u52a0\u767b\u5f55\u65b9\u5f0f map, \u7528\u4e8e\u767b\u5f55\u4e0d\u652f\u6301ldap\u7684\u4e3b\u673a \u4e3b\u673a\u6388\u6743, sudo\u6388\u6743\u6539\u4e3a\u7ec4\u7ec4\u4e4b\u95f4\u6388\u6743 \u589e\u52a0\u4e3b\u673a\u6279\u91cf\u4fee\u6539, \u6279\u91cf\u6dfb\u52a0 \u6dfb\u52a0\u7528\u6237\u81ea\u52a8\u751f\u6210\u968f\u673a\u5bc6\u7801, \u7136\u540e\u81ea\u52a8\u53d1\u9001\u90ae\u4ef6 \u6dfb\u52a0\u5404\u79cd\u641c\u7d22 \u589e\u52a0\u666e\u901a\u7528\u6237web\u9875\u9762\u7684\u6388\u6743\u7533\u8bf7 \u5ba1\u8ba1\u754c\u9762\u66f4\u52a0\u53cb\u597d \u4e3b\u673a\u6dfb\u52a0\u8fc7\u6ee4\u641c\u7d22\u529f\u80fd \u589e\u52a0\u7528\u6237\u5934\u50cf \u4e0a\u4f20\u6279\u91cf\u4e0a\u4f20 \u589e\u52a0\u90e8\u95e8\u7ba1\u7406\u5458\u9875\u9762 \u666e\u901a\u7528\u6237\u9875\u9762\u5185\u5bb9\u66f4\u52a0\u4e30\u5bcc 0.1.1 \u00b6 2014\u5e7411\u670814\u65e5 \u53bb\u6389shell\u811a\u672c, \u6765\u6dfb\u52a0\u7528\u6237 \u767b\u5f55\u66f4\u7a33\u5b9a \u65b0\u589eWeb\u63a7\u5236sudo \u65b0\u589eWeb\u67e5\u770b\u7edf\u8ba1\u65e5\u5fd7 \u65b0\u589eWeb\u5b9e\u65f6\u67e5\u770bsession\u5c4f\u5e55 \u65b0\u589eWeb\u53ef\u4ee5\u7ed3\u675f\u7528\u6237session \u65b0\u589e\u533a\u5206\u7ec4\u7ba1\u7406\u5458\u548c\u8d85\u7ea7\u7ba1\u7406\u5458 \u65b0\u589eweb\u4e0a\u4f20\u548c\u4e0b\u8f7d\u6587\u4ef6 \u65b0\u589e\u6279\u91cf\u6267\u884c\u547d\u4ee4\u8bb0\u5f55\u65e5\u5fd7 \u65b0\u589e\u4e0a\u4f20\u4e0b\u8f7d\u8bb0\u5f55\u65e5\u5fd7 \u65b0\u589e\u7528\u6237\u53ef\u4ee5web\u4fee\u6539\u5bc6\u7801 \u65b0\u589eadmin\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u4fe1\u606f \u65b0\u589eIDC \u652f\u6301\u5206\u9875 admin\u53ef\u4ee5\u4e0b\u8f7d\u7528\u6237key 0.1.0 \u00b6 2014\u5e748\u670815\u65e5 \u53d1\u5e03\u7b2c\u4e00\u4e2a\u7248\u672c bootstrap\u57fa\u672c\u9875\u9762 \u7528\u6237\u7ba1\u7406 \u8d44\u4ea7\u7ba1\u7406 \u6388\u6743\u8d44\u4ea7\u7ed9\u7528\u6237 pexpect\u767b\u5f55\u8d44\u4ea7, \u8bb0\u5f55\u65e5\u5fd7 \u670d\u52a1\u5668\u914d\u7f6eldap, \u96c6\u4e2d\u8ba4\u8bc1 \u6279\u91cf\u6267\u884c\u547d\u4ee4","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"about/change_log/#_1","text":"","title":"\u66f4\u65b0\u65e5\u5fd7"},{"location":"about/change_log/#159","text":"2020\u5e7405\u670821\u65e5 \u65b0\u7248 OpenID Connect \u8ba4\u8bc1\u914d\u7f6e\u6587\u6863 \u4e0b\u8f7d\u79bb\u7ebf\u64ad\u653e\u5668 \u7533\u8bf7\u8bd5\u7528JumpServer \u4f01\u4e1a\u7248 \u65b0\u589e\u529f\u80fd \u652f\u6301\u6807\u51c6 OpenID Connect \u4f18\u5316\u529f\u80fd \u4f18\u5316\u4eea\u8868\u76d8\u52a0\u8f7d\u901f\u5ea6 \u4f18\u5316\u8d44\u4ea7\u67e5\u8be2\u901f\u5ea6 \u66f4\u65b0\u4e91\u7ba1\u4e2d\u5fc3\u4e2d\u5404\u4e91\u670d\u52a1\u63d0\u4f9b\u5546\u652f\u6301\u7684\u5730\u57df\u5217\u8868\uff08\u6bd4\u5982\uff1a\u963f\u91cc\u4e91-\u897f\u53571\uff09\u3010XPack\u3011 \u4f18\u5316\u8fde\u63a5\u65e5\u5fd7\u4fe1\u606f \u8c03\u6574TreeAPI\u8bf7\u6c42\u5730\u5740 \u6dfb\u52a0\u652f\u6301\u76f4\u63a5\u8fde\u63a5\u6570\u636e\u5e93\u5e94\u7528 \u4fee\u590dBug \u4fee\u590dMFA\u4e8c\u6b21\u8ba4\u8bc1\u7684\u5f02\u5e38\u95ee\u9898 \u4fee\u590dAPI Key\u4e0d\u80fd\u5220\u9664\u7684\u95ee\u9898 \u4fee\u590d\u591a\u7ec4\u7ec7\u4e0b\u4eea\u8868\u76d8\u6570\u636e\u663e\u793a\u4e0d\u51c6\u786e\u95ee\u9898 \u4fee\u590dFTP\u65e5\u5fd7\u6ca1\u6709\u6309\u7167\u7ec4\u7ec7\u8fdb\u884c\u5b58\u653e\u7684\u95ee\u9898 \u4fee\u590d\u7528\u6237\u6388\u6743\u8d44\u4ea7\u6811\u53ca\u5217\u8868\u6570\u636e\u663e\u793a\u4e0d\u7a33\u5b9a\u95ee\u9898 \u4fee\u590d\u7528\u6237\u9875\u9762\u66f4\u65b0MFA\u65f6\u89e3\u9664\u7ba1\u7406\u5458\u5f3a\u5236\u542f\u7528\u7684\u95ee\u9898 \u4fee\u590d\u4efb\u52a1\u5217\u8868\u6267\u884c\u5386\u53f2\u4e2d\u7edf\u8ba1\u6570\u636e\u663e\u793a\u4e0d\u51c6\u786e\u7684\u95ee\u9898 \u4fee\u590d\u8d44\u4ea7\u6388\u6743\u7528\u6237/\u7528\u6237\u7ec4\u9875\u9762\u5220\u9664\u7528\u6237\u7ec4\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u53f3\u51fb\u8d44\u4ea7\u6811\u70b9\u51fb\u4ec5\u663e\u793a\u5f53\u524d\u8282\u70b9\u4e0b\u8d44\u4ea7\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u6a21\u5757\u7684\u4fe1\u53f7\u5904\u7406\u5668\u7531\u4e8e\u4e0d\u80fd\u6b63\u5e38\u76d1\u63a7\u800c\u5bfc\u81f4\u7684\u7cfb\u7edf\u7528\u6237\u4e0d\u80fd\u81ea\u52a8\u63a8\u9001\u5230\u8d44\u4ea7\u4ee5\u53ca\u6ca1\u6709\u5173\u8054\u8d44\u4ea7\u7684\u95ee\u9898 \u4fee\u590d\u8fde\u63a5\u8d44\u4ea7\u65e0\u53cd\u5e94\u95ee\u9898 \u5347\u7ea7\u4f9d\u8d56 jumpserver-django-oidc-rp==0.3.7.4","title":"1.5.9"},{"location":"about/change_log/#158","text":"2020\u5e7404\u670816\u65e5 \u4e0b\u8f7d\u79bb\u7ebf\u64ad\u653e\u5668 \u7533\u8bf7\u8bd5\u7528 JumpServer \u4f01\u4e1a\u7248 \u65b0\u589e\u529f\u80fd \u5728\u7ebf\u4f1a\u8bdd\u76d1\u63a7\uff08\u5907\u6ce8\uff1a\u76ee\u524d\u4ec5\u652f\u6301\u534f\u8bae\u7c7b\u578b\u4e3assh\u3001telnet\u3001mysql\u7684\u5728\u7ebf\u4f1a\u8bdd\uff09 \u6279\u91cf\u6539\u5bc6\uff08\u652f\u6301\u4fee\u6539root\u3001administrator\u7b49\u7279\u6b8a\u7528\u6237\uff09\u3010XPack\u3011 \u521b\u5efa\u4e91\u7ba1\u4e2d\u5fc3\u540c\u6b65\u5b9e\u4f8b\u4efb\u52a1\u65f6\uff0c\u53ef\u9009\u62e9\u662f\u5426\u8986\u76d6\u540c\u6b65\u7684\u8d44\u4ea7\u4fe1\u606f\u3010XPack\u3011 \u65b0\u589e\u5728\u7ebf\u4f1a\u8bdd\u76d1\u63a7\u3010koko\u3011 \u4f18\u5316\u529f\u80fd \u521b\u5efa\u5f55\u50cf\u5b58\u50a8\u65f6\u81ea\u52a8\u6e05\u9664\u7a7a\u767d\u5b57\u7b26 \u4fee\u6539\u4e2d\u95f4\u4ef6\u4e2d\u83b7\u53d6\u5f53\u524d\u7ec4\u7ec7\u7684\u4f18\u5148\u7ea7 \u66f4\u65b0\u64ad\u653e\u5668\u4e0b\u8f7d\u5730\u5740\u94fe\u63a5 \u4f18\u5316\u521b\u5efaAuthBook\u903b\u8f91\uff08\u6dfb\u52a0\u4e92\u65a5\u9501\u673a\u5236\uff09 \u4fee\u6539\u7ec4\u7ec7\u83b7\u53d6\u4f18\u5148\u7ea7 \u7981\u7528ansible\u7684ssh\u8fde\u63a5\u590d\u7528 \u4fee\u6539\u9879\u76ee\u4f7f\u7528\u7684cache default(redis_cache -> redis_lock) \u66f4\u65b0\u7528\u6237\u65f6\u663e\u793aCAS\u7528\u6237\u6765\u6e90\u9009\u9879 \u4fee\u590dBug \u4fee\u590d\u5217\u8868\u4e2d\u65e5\u671f\u663e\u793a\u95ee\u9898 \u4fee\u590d\u8d44\u4ea7\u7528\u6237\u5217\u8868\u5220\u9664\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u5bfc\u51fa\u95ee\u9898\uff08\u5bfc\u51fa\u6ee1\u8db3\u641c\u7d22\u6761\u4ef6\u7684\u547d\u4ee4\u8bb0\u5f55\uff09 \u4fee\u590d\u56e0\u6570\u636e\u4e0d\u652f\u6301timezone\u5f15\u8d77\u7684\u4eea\u8868\u76d8\u6570\u636e\u4e3a\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u81ea\u5b9a\u4e49\u5e73\u53f0\u5217\u8868\u5728\u8be6\u60c5\u9875\u5220\u9664\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55/\u64cd\u4f5c/\u6539\u5bc6\u65e5\u5fd7\u641c\u7d22\u5b57\u6bb5\u6ca1\u6e05\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u7cfb\u7edf\u8bbe\u7f6e-\u7ec8\u7aef\u8bbe\u7f6e-\u8d44\u4ea7\u6392\u5e8f\u8bbe\u7f6e\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u70b9\u51fb\u6d4b\u8bd5\u90ae\u4ef6\u540e\uff0c\u914d\u7f6e\u4fe1\u606f\u83b7\u53d6\u4e0d\u7a33\u5b9a\u7684\u95ee\u9898 \u4fee\u590d\u4f7f\u7528\u5bb9\u5668\u65f6\uff0cAzure\u5f55\u50cf\u4e0a\u4f20\u95ee\u9898\uff08 \u955c\u50cf\u6dfb\u52a0ca-certificates\u4f9d\u8d56 \uff09\u3010koko\u3011 \u66f4\u65b0\u4f9d\u8d56 python-redis-lock==3.5.0 jms-storage-sdk==0.0.29","title":"1.5.8"},{"location":"about/change_log/#157","text":"2020\u5e743\u670819\u65e5 JumpServer \u5f55\u50cf\u79bb\u7ebf\u64ad\u653e\u5668 \u65b0\u589e\u529f\u80fd \u652f\u6301 CAS Server \uff08\u4e2d\u592e\u8ba4\u8bc1\u670d\u52a1\uff09\u7528\u6237\u767b\u5f55\u8ba4\u8bc1 \u63d0\u51fa\u52a8\u6001\u7cfb\u7edf\u7528\u6237\u7684\u6982\u5ff5\uff0c\u5f53\u7528\u6237\u767b\u5f55\u8d44\u4ea7\u65f6\u81ea\u52a8\u4f7f\u7528\u4e0e\u5176 JumpServer\u7528\u6237\u540d\u76f8\u540c\u7684\u7cfb\u7edf\u7528\u6237\u8fde\u63a5\u8d44\u4ea7 \u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u4e0a\u4f20\u8def\u5f84\uff0c\u5141\u8bb8\u7ba1\u7406\u5458\u4e3a\u4e0d\u540c\u7cfb\u7edf\u7528\u6237\u6307\u5b9a\u4e0d\u540c\u7684SFTP\u6302\u8f7d\u76ee\u5f55\uff0c\u76ee\u524d\u4ec5\u652f\u6301Linux\u8d44\u4ea7 \u652f\u6301\u4e0b\u8f7d\u4f1a\u8bdd\u5f55\u50cf\uff0c\u53ef\u914d\u5408JumpServer Video Player \u8fdb\u884c\u79bb\u7ebf\u64ad\u653e\uff0c\u5e76\u9644\u5e26\u5f55\u50cf\u7684\u64cd\u4f5c\u4fe1\u606f\uff0cJumpServer Video Player \u9002\u914d Mac \u3001Windows \u548c Linux \u4e91\u7ba1\u4e2d\u5fc3\u652f\u6301\u540c\u6b65\u534e\u4e3a\u4e91\u5b9e\u4f8b\uff1b\u5bf9\u4e91\u4e0a\u5df2\u91ca\u653e\u5b9e\u4f8b\u8fdb\u884c\u672c\u5730\u6807\u8bb0 \u3010XPack\u3011 \u6279\u91cf\u6539\u5bc6\u9488\u5bf9\u7279\u6b8a\u7528\u6237\uff08\u5982root\u3001administrator\u7b49\uff09\u5f00\u653e\u6539\u5bc6\u64cd\u4f5c\u3010XPack\u3011 \u652f\u6301\u52a8\u6001\u7684\u7cfb\u7edf\u7528\u6237\u540d \u589e\u52a0\u547d\u4ee4\u8bb0\u5f55\u98ce\u9669\u6807\u8bb0 \u589e\u52a0\u7528\u6237 SSH \u8fde\u63a5\u5fc3\u8df3\u8bbe\u7f6e\uff0c\u9ed8\u8ba430s \u9694\u79bb MySql \u8fde\u63a5\u7684\u8fdb\u7a0b\u7a7a\u95f4 \u4f18\u5316\u529f\u80fd \u4f18\u5316Dashboard\u9875\u9762\u52a0\u8f7d\u901f\u5ea6 \u4f18\u5316MFA\u767b\u5f55\u9875\u9762 \u4f18\u5316\u8d44\u4ea7\u6388\u6743\u89c4\u5219\uff0c\u5f53\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u8d44\u4ea7\u3001\u8282\u70b9\u3001\u7cfb\u7edf\u7528\u6237\u7b49\u53d8\u66f4\u65f6\uff0c\u5b9e\u65f6\u5237\u65b0\u4e0e\u5176\u4ed6\u5b9e\u4f53\u4e4b\u95f4\u7684\u5173\u8054\u5173\u7cfb \u4f18\u5316\u8d44\u4ea7\u7528\u6237\u5217\u8868\u5c55\u793a\u548cAPI\u6027\u80fd\u4f18\u5316 \u4f18\u5316LDAP/AD\u914d\u7f6e\u6a21\u5757\u7684\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u903b\u8f91\uff0c\u5e76\u6dfb\u52a0\u6d4b\u8bd5\u7528\u6237\u767b\u5f55\u7684\u529f\u80fd \u4f18\u5316\u53ef\u8fde\u63a5\u6027\u6d4b\u8bd5\u903b\u8f91 \u4f18\u5316\u90e8\u5206API\uff08\u5305\u62ec\u8d44\u4ea7\u3001\u7cfb\u7edf\u7528\u6237\u3001\u7ba1\u7406\u7528\u6237\u7b49\u76f8\u5173API\uff09\u5904\u7406\u903b\u8f91 \u4f18\u5316\u6539\u5bc6\u8ba1\u5212\u6267\u884c\u6d41\u7a0b\u3010XPack\u3011 \u589e\u5f3a SSH Client \u590d\u7528\u8fde\u63a5\uff0c\u514d\u53d7 SSH MaxSessions \u9650\u5236 \u589e\u5f3a Websocket \u8fde\u63a5\u5904\u7406\u80fd\u529b \u589e\u5f3a Web \u6587\u4ef6\u7ba1\u7406\u529f\u80fd\uff0c\u652f\u6301\u8f6f\u8fde\u63a5\u76ee\u5f55\uff0c\u589e\u52a0\u9519\u8bef\u4fe1\u606f\u63d0\u793a \u589e\u5f3a SFTP \u529f\u80fd\uff0c\u6839\u76ee\u5f55\u53ef\u4f9d\u636e\u7cfb\u7edf\u7528\u6237\u52a8\u6001\u914d\u7f6e \u589e\u5f3a Telnet Client \u8fde\u63a5 \u5f55\u50cf\u5b58\u50a8\u914d\u7f6e\u52a8\u6001\u66f4\u65b0 \u4fee\u590dBug \u4fee\u590d\u65e0\u6cd5\u5220\u9664\u7a7a\u8282\u70b9\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u3001\u6279\u91cf\u547d\u4ee4\u6ca1\u6709\u9488\u5bf9\u7ec4\u7ec7\u8fdb\u884c\u5206\u7ec4\u663e\u793a\u7684\u95ee\u9898 \u4fee\u590d\u5b58\u5728\u65e0\u6548 ES \u5b58\u50a8\u65f6\u8bbf\u95ee\u547d\u4ee4\u8bb0\u5f55\u9875\u9762\u5931\u6548\u7684\u95ee\u9898 \u4fee\u590d\u4f1a\u5bf9\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u7528\u6237\u53d1\u9001\u521b\u5efa\u7528\u6237\u6210\u529f\u90ae\u4ef6\u3001\u5bc6\u7801\u8fc7\u671f\u63d0\u9192\u90ae\u4ef6\u7684\u95ee\u9898 \u4fee\u590d\u90e8\u5206pip\u4f9d\u8d56\u5305\u7248\u672c\u4e0d\u517c\u5bb9\u7684\u95ee\u9898 \u4fee\u590d Telnet \u8d44\u4ea7\u7f51\u5173\u8fde\u63a5\u672a\u5173\u95ed\u95ee\u9898 \u4fee\u590d\u4e3b\u8fdb\u7a0b\u5047\u6b7b\u95ee\u9898 \u4fee\u590d\u9996\u6b21\u542f\u52a8\u83b7\u53d6\u5f55\u50cf\u5b58\u50a8\u7c7b\u578b\u4e3a Null \u7684\u95ee\u9898","title":"1.5.7"},{"location":"about/change_log/#156","text":"2020\u5e741\u67082\u65e5 \u6f0f\u6d1e\u4fee\u590d \u4fee\u590d\u7528\u6237\u88ab\u5f3a\u5236\u5f00\u542f\u4f7f\u7528 MFA \u4e8c\u6b21\u8ba4\u8bc1\u540e\u53ef\u4ee5\u81ea\u4e3b\u7ed5\u8fc7\u7ed1\u5b9a\u7684\u95ee\u9898 \u65b0\u589e\u529f\u80fd \u5168\u9762\u652f\u6301 IPv6 \u6570\u636e\u5e93\u5e94\u7528\u3010\u5546\u4e1a\u7248\u3011 Windows \u6279\u91cf\u547d\u4ee4 \u5f55\u50cf\u5b58\u50a8\u7c7b\u578b\uff1aSwift\u3001Ceph \u8282\u70b9\u8be6\u60c5\uff08\u53f3\u51fb\u8282\u70b9\u663e\u793a\uff09 \u8d44\u4ea7\u5e73\u53f0\u5217\u8868 \u4f18\u5316\u529f\u80fd \u5f55\u50cf/\u547d\u4ee4\u5b58\u50a8\u914d\u7f6e\u8fc1\u79fb\u5230 Terminal \u6a21\u5757 \u4f18\u5316\u7528\u6237\u8be6\u60c5\u9875\u9762 \u7528\u6237\u5217\u8868\u6dfb\u52a0\u79fb\u9664\u64cd\u4f5c\uff08\u975eDEFAULT\u7ec4\u7ec7\uff09\u3010\u5546\u4e1a\u7248\u3011 \u7528\u6237\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u540e\uff0c\u53ea\u5728\u521b\u5efa\u65f6\u4fee\u6539\u7528\u6237\u6765\u6e90\u4fe1\u606f \u4f18\u5316\u524d\u7aef Form \u6e32\u67d3\u903b\u8f91\uff08\u5b58\u50a8\u914d\u7f6e\u3001RemoteApp\u3001DatabaseApp\uff09 \u7edf\u4e00\u5bfc\u5165\u5bfc\u51fa\u7ec4\u4ef6 \u7edf\u4e00\u4e86\u6811\u5217\u8868\u57fa\u7840\u6a21\u677f \u4f18\u5316\u65e5\u5fd7\u5ba1\u8ba1\uff08\u64cd\u4f5c\u65e5\u5fd7\uff0c\u6539\u5bc6\u65e5\u5fd7\uff09 API \u91c7\u7528 serializer_classes \u5b57\u6bb5\uff08default, display\uff09 \u7edf\u4e00\u7cfb\u7edf\u914d\u7f6e\u7684 Tab \u5207\u6362 \u7edf\u4e00\u6ca1\u6709nav\u7684\u9875\u9762\uff08\u91cd\u7f6e\u5bc6\u7801\uff0c\u5fd8\u8bb0\u5bc6\u7801\uff0c\u91cd\u7f6e\u4e2d\u8bbe\u7f6e\u5bc6\u7801\uff0c\u72ec\u7acb message \u9875\u9762\uff09 \u4f18\u5316\u7528\u6237\u7ec4\u5217\u8868\u9875\uff08\u4e0d\u8fd4\u56de\u7ec4\u4e2d\u7528\u6237\uff0c\u53ea\u8fd4\u56de\u6570\u91cf\uff09 \u7ec4\u7ec7\u7684\u4e00\u4e9b\u65b9\u6cd5\u53d8\u4e3alayzproperty\uff0c\u907f\u514d\u91cd\u590d\u8ba1\u7b97 \u7528\u6237\u7ec4\u589e\u52a0\u5220\u9664\u7528\u6237\uff08\u7528\u6237\u7ec4\u8be6\u60c5\u9875\uff09 \u4f18\u5316Ops Task\u8868\u7ed3\u6784\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2\u6b21\u6570 \u4f18\u5316\u57fa\u7840\u7684 Encryptjsonfield \u4fee\u6539 Adhoc \u8fd4\u56de\u7684 become \u5b57\u6bb5\uff0c\u907f\u514d\u5bc6\u7801\u6cc4\u9732 \u4fee\u6539\u6821\u9a8c\u7528\u6237\u8d44\u4ea7\u6743\u9650API\u4e0d\u4f7f\u7528\u7f13\u5b58 \u7528\u6237\u767b\u5f55\u65e5\u5fd7\uff0c\u91c7\u7528\u540c\u6b65\u673a\u5236 \u53f3\u51fb\u8282\u70b9\u83dc\u5355\u4f4d\u7f6e\u8ba1\u7b97 \u547d\u4ee4\u5b58\u50a8\uff08ES\uff09\u76f8\u5173\u5b57\u6bb5\u8bbe\u7f6e\u4e3a required \u64cd\u4f5c\u65e5\u5fd7\u6587\u6848\uff0c\u7528\u6237\u4fee\u6539\u4e3a\u64cd\u4f5c\u8005 \u8c03\u6574 Web \u6587\u4ef6\u7ba1\u7406\u4e3a\u8282\u70b9\u6811\u7ed3\u6784 \u652f\u6301 Web \u6587\u4ef6\u7ba1\u7406\u7684\u8d44\u4ea7\u641c\u7d22 \u589e\u52a0 SSH \u8fde\u63a5\u7684\u52a0\u5bc6\u7b97\u6cd5\u4ee5\u652f\u6301\u65e7\u8bbe\u5907 \u4fee\u590dBug \u68c0\u9a8c\u7528\u6237\u6709\u6548\u6027\u903b\u8f91\uff08\u89e3\u51b3\u542f\u7528LDAP\u7b49\u8ba4\u8bc1\u65f6\uff0c\u663e\u793a\u7528\u6237\u540d\u4e0d\u5b58\u5728\uff09 \u5de5\u5355\u6309\u7528\u6237\u641c\u7d22\u65e0\u6548\u7684\u95ee\u9898 \u5bc6\u7801\u5323\u5b50\u9009\u62e9 id \u5bfc\u51fa\u65f6\u7684\u95ee\u9898 \u89e3\u51b3\u5bc6\u7801\u5323\u5b50\u7ffb\u9875\u518d\u6b21\u9009\u62e9\u8d44\u4ea7\u65f6\u4e0d\u80fd\u8bbe\u7f6e\u5230\u9009\u62e9\u6846\u7684\u95ee\u9898 \u89e3\u51b3\u7ba1\u7406\u5458\u91cd\u7f6e\u7528\u6237MFA\u540e\uff0c\u81ea\u52a8\u9000\u51fa\u7684\u95ee\u9898 \u4fee\u590d\u65e0\u6cd5\u4f7f\u7528\u4e2d\u6587\u641c\u7d22\u8d44\u4ea7 \u4fee\u590d\u56e0\u81ea\u5b9a\u4e49\u6b63\u5219\u9020\u6210\u7684\u7a0b\u5e8f\u5f02\u5e38 \u4fee\u590d\u56e0S3\u914d\u7f6e\u9020\u6210\u7684\u7a0b\u5e8f\u5f02\u5e38 \u4f18\u5316\u90e8\u5206\u4ee3\u7801 \u66f4\u65b0\u4f9d\u8d56 psutil==5.6.5 go-elasticsearch v6.8.5","title":"1.5.6"},{"location":"about/change_log/#155","text":"2019\u5e7412\u67084\u65e5 \u65b0\u589e\u529f\u80fd \u5de5\u5355\u7ba1\u7406\u3010\u5546\u4e1a\u7248\u3011 \u4e8c\u6b21\u590d\u5408\uff08\u7528\u6237\u767b\u5f55\uff09\u3010\u5546\u4e1a\u7248\u3011 \u4e8c\u6b21\u8ba4\u8bc1\uff08MFA Radius\uff09 \u91cd\u542f\u540e\u652f\u6301\u81ea\u52a8\u4e0a\u4f20\u9057\u7559\u5f55\u50cf \u652f\u6301 Windows \u8fde\u63a5\u8d85\u65f6\u65ad\u5f00 \u4f18\u5316\u529f\u80fd LDAP/AD \u903b\u8f91 \u53ef\u4fee\u6539\u7528\u6237\u6765\u6e90\uff08\u7528\u6237\u521b\u5efa\uff09 \u6536\u96c6\u8d44\u4ea7\u7528\u6237\uff08\u663e\u793a\u7528\u6237\u6700\u540e\u767b\u5f55\u65f6\u95f4\uff09 \u5de6\u4fa7\u7ec4\u7ec7\u589e\u52a0\u641c\u7d22\u8fc7\u6ee4 \u53ef\u5173\u95ed\u9875\u9762\u63d0\u793a\u4fe1\u606f \u8d44\u4ea7\u7528\u6237\u5217\u8868\u652f\u6301\u6a21\u7cca\u641c\u7d22 \u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u914d\u7f6e\uff08Windows\uff09 \u4f18\u5316\u6388\u6743\u8d44\u4ea7\u5206\u9875\u5c55\u793a \u652f\u6301\u6388\u6743\u8d44\u4ea7\u7684\u591a\u7ea7\u641c\u7d22 \u652f\u6301\u7528\u6237\u767b\u5f55\u7684\u4e8c\u6b21\u5ba1\u6838 \u4fee\u590dBug \u4fee\u590d\u7528\u6237\u6388\u6743\u8d44\u4ea7\u95ee\u9898\uff08\u7528\u6237\u7ec4/\u7528\u6237\u6388\u6743\u53d8\u66f4\u5237\u65b0\u95ee\u9898\uff09 \u4fee\u590d\u56e0\u7248\u672c\u4e0d\u4e00\u81f4\u9020\u6210\u7684\u5f02\u5e38 \u4fee\u590d\u90e8\u5206 telnet \u767b\u5f55\u95ee\u9898","title":"1.5.5"},{"location":"about/change_log/#154","text":"2019\u5e7410\u670823\u65e5 \u65b0\u589e\u529f\u80fd \u7528\u6237\u6536\u85cf\u8d44\u4ea7\uff08\u7528\u6237\u9875\u9762 -> \u6211\u7684\u8d44\u4ea7\uff09 LDAP \u767b\u5f55\u8ba4\u8bc1\u6dfb\u52a0\u914d\u7f6e\u9879\uff1a\u53ea\u6709\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u4f1a\u88ab\u5141\u8bb8\u8ba4\u8bc1\uff08\u914d\u7f6e\u9879\u53ef\u5728 config_example.yml \u4e2d\u67e5\u627e AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS\uff09 \u4f18\u5316\u529f\u80fd \u4f18\u5316 LDAP \u7528\u6237\u5bfc\u5165/\u641c\u7d22\u7684\u903b\u8f91\uff08\u91c7\u7528\u7528\u6237\u8fc7\u6ee4\u5668\u65b9\u5f0f\uff09 \u4f18\u5316\u547d\u4ee4\u5217\u8868\u4e2d\u547d\u4ee4\u7684\u663e\u793a\uff08\u89e3\u51b3\u547d\u4ee4\u592a\u957f\u7684\u95ee\u9898\uff09 \u4f18\u5316 select2 js/css \u4f9d\u8d56\u7248\u672c(4.0.10)\uff08\u89e3\u51b3\u591a\u9009\u4e0b\u62c9\u6846\u81ea\u52a8\u56de\u8df3\u5230\u9876\u90e8\u7684\u95ee\u9898\uff09 \u4f18\u5316 celery log \u663e\u793a\uff08\u91c7\u7528 Websocket \u65b9\u5f0f\uff09 \u4f18\u5316\u8282\u70b9\u5220\u9664 API\uff0c\u8fd4\u56de\u5220\u9664\u5931\u8d25\u539f\u56e0\uff08\u5305\u542b\u5b50\u8282\u70b9\u6216\u8d44\u4ea7\uff09 \u9650\u5236\u7cfb\u7edf\u7528\u6237 name \u5b57\u6bb5\u4f7f\u7528\u7279\u6b8a\u5b57\u7b26 \u6dfb\u52a0\u811a\u672c\uff1aget_no_parent_nodes.py \u66f4\u65b0\u521b\u5efa/\u66f4\u65b0\u7528\u6237\u7ec4\u7684\u53d6\u6d88\u6309\u94ae->\u91cd\u7f6e\u6309\u94ae\uff08\u907f\u514d\u5f15\u8d77\u6b67\u4e49\uff09 \u4f18\u5316\u6240\u6709 API \u7684 get_queryset \u65b9\u5f0f \u4fee\u6539\u83b7\u53d6\u7cfb\u7edf\u7528\u6237 API \u4e3a\u53ea\u8fd4\u56de\u8282\u70b9\u6570\u91cf\uff08\u4e4b\u524d\u662f\u8fd4\u56de\u8282\u70b9\u5217\u8868\uff09 \u4fee\u6539 session \u652f\u6301 protocol \u641c\u7d22 \u4fee\u6539 form serializer \u5bf9\u5e94\u7684\u591a\u5bf9\u591a\u5b57\u6bb5 \u4fee\u6539\u547d\u4ee4\u6279\u91cf\u6267\u884c\u5de6\u4fa7\u9009\u62e9\u7cfb\u7edf\u7528\u6237 \u4fee\u6539\u67e5\u770b\u8d44\u4ea7\u7528\u6237 Auth info \u53ef\u914d\u7f6e\u5173\u95ed MFA \u6821\u9a8c \u4f18\u5316\u521b\u5efa\u7528\u6237\u90ae\u4ef6\u5185\u5bb9 \u4f18\u5316\u7528\u6237\u7ec4\u8be6\u60c5\u9875\u9762\u9009\u62e9\u7528\u6237\u4e0b\u62c9\u5217\u8868\u4f7f\u7528\u5f02\u6b65\u52a0\u8f7d \u4f18\u5316\u547d\u4ee4\u8fc7\u6ee4\u8be6\u60c5\u7ed1\u5b9a\u5230\u7cfb\u7edf\u7528\u6237\u70b9\u51fb\u4e0b\u62c9\u6846\u81ea\u52a8\u5173\u95ed\u7684\u95ee\u9898 \u4f18\u5316\u63d0\u4ea4 api \u62a5\u9519\u65f6\u6eda\u52a8\u5230\u9519\u8bef\u63d0\u793a\u884c \u4f18\u5316 table \u9875\u9762\u67d0\u4e9b\u5217\u5bbd\u5ea6 \u4fee\u6539 jms \u542f\u52a8\u811a\u672c\uff0cstop \u65f6\u589e\u52a0\u8d85\u65f6\u68c0\u6d4b \u4fee\u6539\u5bfc\u51fa\u767b\u5f55\u65e5\u5fd7\u7684\u65e5\u671f\u9009\u62e9\u4ece\u5f00\u59cb\u65e5\u671f\u768400:00:00\uff0c\u5230\u7ed3\u675f\u65e5\u671f\u768423:59:59 \u4fee\u6539\u8fd4\u56de\u8d44\u4ea7\u6811\u5305\u542b\u7ec4\u7ec7\u4fe1\u606f \u9650\u5236\u7ec4\u7ec7\u540d\u79f0\u4e2d\u4f7f\u7528\u7684\u7279\u6b8a\u5b57\u7b26\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u4fee\u590dBug \u4fee\u590d\u8c03\u7528\u7cfb\u7edf\u7528\u6237\u8d44\u4ea7 API \u65f6 Connectivity is not JSON serializable \u7684 Bug \u4fee\u590d\u547d\u4ee4\u8bb0\u5f55\u4ece es \u4e2d\u83b7\u53d6\u5931\u8d25\uff08\u539f\u56e0\uff1a\u65f6\u95f4\u65e5\u671f\u683c\u5f0f\u4e0d\u5339\u914d\uff09 \u4fee\u6539\u7ec8\u7aef\u547d\u4ee4\u7c7b\u578b MAPPING\uff08elasticsearch -> es\uff09 \u4fee\u590d\u8d44\u4ea7\u6388\u6743\u5217\u8868\u641c\u7d22 invalid:false \u65f6\u51fa\u73b0 500 \u9519\u8bef \u4fee\u590d\u5bfc\u51fa\u8d44\u4ea7 csv \u6587\u4ef6\u4e3a\u7a7a\u7684\u95ee\u9898 \u4fee\u590d\u5bfc\u81f4 favorite \u548c empty \u540c\u65f6\u51fa\u73b0\u7684\u95ee\u9898 \u4fee\u590d\u8bfb\u53d6\u65e5\u5fd7\u65f6\u53ef\u80fd\u89e3\u7801\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u7ec4\u7ec7\u7ba1\u7406\u5458\u5728\u8d44\u4ea7\u8be6\u60c5\u9875\u9762\u4e0d\u663e\u793a\uff08\u5220\u9664/\u66f4\u65b0\uff09\u6309\u94ae\u7684\u95ee\u9898\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u4fee\u590d\u7ec4\u7ec7\u7ba1\u7406\u5458\u67e5\u770b\u7528\u6237\u6743\u9650\u5931\u8d25\u95ee\u9898\u3010X-pack \u4f01\u4e1a\u7248\u3011 \u66f4\u65b0\u4f9d\u8d56 select2 \u5347\u7ea7\u7248\u672c 4.0.10\uff08\u89e3\u51b3\u591a\u9009\u4e0b\u62c9\u6846\u9009\u62e9\u8df3\u5230\u9876\u90e8\u7684\u95ee\u9898\uff09","title":"1.5.4"},{"location":"about/change_log/#153","text":"2019\u5e749\u670824\u65e5 \u7ec4\u4ef6\u8bf4\u660e \u81ea v1.5.3 \u7248\u672c\u8d77\uff08\u5305\u542b v1.5.3\uff09 \uff0cKoko \u5c06\u62c5\u4efb Coco \u5728 JumpServer \u9879\u76ee\u4e2d\u7684\u91cd\u8981\u89d2\u8272\uff0c\u4e4b\u540e\u7684\u7248\u672c\u5c06\u4e0d\u4f1a\u518d\u5bf9 Coco \u8fdb\u884c\u5347\u7ea7\u7ef4\u62a4\u3002 \u65b0\u589e\u529f\u80fd \u6dfb\u52a0\u9875\u9762\u521b\u5efa API Key \u7684\u529f\u80fd\uff08\u53f3\u4e0a\u89d2\u70b9\u51fb\u8d26\u53f7\u4e0b\u62c9\u5217\u8868 -> API Key\uff09 \u5728\u7ebf\u4f1a\u8bdd\u5217\u8868\u4e2d\u5141\u8bb8\u7ec8\u65ad RDP Session \u6dfb\u52a0\u7528\u6237\u6811\u7f13\u5b58 \u4f18\u5316\u529f\u80fd \u4f18\u5316\u8d44\u4ea7\u6811\u52a0\u8f7d\u903b\u8f91 \u4f18\u5316\u8d44\u4ea7\u6388\u6743\u6811\u3001\u6388\u6743\u89c4\u5219\u52a0\u8f7d\u3001\u8fc7\u6ee4\u903b\u8f91 \u4f18\u5316\u524d\u7aef asset modal table \u7edf\u4e00 URL \u5730\u5740 \u4fee\u6539 Swagger \u5141\u8bb8\u6279\u91cf\u5220\u9664\u7528\u6237\uff0c\u4fee\u6539\u524d\u7aef\u63d0\u793a\u4fe1\u606f\u903b\u8f91 \u63a8\u9001\u7cfb\u7edf\u7528\u6237\u65f6\uff0c\u5728\u8d44\u4ea7\u4e0a\u521b\u5efa\u540c\u540d\u7684\u7528\u6237\u7ec4 \u8d44\u4ea7\u534f\u8bae\u4fee\u6539\uff1atelnet (beta) => telnet WebTerminal \u8df3\u8f6c\u65f6\u6dfb\u52a0\u65f6\u95f4\u6233 \u4fee\u590dBug \u4fee\u590d\u6388\u6743\u89c4\u5219\u5217\u8868\u540c\u4e00\u6761\u6570\u636e\u91cd\u590d\u663e\u793a\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u89c4\u5219\u5217\u8868\u7ffb\u9875\u540e\u91cd\u590d\u5c55\u793a\u524d\u51e0\u9875\u4e2d\u6570\u636e\u7684\u95ee\u9898 \u4fee\u590d\u6388\u6743\u8be6\u60c5\u4e2d\u6388\u6743\u8d44\u4ea7\u6216\u8282\u70b9\u6dfb\u52a0\u8d44\u4ea7\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u7cfb\u7edf\u8bbe\u7f6e\u7684\u914d\u7f6e\u5076\u5c14\u4e0d\u751f\u6548\u7684\u95ee\u9898 \u4fee\u590d\u547d\u4ee4\u6267\u884c\u5de6\u4fa7\u6811\u70b9\u51fb\u95ee\u9898 \u4fee\u590d\u7528\u6237\u8ba4\u8bc1\u5e8f\u5217\u7c7b\u83b7\u53d6 request \u7684\u95ee\u9898 \u4fee\u590d\u6279\u91cf\u521b\u5efa\u7cfb\u7edf\u7528\u6237\u7b49\u8d44\u6e90\u65f6\uff0cinitial_data \u83b7\u53d6\u6570\u636e\u5931\u8d25\u7684\u95ee\u9898 \u4fee\u590d\u521b\u5efa\u6388\u6743\u89c4\u5219\u6388\u6743\u8282\u70b9\u65f6\uff0c\u7cfb\u7edf\u7528\u6237\u4e0d\u81ea\u52a8\u63a8\u9001\u7684\u95ee\u9898 \u4fee\u590d\u6d4f\u89c8\u5668\u5173\u95ed\u540e Session \u4e0d\u5931\u6548\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u4e86\u4e00\u4e2a\u8282\u70b9\uff0c\u5f53\u79fb\u52a8\u8282\u70b9\u540e\uff0c\u88ab\u79fb\u52a8\u7684\u8282\u70b9\u4e0b\u7684\u8d44\u4ea7\u4f1a\u653e\u5230\u672a\u5206\u7ec4\u8282\u70b9\u4e0b\u7684\u95ee\u9898 \u4fee\u590d\u5237\u65b0\u8d44\u4ea7\u786c\u4ef6\u4fe1\u606f\u65f6\u65e0\u6cd5\u68c0\u6d4b NVMe \u7684\u786c\u76d8\u7684\u95ee\u9898 \u89e3\u51b3\u547d\u4ee4\u6267\u884c\u5bbd\u5ea6\u95ee\u9898 \u66f4\u65b0\u4f9d\u8d56 \u5347\u7ea7 jQuery v3.1.1","title":"1.5.3"},{"location":"about/change_log/#152","text":"2019\u5e747\u670816\u65e5 \u65b0\u589e\u529f\u80fd \u7cfb\u7edf\u8bbe\u7f6e-\u5b89\u5168\u8bbe\u7f6e\u4e2d\u6dfb\u52a0\u914d\u7f6e\u9879\uff1a\u7ec8\u7aef\u6ce8\u518c \u4f18\u5316\u529f\u80fd \u83b7\u53d6\u7cfb\u7edf\u7528\u6237\u6388\u6743\u8d44\u4ea7\u65f6\uff0c\u53ea\u8fd4\u56de\u8d44\u4ea7\u534f\u8bae\u652f\u6301\u7684\u7cfb\u7edf\u7528\u6237\u3002 \u8868\u5355\u4f7f\u7528API\u8fdb\u884c\u63d0\u4ea4 \u4f18\u5316\u6388\u6743\u89c4\u5219\u8d44\u4ea7\u5217\u8868\u9875\u9762 \u5728\u7ebf/\u5386\u53f2\u4f1a\u8bdd\u9875\u9762\u53bb\u6389\u534f\u8bae\u641c\u7d22\u9009\u9879 \u4fee\u590dBug \u89e3\u51b3\u547d\u4ee4\u8fc7\u6ee4\u5668\u8be6\u60c5\u6dfb\u52a0\u7cfb\u7edf\u7528\u6237\u5931\u8d25\u7684\u95ee\u9898 \u89e3\u51b3\u547d\u4ee4\u8fc7\u6ee4\u5668\u8be6\u60c5\u9875\u5220\u9664\u529f\u80fd\u4e0d\u53ef\u7528\u7684\u95ee\u9898 \u89e3\u51b3\u53ef\u4ee5\u521b\u5efa\u540c\u540d\u547d\u4ee4\u8fc7\u6ee4\u5668\u7684\u95ee\u9898\uff08\u4fee\u590d\u8d44\u4ea7\u6388\u6743\u8be6\u60c5\u9875\u5220\u9664\u5f39\u51fa\u6846\u7684\u6743\u9650\u540d\u663e\u793a\u4e0d\u5bf9) \u89e3\u51b3\u5728\u8d44\u4ea7\u6388\u6743\u8be6\u60c5\u9875\u5220\u9664\u6388\u6743\u89c4\u5219\u65f6\u5f39\u51fa\u6846\u4e2d\u540d\u79f0\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u7f51\u57df\u8be6\u60c5\u9875\u5220\u9664\u529f\u80fd\u4e0d\u53ef\u7528\u7684\u95ee\u9898 \u89e3\u51b3\u8d44\u4ea7\u5217\u8868\u6570\u91cf\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u521b\u5efa\u547d\u4ee4\u8fc7\u6ee4\u89c4\u5219\u7c7b\u578b\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u65f6\u521b\u5efa\u4e0d\u6210\u529f\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u89c4\u5219\u8be6\u60c5\u7528\u6237\u7ec4\u6570\u91cf\u663e\u793a\u4e0d\u6b63\u786e\u7684\u95ee\u9898 \u89e3\u51b3\u65e5\u671f\u663e\u793a\u5dee8\u5c0f\u65f6\u7684\u95ee\u9898 \u89e3\u51b3\u521b\u5efa\u8d44\u4ea7\u5931\u8d25\u7684\u95ee\u9898\uff08\u539f\u56e0\uff1a\u534f\u8bae\u7684\u6dfb\u52a0\u3001\u5220\u9664\u903b\u8f91\uff09 \u89e3\u51b3\u6388\u6743\u9875\u9762\u4e0d\u663e\u793a\u8d44\u4ea7\u7684\u95ee\u9898 \u89e3\u51b3\u6388\u6743\u8d44\u4ea7\u5305\u542b\u5df2\u7981\u7528\u8d44\u4ea7\u7684\u95ee\u9898 \u89e3\u51b3\u7cfb\u7edf\u7528\u6237\u3001\u7ba1\u7406\u7528\u6237\u63d0\u4ea4\u4f1a\u91cd\u7f6e\u5bc6\u7801\u7684\u95ee\u9898 \u89e3\u51b3\u6279\u91cf\u6267\u884c\u547d\u4ee4\u6ca1\u6709\u9009\u62e9\u8d44\u4ea7\u7684\u95ee\u9898","title":"1.5.2"},{"location":"about/change_log/#151","text":"2019\u5e747\u67086\u65e5 \u65b0\u589e\u529f\u80fd \u5ba1\u8ba1\u5458\uff08\u7528\u6237\u6dfb\u52a0\u5ba1\u8ba1\u5458\u89d2\u8272\uff09 \u4f18\u5316\u529f\u80fd \u7528\u6237\u9875\u9762\u4f18\u5316\u8d44\u4ea7\u6807\u7b7e\u8fc7\u6ee4\u529f\u80fd \u7528\u6237\u521b\u5efa\u6dfb\u52a0\u5230\u5f53\u524d\u7ec4\u7ec7\uff08API\u8c03\u7528\uff09 \u8d44\u4ea7\u6388\u6743\u6811\u663e\u793a\u7b56\u7565\uff08\u5c06\u5355\u72ec\u6388\u6743\u7684\u8d44\u4ea7\u6dfb\u52a0\u5230\u81ea\u5b9a\u4e49\u7684\u9ed8\u8ba4\u8282\u70b9\u4e0b\uff09 \u8d44\u4ea7\u521b\u5efa\u652f\u6301\u6dfb\u52a0\u591a\u4e2a\u534f\u8bae \u8d44\u4ea7\u521b\u5efa\u8bbe\u7f6e\u8282\u70b9\u7b56\u7565\uff08API/CSV, \u89e3\u51b3\u603b\u662f\u4f1a\u6dfb\u52a0\u5230\u9ed8\u8ba4\u8282\u70b9\u7684\u95ee\u9898\uff09 \u90ae\u4ef6\u8bbe\u7f6e\u6dfb\u52a0\u53d1\u9001\u8d26\u53f7\u9009\u9879\uff08\u89e3\u51b3SMTP\u8d26\u53f7\u548c\u53d1\u9001\u8d26\u53f7\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff09 \u5b89\u5168\u8bbe\u7f6e\u6dfb\u52a0\u6279\u91cf\u547d\u4ee4\u9009\u9879\uff08\u89e3\u51b3\u7981\u6b62\u666e\u901a\u7528\u6237\u6279\u91cf\u6267\u884c\u547d\u4ee4\u7684\u95ee\u9898\uff09 \u7ec8\u7aef(coco/guacamole)\u4e0a\u62a5Session/FTP\u7528\u6237\u4fe1\u606f\u4f7f\u7528 name\uff08username\uff09\u683c\u5f0f Windows\u8d44\u4ea7\u53ef\u901a\u8fc7SSH\u534f\u8bae\u8fde\u63a5 Windows\u8d44\u4ea7\u652f\u6301\u76f4\u63a5\u590d\u5236\u7c98\u8d34\u6587\u672c\uff08\u6d4f\u89c8\u5668\u6388\u6743\u526a\u5207\u677f\u6743\u9650\uff09 \u6dfb\u52a0\u4e00\u952e\u7981\u7528LDAP\u8ba4\u8bc1\u811a\u672c \u89e3\u51b3\u8fde\u63a5windows\u8d44\u4ea7\u51fa\u73b0\u5e7d\u7075\u4f1a\u8bdd\u7684\u95ee\u9898 \u4f18\u5316\u521b\u5efa\u6388\u6743\u89c4\u5219\u65f6\uff0c\u6388\u6743\u52a8\u4f5c\u7684\u5c55\u793a \u89e3\u51b3\u64cd\u4f5c\u65e5\u5fd7\u4e2d\u51fa\u73b0coco/guamole\u66f4\u65b0Default\u8282\u70b9\u7684\u95ee\u9898 \u4f18\u5316\u547d\u4ee4\u8bb0\u5f55\u5217\u8868/\u5728\u7ebf/\u5386\u53f2\u4f1a\u8bdd\u5217\u8868\uff08\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\uff0c\u53d6\u6d88\u8fd4\u56de\u6240\u6709\u8d44\u4ea7\uff09 \u4fee\u590dBug \u4fee\u590d\u6587\u4ef6\u5bfc\u51fa\u4f7f\u7528excel\u6253\u5f00\u4e71\u7801\u7684\u95ee\u9898 \u89e3\u51b3\u7528\u6237\u6388\u6743\u8d44\u4ea7/\u8282\u70b9\u4e3a\u7a7a\u65f6\uff0c\u524d\u7aef\u6784\u5efa\u8d44\u4ea7\u6388\u6743\u6811\u7684Bug","title":"1.5.1"},{"location":"about/change_log/#150","text":"2019\u5e745\u670829\u65e5 \u65b0\u589e\u529f\u80fd \u652f\u6301\u542f\u7528MFA\u7684\u7ba1\u7406\u5458\u67e5\u770b\u8d44\u4ea7\u7528\u6237\u5bc6\u7801 \u53ef\u81ea\u5b9a\u4e49\u521b\u5efa\u7528\u6237\u65f6\u53d1\u9001\u521b\u5efa\u7528\u6237\u6210\u529f\u7684\u90ae\u4ef6\u5185\u5bb9 \u521b\u5efa\u7528\u6237\u65f6\uff0c\u53ef\u9009\u62e9\u7528\u6237\u5bc6\u7801\u8bbe\u7f6e\u7b56\u7565(\u53ef\u89e3\u51b3\u5ba2\u6237\u6ca1\u6709\u90ae\u4ef6\u7cfb\u7edf\u7684\u573a\u666f) (\u7528\u6237/\u7528\u6237\u7ec4/\u8d44\u4ea7/\u7ba1\u7406\u7528\u6237/\u7cfb\u7edf\u7528\u6237)\u8d44\u6e90\u652f\u6301\u4f7f\u7528csv\u6587\u4ef6\u7c7b\u578b\u8fdb\u884c\u5bfc\u5165\u3001\u5bfc\u51fa\u3001\u66f4\u65b0\u64cd\u4f5c LDAP\u652f\u6301SSL (pem\u8def\u5f84 jumpserver/data/certs/ldap_ca.pem) \u652f\u6301Option\u65b9\u6cd5\u8bf7\u6c42API\u83b7\u53d6\u5bf9\u5e94\u5176\u4ed6HTTP\u65b9\u6cd5\u7684\u6240\u9700\u7684\u5b57\u6bb5\u8bf4\u660e \u652f\u6301RemoteApp \u4f18\u5316\u529f\u80fd \u521b\u5efa\u8d44\u4ea7\u65f6\u5141\u8bb8ip\u5b57\u6bb5\u586b\u5199\u4e3ahost\u5730\u5740 OpenID Middleware\u53bb\u6389\u8f93\u51fa\u65e5\u5fd7 \u8d44\u4ea7\u8282\u70b9API\u6dfb\u52a0search\u529f\u80fd \u89e3\u51b3ldap\u6620\u5c04is_active\u7b49\u5b57\u6bb5\u4e3abool\u503c\u7684\u95ee\u9898(\u53ef\u89e3\u51b3LDAP\u7981\u7528\u7528\u6237\u540e\uff0c\u540c\u65f6\u7981\u6b62\u7528\u6237\u767b\u5f55JumpServer\u7684\u573a\u666f) \u4fee\u590dBug \u4fee\u590dLDAP\u4e0d\u80fd\u5bfc\u5165\u7528\u6237\u540d\u4e2d\u5305\u542b\u7a7a\u683c\u7684\u7528\u6237 \u4fee\u590dLDAP\u53ef\u5bfc\u5165\u8de8\u9875\u9762\u9009\u53d6\u7684\u6240\u6709\u7528\u6237 \u4fee\u590d\u8d44\u4ea7\u7528\u6237\u7ba1\u7406\u5668\u83b7\u53d6\u7528\u6237\u540d\u4e3a\"\"\u7684\u5bf9\u8c61\u65f6\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u7684bug","title":"1.5.0"},{"location":"about/change_log/#1410","text":"2019\u5e744\u670830\u65e5 \u65b0\u589e\u529f\u80fd \u65b0\u589e\u6743\u9650\u63a7\u5236\uff1a\u53ef\u5206\u522b\u5bf9\u8fde\u63a5\u3001\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u52a8\u4f5c\u5355\u72ec\u6388\u6743\uff1b \u4f18\u5316\u529f\u80fd \u6743\u9650\u4f18\u5316\uff1a\u7ec4\u7ec7\u7ba1\u7406\u5458\u4e0d\u5141\u8bb8\u5bf9\u8d85\u7ea7\u7ba1\u7406\u5458\u8fdb\u884c\u64cd\u4f5c\uff1b Luna\u4f18\u5316\uff1aLuna\u641c\u7d22\u4f18\u5316\u529f\u80fd\uff1b \u4fee\u590dBug \u4fee\u590d\u901a\u8fc7API\u6279\u91cf\u66f4\u65b0\u7528\u6237\u7684bug \u4fee\u590dluna\u9875\u9762\u5237\u65b0\u4e0d\u8df3\u8f6cOpeID\u8ba4\u8bc1\u7684bug \u4fee\u590d\u521b\u5efaazure\u7c7b\u578b\u7684\u5f55\u50cf\u5b58\u50a8\u65f6\u524d\u7aef\u7684bug \u4fee\u590d\u5176\u4ed6\u524d\u7aef\u9875\u9762bug \u4fee\u590d\u5f55\u50cf\u4e0a\u4f20\u5230Azure\u7684bug","title":"1.4.10"},{"location":"about/change_log/#149","text":"2019\u5e743\u670826\u65e5 \u4fee\u590dBug \u4fee\u590d\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u65f6\u7684\u65f6\u533a\u95ee\u9898 \u4fee\u590dcelery\u65e5\u5fd7\u53ef\u80fd\u64cd\u4f5c\u5173\u95ed\u6587\u4ef6\u7684bug \u4fee\u590d\u4e00\u4e9b\u8bbe\u7f6e\u7f13\u5b58\u7684\u95ee\u9898 \u4fee\u590d\u7528\u6237token\u8fc7\u671f\u7684\u65f6\u95f4\u7b56\u7565 \u4fee\u590d\u7b2c\u4e00\u6b21\u767b\u5f55\u8df3\u8f6c\u7ec4\u7ec7\u9875\u9762\u7684bug \u4f18\u5316\u529f\u80fd sudo\u547d\u4ee4\u6dfb\u52a0\u5e2e\u52a9\u8bf4\u660e\uff0c\u5e76\u517c\u5bb9\u6362\u884c\u5f62\u5f0f \u8ba4\u8bc1\u903b\u8f91\uff0c\u4eceusers\u6a21\u5757\u4e2d\u79fb\u52a8\u5230authentication \u5408\u5e76\u4e00\u4e9bmigrations \u4efb\u52a1\u5217\u8868\u53bb\u6389\u65e5\u671f docker build\u5347\u7ea7Mysql client\u7248\u672c coco,guacamole\u4e0a\u4f20\u5b8c\u5f55\u50cf\u4e0a\u62a5api, \u9875\u9762\u4e0a\u5982\u679c\u6ca1\u6709\u5f55\u50cf\u5219\u64ad\u653e\u6309\u94ae\u662f\u7981\u7528\u7684 \u5b9a\u65f6\u6e05\u7406\u767b\u9646\u65e5\u5fd7 \u7528\u6237\u6388\u6743\u589e\u52a0\u4e24\u5c42\u7f13\u5b58\uff0c\u6388\u6743\u8d44\u4ea7\u6570\u91cf\u5f88\u5927\u65f6\u4e5f\u4e0d\u6015\u4e86 \u8d44\u4ea7\u6a21\u5757\u6dfb\u52a0\u8d44\u4ea7\u7528\u6237\u7ba1\u7406\u5668\uff0c\u53ef\u4ee5\u4e3a\u8d44\u4ea7\u5355\u72ec\u8bbe\u7f6e \u7ba1\u7406\u7528\u6237\u3001\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801 \u767b\u9646\u65e5\u5fd7\u7684\u5bfc\u51fa \u6570\u636e\u5e93\u652f\u6301ssl ldap\u7528\u6237\u4e00\u952e\u5bfc\u5165 \u4f7f\u7528\u7f51\u5173\u540c\u6837\u6dfb\u52a0\u5fc3\u8df3\u4fe1\u606f \u7528\u6237\u6388\u6743\u8d44\u4ea7\u5217\u8868\u589e\u52a0\u7f13\u5b58 \u4fee\u590d\u4e00\u4e9bsftp\u7684\u5c0fbug \u4fee\u590d\u4e0a\u4f20\u547d\u4ee4\u8bb0\u5f55decode\u7684\u9519\u8bef \u652f\u6301\u7cfb\u7edf\u7528\u6237\u5728\u4e0d\u540c\u673a\u5668\u4e0a\u5bc6\u7801\u4e0d\u4e00\u81f4\u7684\u573a\u666f \u652f\u6301\u5de6\u4fa7\u5217\u8868\u7f13\u5b58","title":"1.4.9"},{"location":"about/change_log/#148","text":"2019\u5e742\u670822\u65e5 \u4fee\u590dcommand filter \u4e0d\u8bb0\u5f55\u64cd\u4f5c\u65e5\u5fd7\u7684\u95ee\u9898 LDAP\u652f\u6301\u65e0\u5bc6\u7801 \u5f55\u50cf\u4e0a\u4f20\u8bbe\u7f6e\u4e2d\u53bb\u6389\u4e86ceph, s3\u517c\u5bb9cepht gunicorn\u65e5\u5fd7\u5207\u5272 telnet\u652f\u6301\u5728\u8bbe\u7f6e\u4e2d\u4fee\u6539\u6210\u529f\u7684\u6b63\u5219\u8868\u8fbe\u5f0f \u4fee\u590dsession 10\u5206\u949f\u540e\u4e0d\u5728\u7ebf\u7684\u95ee\u9898","title":"1.4.8"},{"location":"about/change_log/#147","text":"2019\u5e741\u670829\u65e5 \u652f\u6301 radius\u8ba4\u8bc1 \u7edf\u4e00\u751f\u6210coco\u7684host key, \u8fd9\u6837\u90e8\u7f72\u591a\u4e2acoco\u4e5f\u4e0d\u9700\u8981\u518d\u590d\u5236 Host key \u6743\u9650\u5217\u8868\u589e\u52a0\u8be6\u7ec6\u8fc7\u6ee4 \u66f4\u6539\u914d\u7f6e\u6587\u4ef6\u7c7b\u578b\u4e3a yml\u683c\u5f0f \u4fee\u6539\u5fc3\u8df3\u65b9\u5f0f \u4f18\u5316\u4efb\u52a1\u6267\u884c\u7684\u65e5\u5fd7\u8bb0\u5f55\u65b9\u5f0f \u4fee\u590d\u8282\u70b9\u53f3\u51fb\u6d4b\u8bd5\u8fde\u63a5\u8d44\u4ea7\u4e3a\u8282\u70b9\u4e0b\u6240\u6709\u8d44\u4ea7, \u800c\u4e0d\u662f\u76f4\u63a5\u8d44\u4ea7 sftp\u652f\u6301\u4fee\u6539home\u76ee\u5f55, \u652f\u6301\u4e0d\u663e\u793a\u9690\u85cf\u6587\u4ef6 \u4fee\u590dluna\u9690\u85cf\u4fa7\u8fb9\u680f\u7684bug luna\u652f\u6301\u76f4\u63a5\u767b\u5f55\u5230\u67d0\u4e2a\u8d44\u4ea7","title":"1.4.7"},{"location":"about/change_log/#146","text":"2018\u5e7412\u670819\u65e5 \u63a8\u9001\u8d44\u4ea7\u4e0a\u5df2\u5b58\u5728\u7684\u7cfb\u7edf\u7528\u6237\u4f1a\u8986\u76d6\u8be5\u7528\u6237\u7684home\u76ee\u5f55\u6743\u9650 \u4f1a\u8bdd\u65e5\u5fd7\u53ef\u4ee5\u5b9a\u65f6\u6e05\u7406, \u4fdd\u8bc1\u786c\u76d8\u591f\u7528 coco\u91cc p\u53ef\u4ee5\u81ea\u5b9a\u4e49\u662f\u5426\u5206\u9875\u4e86 \u4f18\u5316\u6811\u5f62\u7ed3\u6784, \u4e0d\u6015\u8d44\u4ea7\u592a\u591a\u4e86 \u5176\u4ed6bug","title":"1.4.6"},{"location":"about/change_log/#145","text":"2018\u5e7412\u670812\u65e5 \u7edf\u4e00\u7ef4\u62a4migrations\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d8\u66f4 \u7cfb\u7edf\u914d\u7f6e\u5185\u5bb9\u652f\u6301\u70ed\u52a0\u8f7d, \u4e0d\u7528\u518d\u91cd\u542f jumpserver coco, guacamole\u6ce8\u518c\u673a\u5236\u66f4\u6539, \u4f7f\u7528\u9884\u5171\u4eab\u79d8\u94a5\u81ea\u52a8\u6ce8\u518c, \u4e0d\u518d\u9700\u8981\u63a5\u53d7\u6ce8\u518c \u7528\u6237\u5bc6\u7801\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e ldap\u4e0d\u53ef\u4ee5\u4fee\u6539\u5bc6\u7801 \u9ed8\u8ba4\u7ec4\u7ec7\u91cc\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7528\u6237 \u65e5\u5fd7\u5ba1\u8ba1\u4fee\u6539\u5bc6\u7801\u65e5\u5fd7\u4e2d\u53ea\u80fd\u770b\u5230\u5f53\u524d\u7ec4\u7ec7\u7528\u6237\u7684\u66f4\u6539 luna\u5217\u8868\u56de\u6eda\u4e3a\u539f\u6765\u65b9\u5f0f, \u4e0d\u518d\u662f\u5f02\u6b65\u52a0\u8f7d rdp\u652f\u6301\u5206\u8fa8\u7387\u66f4\u6539","title":"1.4.5"},{"location":"about/change_log/#144","text":"2018\u5e7411\u670811\u65e5 \u5f55\u50cf\u5b58\u50a8\u8bbe\u7f6e, \u4f7f\u7528\u8868\u5355\u6765\u586b\u5199 \u652f\u6301luna\u5f02\u6b65\u52a0\u8f7d \u5404\u5217\u8868\u7edf\u4e00\u4f7f\u7528\u5206\u9875 \u6388\u6743\u65f6\u95f4\u7cbe\u786e\u5230\u5206\u949f \u652f\u6301openid\u8ba4\u8bc1","title":"1.4.4"},{"location":"about/change_log/#143","text":"2018\u5e7410\u670812\u65e5 \u652f\u6301\u547d\u4ee4\u8fc7\u6ee4","title":"1.4.3"},{"location":"about/change_log/#142","text":"2018\u5e7410\u67088\u65e5 \u652f\u6301web sftp, \u652f\u6301\u8de8\u8d44\u4ea7\u590d\u5236\u7c98\u8d34\u6587\u4ef6 \u4f18\u5316\u4e00\u4e9b\u5185\u5bb9","title":"1.4.2"},{"location":"about/change_log/#141","text":"2018\u5e749\u67084\u65e5 \u7cfb\u7edf\u8bbe\u7f6e\u652f\u6301\u52a0\u5bc6\u5b58\u50a8 \u5355\u72ec\u63a8\u9001\u7cfb\u7edf\u7528\u6237\u5230\u67d0\u4e2a\u8d44\u4ea7 \u652f\u6301\u4e86\u7528\u6237\u6539\u5bc6\u65e5\u5fd7\u548c\u64cd\u4f5c\u65e5\u5fd7 \u7ffb\u8bd1\u66f4\u52a0\u5b8c\u5584, \u652f\u6301\u5207\u6362\u8bed\u8a00 \u4e0d\u8bb0\u5f55zmodem\u4fe1\u606f \u652f\u6301\u7a7a\u95f2\u95f4\u9694\u81ea\u52a8\u65ad\u5f00 \u4fee\u590dsession\u65e0\u6cd5\u4e2d\u65ad\u95ee\u9898 \u589e\u52a0ssh\u7528\u6237\u9ed1\u540d\u5355\u548c\u767d\u540d\u5355 luna\u652f\u6301\u641c\u7d22\u652f\u6301IP \u4f18\u5316\u4e00\u4e9b\u5185\u5bb9","title":"1.4.1"},{"location":"about/change_log/#140","text":"2018\u5e748\u67087\u65e5 \u8d85\u7ea7\u7ba1\u7406\u5458\u521b\u5efa\u7ec4\u7ec7, \u4e3a\u6539\u7ec4\u7ec7\u6dfb\u52a0\u7ba1\u7406\u5458, \u7ba1\u7406\u5458\u53ef\u4ee5\u8d1f\u8d23\u8be5\u7ec4\u7ec7\u4e0b \u7528\u6237\u3001\u8d44\u4ea7\u3001\u6388\u6743\u7b49\u7ba1\u7406 Sftp\u663e\u793a\u540c\u540d\u8d44\u4ea7\u4e3a \u4e3b\u673a\u540d.\u7ec4\u7ec7 Luna\u652f\u6301\u6839\u636eIP\u641c\u7d22 \u9f20\u6807\u60ac\u505c\u53ef\u4ee5\u663e\u793a\u4e3b\u673aip \u5176\u4ed6\u4fee\u590dBug\u7b49","title":"1.4.0"},{"location":"about/change_log/#133","text":"2018\u5e747\u670817\u65e5 \u652f\u6301telnet\u534f\u8bae \u652f\u6301\u7528\u6237\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u767b\u9646, \u5bc6\u7801\u4e0d\u7528\u6258\u7ba1\u5230JumpServer \u767b\u9646\u65e5\u5fd7\u589e\u52a0\u5931\u8d25\u539f\u56e0 session\u589e\u52a0\u767b\u9646\u6e90 \u4fee\u590d\u7f51\u5173\u7aef\u53e3\u548c\u5bc6\u7801bug \u6dfb\u52a0\u7528\u6237\u767b\u9646\u5931\u8d25\u6b21\u6570\u9650\u5236","title":"1.3.3"},{"location":"about/change_log/#132","text":"2018\u5e746\u670811\u65e5 \u53ef\u4ee5\u5728\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u6307\u5b9a\u5bc6\u7801\u5f3a\u5ea6, \u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u7279\u6b8a\u5b57\u7b26\u957f\u5ea6\u7b49 \u53ef\u4ee5\u5168\u5c40\u5f00\u542fMFA \u4fee\u6539EMAIL\u4e0d\u9700\u8981\u91cd\u542f \u8bbe\u7f6e\u516c\u94a5\u4ea4\u4e92\u6539\u53d8 \u4fee\u6539\u4e00\u4e9bBUG \u4fee\u6539\u7a97\u53e3\u5927\u5c0f\u7b56\u7565 \u7edf\u4e00requirements\u7248\u672c \u4fee\u6539luna\u6811\u5f62\u7ed3\u6784, \u4ece\u6839\u5f00\u59cb\u5c55\u793a \u4fee\u6539luna\u6811\u5f62\u641c\u7d22 \u4fee\u6539\u521d\u59cb\u7a97\u53e3\u5927\u5c0f\u4e0d\u5bf9\u7684bug \u4fee\u6539\u5f55\u50cf\u64ad\u653e\u7684\u90e8\u5206bug","title":"1.3.2"},{"location":"about/change_log/#131","text":"2018\u5e745\u670824\u65e5 \u7528\u6237\u6388\u6743\u8282\u70b9\u903b\u8f91\u66f4\u6539 \u53bb\u6389window\u65e0\u7528\u4fe1\u606f \u4fee\u590d\u8282\u70b9\u521b\u5efabug \u521b\u5efa\u8282\u70b9 \u4ece0\u5f00\u59cb, \u65b0\u8282\u70b90 \u65b0\u8282\u70b91 \u4fee\u590d\u62d6\u52a8\u8282\u70b9\u5f15\u8d77\u7684\u7236\u8282\u70b9\u5f02\u5e38 \u8d44\u4ea7\u6811\u589e\u52a0\u89c6\u56fe, \u53ea\u663e\u793a\u672c\u8282\u70b9\u8d44\u4ea7\u548c\u663e\u793a\u5b50\u8282\u70b9\u8d44\u4ea7","title":"1.3.1"},{"location":"about/change_log/#130","text":"2018\u5e745\u67082\u65e5 \u652f\u6301\u4e8c\u6b21\u8ba4\u8bc1(Google Authenticator) \u4fee\u590d\u4e00\u4e9bbug \u4f18\u5316\u7b2c\u4e00\u6b21\u767b\u5f55\u9875\u9762","title":"1.3.0"},{"location":"about/change_log/#120","text":"2018\u5e744\u670813\u65e5 sftp\u4e0a\u4f20\u6587\u4ef6\u652f\u6301 \u652f\u6301sftp\u65e5\u5fd7\u5ba1\u8ba1","title":"1.2.0"},{"location":"about/change_log/#111","text":"2018\u5e744\u67086\u65e5 \u52a0\u5f3a\u4efb\u52a1\u6267\u884c \u652f\u6301\u67e5\u770b\u5404\u4e2a\u4efb\u52a1\u7684\u8be6\u7ec6\u6267\u884c\u65e5\u5fd7 \u652f\u6301\u5b9e\u65f6\u67e5\u770b\u4efb\u52a1\u6267\u884c\u8f93\u51fa","title":"1.1.1"},{"location":"about/change_log/#110","text":"2018\u5e744\u67083\u65e5 \u652f\u6301\u6df7\u5408\u4e91\u591a\u7f51\u7edc\u73af\u5883 \u7f51\u57df\u6982\u5ff5\u52a0\u5165 \u7f51\u5173\u6982\u5ff5\u52a0\u5165 rdp gateway\u6982\u5ff5\u52a0\u5165 \u4fee\u590d\u4e00\u4e9bbug","title":"1.1.0"},{"location":"about/change_log/#100","text":"2018\u5e743\u670815\u65e5 Windows\u652f\u6301 \u5bb9\u5668\u5316\u90e8\u7f72 \u8d44\u4ea7\u6811 \u5f55\u50cf/\u547d\u4ee4\u5b58\u50a8\u652f\u6301OSS/S3\u548cES \u5206\u5e03\u5f0f\u90e8\u7f72 \u7cfb\u7edf\u7528\u6237\u81ea\u52a8\u63a8\u9001 \u6807\u7b7e\u7ba1\u7406 \u547d\u4ee4\u7edf\u8ba1\u589e\u52a0\u8f93\u51fa\u5c55\u793a Web Terminal\u6539\u8fdb \u7cfb\u7edf\u8bbe\u7f6e LDAP\u652f\u6301","title":"1.0.0"},{"location":"about/change_log/#050beta","text":"2017\u5e745\u670821\u65e5 coco\u548cluna\u529f\u80fd\u62c6\u5206 \u7cfb\u7edf\u8bbe\u7f6e\u652f\u6301 \u5f55\u50cf\u652f\u6301 \u4f5c\u4e1a\u4e2d\u5fc3\u4f18\u5316 \u5176\u5b83\u4fee\u590dBug","title":"0.5.0beta"},{"location":"about/change_log/#040beta","text":"2017\u5e745\u670821\u65e5 \u4f7f\u7528\u6700\u65b0\u7248Python\u548cDjango\u5f00\u53d1 Python3.6.1, Django 1.11 \u4f7f\u7528\u5b8c\u5168\u4f7f\u7528 Django Class Base View\u5f00\u53d1 \u4ee3\u7801\u7ed3\u6784\u66f4\u52a0\u5408\u7406\u89c4\u6574, \u5206\u7ec4\u4ef6\u5f00\u53d1 \u652f\u6301Restful API \u62c6\u5206 JumpServer, terminal, web termial\u4e3a\u4e09\u4e2a\u9879\u76ee JumpServer, coco, luna\u3002coco\u548cluna\u4e3a\u65e0\u72b6\u6001\u7684, \u652f\u6301\u6269\u5c55 \u652f\u6301\u56fd\u9645\u5316, \u82f1\u6587+\u4e2d\u6587 Ansible\u4f7f\u7528 2.1 \u7248\u672c \u5404\u7ec4\u4ef6\u529f\u80fd\u90fd\u6709\u6240\u52a0\u5f3a \u652f\u6301\u767b\u9646\u9a8c\u8bc1\u7801 \u547d\u4ee4\u8be6\u7ec6\u89e3\u6790\u5b58\u50a8\u5230\u6570\u636e\u5e93 \u767b\u5f55\u8bb0\u5f55\u5ba1\u8ba1 \u539f\u6765\u7684\u624b\u52a8\u63a8\u9001\u7528\u6237\u6539\u4e3a\u81ea\u52a8\u63a8\u9001 \u539f\u6765\u7684connect\u811a\u672c, \u6539\u4e3a\u5b9e\u73b0 ssh server, \u7edf\u4e00\u4e86\u8ba4\u8bc1 web terminal \u65e0\u4e0e\u4f26\u6bd4\u7684\u6f02\u4eae \u8d44\u4ea7\u7528\u6237\u6279\u91cf\u5bfc\u5165\u5bfc\u51fa, \u6279\u91cf\u4fee\u6539 \u754c\u9762\u66f4\u52a0\u4f18\u96c5\u6f02\u4eae","title":"0.4.0beta"},{"location":"about/change_log/#033","text":"2016\u5e7412\u670814\u65e5 \u4fee\u6539\u4e00\u4e9b\u5c0fbug","title":"0.3.3"},{"location":"about/change_log/#032","text":"2016\u5e744\u67085\u65e5 \u6a21\u7cca\u5339\u914d\u652f\u6301 \u641c\u7d22\u6392\u5e8f\u95ee\u9898 \u6279\u91cf\u547d\u4ee4\u4f18\u5316, ip\u83b7\u53d6","title":"0.3.2"},{"location":"about/change_log/#031","text":"2016\u5e743\u670831\u65e5 \u4f18\u5316ssh\u8fde\u63a5\u901f\u5ea6 \u4f18\u5316web terminal\u7a97\u53e3\u5927\u5c0f \u4fee\u590d\u5f55\u50cf\u64ad\u653e\u767d\u5c4f \u4f18\u5316\u547d\u4ee4\u5339\u914d \u4f18\u5316\u5b89\u88c5\u811a\u672c \u4f18\u5316Kill\u4efb\u52a1 \u4fee\u590d\u76d1\u63a7\u5361\u4f4fbug","title":"0.3.1"},{"location":"about/change_log/#030","text":"2015\u5e7412\u670820\u65e5 \u7cbe\u786e\u8bb0\u5f55\u6267\u884c\u547d\u4ee4 \u65b0\u589e\u6587\u4ef6\u4e0a\u4f20\u4e0b\u8f7d \u66f4\u6539\u4e3a\u8f93\u5165ID\u767b\u9646\u4e3b\u673a \u589e\u52a0\u4e3b\u673a\u641c\u7d22 \u6267\u884c\u547d\u4ee4\u4f7f\u7528ansible\u6267\u884c \u4f18\u5316\u811a\u672c \u589e\u52a0web terminal \u589e\u52a0web\u7aef\u6279\u91cf\u547d\u4ee4\u6267\u884c \u589e\u52a0\u5f55\u50cf\u56de\u653e \u8d44\u4ea7\u589e\u52a0\u786c\u4ef6\u4fe1\u606f\u6293\u53d6 \u8d44\u4ea7\u589e\u52a0Excel\u5bfc\u51fa\u548c\u5bfc\u5165 \u8d44\u4ea7\u589e\u52a0\u6279\u91cf\u66f4\u6539 \u5728\u4e3b\u673a\u4e0a\u6388\u6743\u7cfb\u7edf\u7528\u6237(\u7cfb\u7edf\u7528\u6237\u4e3a\u4e00\u4e9b\u901a\u7528\u7528\u6237, \u5982dev, dba\u7b49) \u6388\u6743\u6539\u4e3a\u4ee5\u6388\u6743\u89c4\u5219\u4e3a\u4e2d\u5fc3 \u6dfb\u52a0\u7cfb\u7edf\u7528\u6237\u63a8\u9001 \u66f4\u6539sudo\u7ba1\u7406 \u589e\u52a0\u6267\u884c\u547d\u4ee4\u65e5\u5fd7\u5ba1\u8ba1 \u589e\u52a0\u6587\u4ef6\u4e0a\u4f20\u547d\u4ee4\u5ba1\u8ba1 \u589e\u52a0web\u7aef\u5386\u53f2\u547d\u4ee4\u641c\u7d22","title":"0.3.0"},{"location":"about/change_log/#020","text":"2015\u5e7404\u670819\u65e5 \u4f7f\u7528paramiko\u539f\u751fssh\u534f\u8bae\u767b\u5f55\u540e\u7aef\u4e3b\u673a(\u539f\u6765\u7248\u672c\u4f7f\u7528pexpect\u6a21\u62df\u767b\u5f55) \u65b0\u589e\u4f7f\u7528\u522b\u540d\u6216\u5907\u6ce8\u767b\u5f55 \u65b0\u589e\u4e3b\u673a\u5206\u7ec4\u67e5\u770b, \u4f7f\u7528\u66f4\u65b9\u4fbf \u591a\u7ebf\u7a0b\u6279\u91cf\u6267\u884c\u547d\u4ee4 \u4f18\u5316\u767b\u5f55\u811a\u672c Web\u754c\u9762\u66f4\u52a0\u7f8e\u89c2\u6f02\u4eae \u589e\u52a0\u90e8\u95e8\u7ba1\u7406\u5458\u8d1f\u8d23\u7ba1\u7406\u672c\u90e8\u95e8\u6210\u5458 \u589e\u52a0\u4eea\u8868\u76d8\u7edf\u8ba1\u4fe1\u606f \u589e\u52a0\u90e8\u95e8, \u7528\u6237\u7ec4, \u4e3b\u673a\u7ec4 \u7528\u6237\u4fe1\u606f, \u4e3b\u673a\u4fe1\u606f\u66f4\u52a0\u8be6\u7ec6 \u4e3b\u673a\u767b\u5f55\u65b9\u5f0f\u589e\u52a0\u767b\u5f55\u65b9\u5f0f map, \u7528\u4e8e\u767b\u5f55\u4e0d\u652f\u6301ldap\u7684\u4e3b\u673a \u4e3b\u673a\u6388\u6743, sudo\u6388\u6743\u6539\u4e3a\u7ec4\u7ec4\u4e4b\u95f4\u6388\u6743 \u589e\u52a0\u4e3b\u673a\u6279\u91cf\u4fee\u6539, \u6279\u91cf\u6dfb\u52a0 \u6dfb\u52a0\u7528\u6237\u81ea\u52a8\u751f\u6210\u968f\u673a\u5bc6\u7801, \u7136\u540e\u81ea\u52a8\u53d1\u9001\u90ae\u4ef6 \u6dfb\u52a0\u5404\u79cd\u641c\u7d22 \u589e\u52a0\u666e\u901a\u7528\u6237web\u9875\u9762\u7684\u6388\u6743\u7533\u8bf7 \u5ba1\u8ba1\u754c\u9762\u66f4\u52a0\u53cb\u597d \u4e3b\u673a\u6dfb\u52a0\u8fc7\u6ee4\u641c\u7d22\u529f\u80fd \u589e\u52a0\u7528\u6237\u5934\u50cf \u4e0a\u4f20\u6279\u91cf\u4e0a\u4f20 \u589e\u52a0\u90e8\u95e8\u7ba1\u7406\u5458\u9875\u9762 \u666e\u901a\u7528\u6237\u9875\u9762\u5185\u5bb9\u66f4\u52a0\u4e30\u5bcc","title":"0.2.0"},{"location":"about/change_log/#011","text":"2014\u5e7411\u670814\u65e5 \u53bb\u6389shell\u811a\u672c, \u6765\u6dfb\u52a0\u7528\u6237 \u767b\u5f55\u66f4\u7a33\u5b9a \u65b0\u589eWeb\u63a7\u5236sudo \u65b0\u589eWeb\u67e5\u770b\u7edf\u8ba1\u65e5\u5fd7 \u65b0\u589eWeb\u5b9e\u65f6\u67e5\u770bsession\u5c4f\u5e55 \u65b0\u589eWeb\u53ef\u4ee5\u7ed3\u675f\u7528\u6237session \u65b0\u589e\u533a\u5206\u7ec4\u7ba1\u7406\u5458\u548c\u8d85\u7ea7\u7ba1\u7406\u5458 \u65b0\u589eweb\u4e0a\u4f20\u548c\u4e0b\u8f7d\u6587\u4ef6 \u65b0\u589e\u6279\u91cf\u6267\u884c\u547d\u4ee4\u8bb0\u5f55\u65e5\u5fd7 \u65b0\u589e\u4e0a\u4f20\u4e0b\u8f7d\u8bb0\u5f55\u65e5\u5fd7 \u65b0\u589e\u7528\u6237\u53ef\u4ee5web\u4fee\u6539\u5bc6\u7801 \u65b0\u589eadmin\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u4fe1\u606f \u65b0\u589eIDC \u652f\u6301\u5206\u9875 admin\u53ef\u4ee5\u4e0b\u8f7d\u7528\u6237key","title":"0.1.1"},{"location":"about/change_log/#010","text":"2014\u5e748\u670815\u65e5 \u53d1\u5e03\u7b2c\u4e00\u4e2a\u7248\u672c bootstrap\u57fa\u672c\u9875\u9762 \u7528\u6237\u7ba1\u7406 \u8d44\u4ea7\u7ba1\u7406 \u6388\u6743\u8d44\u4ea7\u7ed9\u7528\u6237 pexpect\u767b\u5f55\u8d44\u4ea7, \u8bb0\u5f55\u65e5\u5fd7 \u670d\u52a1\u5668\u914d\u7f6eldap, \u96c6\u4e2d\u8ba4\u8bc1 \u6279\u91cf\u6267\u884c\u547d\u4ee4","title":"0.1.0"},{"location":"about/contact/","text":"\u8054\u7cfb\u65b9\u5f0f \u00b6 \u5546\u4e1a\u652f\u6301 \u00b6 \u4e00\u4f53\u673a \u4f01\u4e1a\u7248\uff08XPack + \u8f6f\u4ef6\u8ba2\u9605\u670d\u52a1\uff09 QQ\u7fa4 \u00b6 \u7fa41: 390139816 (\u6ee1) \u7fa42: 399218702 (\u6ee1) \u7fa43: 552054376 (\u6ee1) \u7fa44: 794442067 (\u6ee1) \u7fa45: 773866691 (\u6ee1) \u7fa46: 908100817 (\u65b0) \u9879\u76ee\u5730\u5740 \u00b6 jumpserver http://www.jumpserver.org support@fit2cloud.com 400-052-0755","title":"\u8054\u7cfb\u65b9\u5f0f"},{"location":"about/contact/#_1","text":"","title":"\u8054\u7cfb\u65b9\u5f0f"},{"location":"about/contact/#_2","text":"\u4e00\u4f53\u673a \u4f01\u4e1a\u7248\uff08XPack + \u8f6f\u4ef6\u8ba2\u9605\u670d\u52a1\uff09","title":"\u5546\u4e1a\u652f\u6301"},{"location":"about/contact/#qq","text":"\u7fa41: 390139816 (\u6ee1) \u7fa42: 399218702 (\u6ee1) \u7fa43: 552054376 (\u6ee1) \u7fa44: 794442067 (\u6ee1) \u7fa45: 773866691 (\u6ee1) \u7fa46: 908100817 (\u65b0)","title":"QQ\u7fa4"},{"location":"about/contact/#_3","text":"jumpserver http://www.jumpserver.org support@fit2cloud.com 400-052-0755","title":"\u9879\u76ee\u5730\u5740"},{"location":"about/contributor/","text":"\u8d21\u732e\u8005\u540d\u5355 \u00b6 \u611f\u8c22\u4ee5\u4e0b\u670b\u53cb\u4e3a JumpServer \u505a\u51fa\u7684\u8d21\u732e, \u4e16\u754c\u56e0\u4f60\u4eec\u800c\u4e0d\u540c, \u6392\u540d\u4e0d\u5206\u5148\u540e \u8001\u5e7f <\u5e7f\u5b8f\u4f1f> JumpServer \u521b\u59cb\u4eba halcyon <\u738b\u5889> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, 0.3.2 \u6838\u5fc3\u5f00\u53d1\u8005\u4e4b\u4e00 jiaxiangkong <\u9648\u5c1a\u59d4> JumpServer \u6d4b\u8bd5\u8fd0\u8425 liuz <\u5218\u6b63> \u5168\u6808\u5de5\u7a0b\u5e08, \u7f16\u5199\u4e86 Web Terminal \u5927\u90e8\u5206\u4ee3\u7801 yumaojun03 <\u55bb\u8302\u5cfb> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, \u64c5\u957f Python\u3001Go \u4ee5\u53ca PaaS \u5e73\u53f0\u5f00\u53d1 kelianchun <\u67ef\u8fde\u6625> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, \u4fee\u590d\u4e86\u5f88\u591a Bugs \u5c0f\u5f67 <\u674e\u78ca> Django \u8d44\u6df1\u5f00\u53d1\u8005, \u4e3a\u7528\u6237\u6a21\u5757\u8d21\u732e\u4e86\u5f88\u591a\u4ee3\u7801, \u5728 JumpServer \u8270\u96be\u65f6\u671f\u7ed9\u4e88\u4e86\u5e2e\u52a9 sofia <\u5468\u5c0f\u4fa0> \u8d44\u6df1\u524d\u7aef\u5de5\u7a0b\u5e08, \u524d\u7aef\u4ee3\u7801\u8d21\u732e\u8005 q4speed <\u83ab\u9e4d> \u67b6\u6784\u5e08, Guacamle \u96c6\u6210\u8d21\u732e\u8005, \u4e3a\u652f\u6301 Windows \u505a\u51fa\u4e86\u91cd\u5927\u8d21\u732e liqiang-fit2cloud <\u5f20\u7acb\u5f3a> \u7248\u672c\u6d4b\u8bd5, \u7ed9\u8d44\u4ea7\u6811\u8bbe\u8ba1\u8d21\u732e\u4e86\u5f88\u591a\u5efa\u8bae wojiushixiaobai <\u5434\u80b2\u714c> \u5b8c\u5584\u6587\u6863, \u6d4b\u8bd5 Bug, \u70ed\u5fc3\u5e2e\u52a9\u8fc7\u5f88\u591a\u670b\u53cb Qiuser <\u90b1\u666f\u73bb> \u6d4b\u8bd5 bug, \u70ed\u5fc3\u5e2e\u52a9\u8fc7\u5f88\u591a\u670b\u53cb \u5c0f\u767d <\u767d\u6c5f\u6770> 1.0 \u81f3\u4eca JumpServer \u6838\u5fc3\u5f00\u53d1\u8005 LeeEirc <\u674e\u667a> \u9ad8\u7ea7\u7814\u53d1\u5de5\u7a0b\u5e08, \u64c5\u957f Go \u5e73\u53f0\u5f00\u53d1, KoKo \u7ec4\u4ef6\u5f00\u53d1\u8005 Orange <\u9a6c\u771f\u723d> \u6838\u5fc3\u5f00\u53d1\u8005\uff0c\u8d1f\u8d23 JumpServer \u524d\u7aef\u5de5\u4f5c \u516b\u5343\u6d41 <\u848b\u80b2\u654f> \u6838\u5fc3\u6d4b\u8bd5\uff08\u8f85\u52a9\u5f00\u53d1\uff09\u8d1f\u8d23 JumpServer \u7684\u6d4b\u8bd5","title":"\u8d21\u732e\u5217\u8868"},{"location":"about/contributor/#_1","text":"\u611f\u8c22\u4ee5\u4e0b\u670b\u53cb\u4e3a JumpServer \u505a\u51fa\u7684\u8d21\u732e, \u4e16\u754c\u56e0\u4f60\u4eec\u800c\u4e0d\u540c, \u6392\u540d\u4e0d\u5206\u5148\u540e \u8001\u5e7f <\u5e7f\u5b8f\u4f1f> JumpServer \u521b\u59cb\u4eba halcyon <\u738b\u5889> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, 0.3.2 \u6838\u5fc3\u5f00\u53d1\u8005\u4e4b\u4e00 jiaxiangkong <\u9648\u5c1a\u59d4> JumpServer \u6d4b\u8bd5\u8fd0\u8425 liuz <\u5218\u6b63> \u5168\u6808\u5de5\u7a0b\u5e08, \u7f16\u5199\u4e86 Web Terminal \u5927\u90e8\u5206\u4ee3\u7801 yumaojun03 <\u55bb\u8302\u5cfb> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, \u64c5\u957f Python\u3001Go \u4ee5\u53ca PaaS \u5e73\u53f0\u5f00\u53d1 kelianchun <\u67ef\u8fde\u6625> DevOps \u8d44\u6df1\u5f00\u53d1\u8005, \u4fee\u590d\u4e86\u5f88\u591a Bugs \u5c0f\u5f67 <\u674e\u78ca> Django \u8d44\u6df1\u5f00\u53d1\u8005, \u4e3a\u7528\u6237\u6a21\u5757\u8d21\u732e\u4e86\u5f88\u591a\u4ee3\u7801, \u5728 JumpServer \u8270\u96be\u65f6\u671f\u7ed9\u4e88\u4e86\u5e2e\u52a9 sofia <\u5468\u5c0f\u4fa0> \u8d44\u6df1\u524d\u7aef\u5de5\u7a0b\u5e08, \u524d\u7aef\u4ee3\u7801\u8d21\u732e\u8005 q4speed <\u83ab\u9e4d> \u67b6\u6784\u5e08, Guacamle \u96c6\u6210\u8d21\u732e\u8005, \u4e3a\u652f\u6301 Windows \u505a\u51fa\u4e86\u91cd\u5927\u8d21\u732e liqiang-fit2cloud <\u5f20\u7acb\u5f3a> \u7248\u672c\u6d4b\u8bd5, \u7ed9\u8d44\u4ea7\u6811\u8bbe\u8ba1\u8d21\u732e\u4e86\u5f88\u591a\u5efa\u8bae wojiushixiaobai <\u5434\u80b2\u714c> \u5b8c\u5584\u6587\u6863, \u6d4b\u8bd5 Bug, \u70ed\u5fc3\u5e2e\u52a9\u8fc7\u5f88\u591a\u670b\u53cb Qiuser <\u90b1\u666f\u73bb> \u6d4b\u8bd5 bug, \u70ed\u5fc3\u5e2e\u52a9\u8fc7\u5f88\u591a\u670b\u53cb \u5c0f\u767d <\u767d\u6c5f\u6770> 1.0 \u81f3\u4eca JumpServer \u6838\u5fc3\u5f00\u53d1\u8005 LeeEirc <\u674e\u667a> \u9ad8\u7ea7\u7814\u53d1\u5de5\u7a0b\u5e08, \u64c5\u957f Go \u5e73\u53f0\u5f00\u53d1, KoKo \u7ec4\u4ef6\u5f00\u53d1\u8005 Orange <\u9a6c\u771f\u723d> \u6838\u5fc3\u5f00\u53d1\u8005\uff0c\u8d1f\u8d23 JumpServer \u524d\u7aef\u5de5\u4f5c \u516b\u5343\u6d41 <\u848b\u80b2\u654f> \u6838\u5fc3\u6d4b\u8bd5\uff08\u8f85\u52a9\u5f00\u53d1\uff09\u8d1f\u8d23 JumpServer \u7684\u6d4b\u8bd5","title":"\u8d21\u732e\u8005\u540d\u5355"},{"location":"admin-guide/migration/","text":"\u8fc1\u79fb\u6587\u6863 \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u8bf7\u4e0d\u8981\u8de8\u7248\u672c\u8fc1\u79fb\u6570\u636e\u5e93 1. \u5907\u4efd\u6570\u636e\u5e93 \u00b6 mysqldump -uroot -p jumpserver > /opt/jumpserver.sql 2. \u8fc1\u79fb\u6570\u636e \u00b6 \u767b\u5f55\u65b0\u7684\u670d\u52a1\u5668\uff0c\u62f7\u8d1d jumpserver \u548c jumpserver.sql \u5230 /opt \u76ee\u5f55 scp -r root@jumpserver_ip:/opt/jumpserver /opt/ scp -r root@jumpserver_ip:/opt/jumpserver.sql /opt/ 3. \u914d\u7f6e\u65b0\u670d\u52a1\u5668 \u00b6 yum -y install wget gcc epel-release git yum -y install mariadb mariadb-devel mariadb-server MariaDB-shared redis systemctl enable redis mariadb systemctl start redis mariadb mysql -uroot create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '127.0.0.1' identified by 'weakPassword' ; use jumpserver ; source / opt / jumpserver . sql ; quit \u8fd9\u91cc\u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528\u7684\u8d26\u6237\u5bc6\u7801\u5efa\u8bae\u4e0e jumpserver/config.yml \u91cc\u9762\u7684\u6570\u636e\u5e93\u4fe1\u606f\u4e00\u81f4 yum -y install python36 python36-devel cd /opt python3.6 -m venv py3 source /opt/py3/bin/activate cd /opt/jumpserver/requirements yum -y install $( cat rpm_requirements.txt ) pip install wheel pip install --upgrade pip setuptools pip install -r requirements.txt cd /opt/jumpserver ./jms start \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d \u5176\u4ed6\u7ec4\u4ef6\u53c2\u8003\u5b89\u88c5\u6587\u6863\u91cd\u65b0\u8bbe\u7f6e\u5373\u53ef","title":"\u8fc1\u79fb\u6587\u6863"},{"location":"admin-guide/migration/#_1","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u8bf7\u4e0d\u8981\u8de8\u7248\u672c\u8fc1\u79fb\u6570\u636e\u5e93","title":"\u8fc1\u79fb\u6587\u6863"},{"location":"admin-guide/migration/#1","text":"mysqldump -uroot -p jumpserver > /opt/jumpserver.sql","title":"1. \u5907\u4efd\u6570\u636e\u5e93"},{"location":"admin-guide/migration/#2","text":"\u767b\u5f55\u65b0\u7684\u670d\u52a1\u5668\uff0c\u62f7\u8d1d jumpserver \u548c jumpserver.sql \u5230 /opt \u76ee\u5f55 scp -r root@jumpserver_ip:/opt/jumpserver /opt/ scp -r root@jumpserver_ip:/opt/jumpserver.sql /opt/","title":"2. \u8fc1\u79fb\u6570\u636e"},{"location":"admin-guide/migration/#3","text":"yum -y install wget gcc epel-release git yum -y install mariadb mariadb-devel mariadb-server MariaDB-shared redis systemctl enable redis mariadb systemctl start redis mariadb mysql -uroot create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '127.0.0.1' identified by 'weakPassword' ; use jumpserver ; source / opt / jumpserver . sql ; quit \u8fd9\u91cc\u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528\u7684\u8d26\u6237\u5bc6\u7801\u5efa\u8bae\u4e0e jumpserver/config.yml \u91cc\u9762\u7684\u6570\u636e\u5e93\u4fe1\u606f\u4e00\u81f4 yum -y install python36 python36-devel cd /opt python3.6 -m venv py3 source /opt/py3/bin/activate cd /opt/jumpserver/requirements yum -y install $( cat rpm_requirements.txt ) pip install wheel pip install --upgrade pip setuptools pip install -r requirements.txt cd /opt/jumpserver ./jms start \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d \u5176\u4ed6\u7ec4\u4ef6\u53c2\u8003\u5b89\u88c5\u6587\u6863\u91cd\u65b0\u8bbe\u7f6e\u5373\u53ef","title":"3. \u914d\u7f6e\u65b0\u670d\u52a1\u5668"},{"location":"admin-guide/proxy/","text":"\u53cd\u5411\u4ee3\u7406 \u00b6 \u53cd\u5411\u4ee3\u7406 jumpserver\u8981\u6c42\u8bf4\u660e 1. nginx ssl \u90e8\u7f72 \u00b6 vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d return 301 https: // $server_name$request_uri; } server { listen 443 ssl ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_session_timeout 5 m; ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # \u81ea\u884c\u66ff\u6362\u6210\u4f60\u8bc1\u4e66\u652f\u6301\u7684\u52a0\u5bc6\u5957\u4ef6 ssl_protocols TLSv1 TLSv1. 1 TLSv1. 2 ; # \u652f\u6301\u7684\u534f\u8bae ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } 2. \u591a\u5c42 nginx \u53cd\u5411\u4ee3\u7406 \u00b6 \u9002\u5408\u4e0a\u5c42\u8fd8\u6709\u7edf\u4e00\u5bf9\u5916\u51fa\u53e3\u7684\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668 \u5c5e\u4e8e\u591a\u5c42 nginx \u53cd\u5411\u4ee3\u7406 \u6bcf\u4e00\u5c42\u90fd\u9700\u8981\u8bbe\u7f6e websocket \u957f\u8fde\u63a5 vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d client_max_body_size 100 m; # \u4e0a\u4f20\u5f55\u50cf\u5927\u5c0f\u9650\u5236 location / { # \u8fd9\u91cc\u7684 ip \u662f\u540e\u7aef jumpserver nginx \u7684 ip proxy_pass http: // 192 . 168 . 244 . 144 ; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } \u63a8\u8350\u90e8\u7f72 ssl \u4f7f\u7528\u66f4\u5b89\u5168\u7684 https \u534f\u8bae\u8bbf\u95ee server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d return 301 https: // $server_name$request_uri; } server { listen 443 ssl ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_session_timeout 5 m; ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # \u81ea\u884c\u66ff\u6362\u6210\u4f60\u8bc1\u4e66\u652f\u6301\u7684\u52a0\u5bc6\u5957\u4ef6 ssl_protocols TLSv1. 1 TLSv1. 2 ; # \u652f\u6301\u7684\u534f\u8bae ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location / { # \u8fd9\u91cc\u7684 ip \u662f\u540e\u7aef jumpserver nginx \u7684 ip proxy_pass http: // 192 . 168 . 244 . 144 ; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } 3. \u5176\u4ed6 slb \u00b6 \u9700\u8981\u6ce8\u610f websocket \u957f\u8fde\u63a5\u8bbe\u7f6e\u5373\u53ef \u9700\u8981\u6ce8\u610f session \u95ee\u9898","title":"\u53cd\u5411\u4ee3\u7406"},{"location":"admin-guide/proxy/#_1","text":"\u53cd\u5411\u4ee3\u7406 jumpserver\u8981\u6c42\u8bf4\u660e","title":"\u53cd\u5411\u4ee3\u7406"},{"location":"admin-guide/proxy/#1-nginx-ssl","text":"vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d return 301 https: // $server_name$request_uri; } server { listen 443 ssl ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_session_timeout 5 m; ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # \u81ea\u884c\u66ff\u6362\u6210\u4f60\u8bc1\u4e66\u652f\u6301\u7684\u52a0\u5bc6\u5957\u4ef6 ssl_protocols TLSv1 TLSv1. 1 TLSv1. 2 ; # \u652f\u6301\u7684\u534f\u8bae ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } }","title":"1. nginx ssl \u90e8\u7f72"},{"location":"admin-guide/proxy/#2-nginx","text":"\u9002\u5408\u4e0a\u5c42\u8fd8\u6709\u7edf\u4e00\u5bf9\u5916\u51fa\u53e3\u7684\u53cd\u5411\u4ee3\u7406\u670d\u52a1\u5668 \u5c5e\u4e8e\u591a\u5c42 nginx \u53cd\u5411\u4ee3\u7406 \u6bcf\u4e00\u5c42\u90fd\u9700\u8981\u8bbe\u7f6e websocket \u957f\u8fde\u63a5 vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d client_max_body_size 100 m; # \u4e0a\u4f20\u5f55\u50cf\u5927\u5c0f\u9650\u5236 location / { # \u8fd9\u91cc\u7684 ip \u662f\u540e\u7aef jumpserver nginx \u7684 ip proxy_pass http: // 192 . 168 . 244 . 144 ; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } \u63a8\u8350\u90e8\u7f72 ssl \u4f7f\u7528\u66f4\u5b89\u5168\u7684 https \u534f\u8bae\u8bbf\u95ee server { listen 80 ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d return 301 https: // $server_name$request_uri; } server { listen 443 ssl ; server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 ssl_session_timeout 5 m; ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # \u81ea\u884c\u66ff\u6362\u6210\u4f60\u8bc1\u4e66\u652f\u6301\u7684\u52a0\u5bc6\u5957\u4ef6 ssl_protocols TLSv1. 1 TLSv1. 2 ; # \u652f\u6301\u7684\u534f\u8bae ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location / { # \u8fd9\u91cc\u7684 ip \u662f\u540e\u7aef jumpserver nginx \u7684 ip proxy_pass http: // 192 . 168 . 244 . 144 ; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; }","title":"2. \u591a\u5c42 nginx \u53cd\u5411\u4ee3\u7406"},{"location":"admin-guide/proxy/#3-slb","text":"\u9700\u8981\u6ce8\u610f websocket \u957f\u8fde\u63a5\u8bbe\u7f6e\u5373\u53ef \u9700\u8981\u6ce8\u610f session \u95ee\u9898","title":"3. \u5176\u4ed6 slb"},{"location":"admin-guide/quick_start/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u4ee5\u4e0b\u64cd\u4f5c\u5747\u5728 Web \u9875\u9762\u5b8c\u6210\uff0c\u8bf7\u4f7f\u7528 admin \u7528\u6237\u767b\u9646\uff0c\u9ed8\u8ba4\u5bc6\u7801 admin \u4e00\u3001\u7cfb\u7edf\u8bbe\u7f6e \u00b6 1.1 \u57fa\u672c\u8bbe\u7f6e \u00b6 Warning \u5f53\u524d\u7ad9\u70b9URL \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u90ae\u4ef6\u6536\u5230\u7684\u5730\u5740\u4e3a http://localhost \u5f00\u5934 Email\u4e3b\u9898\u524d\u7f00 \u90ae\u4ef6\u7684\u6807\u9898\uff0c\u6bd4\u5982 [JMS] \u6536\u5230\u7684\u90ae\u4ef6\u4f1a\u662f [jms]\u521b\u5efa\u7528\u6237\u6210\u529f \u8fd9\u6837\u7684 \u7528\u6237\u5411\u5bfcURL \u7528\u6237\u9996\u6b21\u767b\u9646\u53ef\u4ee5\u770b\u5230\u6b64 \u8d85\u94fe\u63a5 \uff0c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8bbe\u7f6e 1.2 \u90ae\u4ef6\u8bbe\u7f6e \u00b6 \u5fc5\u987b\u8bbe\u7f6e\u624d\u80fd\u4f7f\u7528\u4e0e\u90ae\u4ef6\u76f8\u5173\u7684\u529f\u80fd \u4e0d\u53ef\u4ee5\u540c\u65f6\u52fe\u9009 \u4f7f\u7528SSL \u548c \u4f7f\u7528TLS \u4f7f\u7528SSL \u5982\u679c\u7aef\u53e3\u4f7f\u7528 465 \uff0c\u5fc5\u987b\u52fe\u9009\u6b64\u9879 \u4f7f\u7528TLS \u5982\u679c\u7aef\u53e3\u4f7f\u7528 587 \uff0c\u5fc5\u987b\u52fe\u9009\u6b64\u9879 SMTP\u4e3b\u673a \u8f93\u5165\u4f60\u6216\u8005\u4f60\u670d\u52a1\u5546\u63d0\u4f9b\u7684 smtp \u670d\u52a1\u5668, \u683c\u5f0f\uff1a smtp.qq.com SMTP\u7aef\u53e3 \u901a\u5e38\u662f 25 \uff0c\u63a8\u8350\u4f7f\u7528\u66f4\u5b89\u5168\u7684 465 \u6216\u8005 587 SMTP\u8d26\u53f7 \u901a\u5e38\u662f user@domain.com SMTP\u5bc6\u7801 \u8f93\u5165\u5bf9\u5e94\u8d26\u6237\u7684\u5bc6\u7801\uff0c\u6ce8\u610f\uff1a\u6bcf\u6b21\u6d4b\u8bd5\u90fd\u9700\u8981\u91cd\u65b0\u8f93\u5165\u5bc6\u7801 \u53d1\u9001\u8d26\u53f7 \u4e0e SMTP\u8d26\u6237 \u4fdd\u6301\u4e00\u81f4 \u6d4b\u8bd5\u6536\u4ef6\u4eba \u6d4b\u8bd5\u8fde\u63a5\u65f6\u4e00\u5b9a\u8981\u8f93\u5165 \u4e8c\u3001\u8d44\u4ea7\u7ba1\u7406 \u00b6 \u51c6\u5907\u4e24\u4e2a\u6d4b\u8bd5\u8d44\u4ea7\u548c\u4e00\u4e2a\u6570\u636e\u5e93\u6765\u9a8c\u8bc1\u529f\u80fd +--------------+-----------------+------------+------------+---------------+---------------+ | IP | Host name | Port | System | Admin User | Password | +==============+=================+============+============+===============+===============+ | 172.16.80.11 | test_ssh01 | 22 | Centos 7 | root | Test2020.L | +--------------+-----------------+------------+------------+---------------+---------------+ | 172.16.80.21 | test_rdp01 | 3389 | Windows 10 | administrator | Test2020.W | +--------------+-----------------+------------+------------+---------------+---------------+ | 172.16.80.31 | test_mysql01 | 3306 | Mysql 5 | root | Test2020.M | +--------------+-----------------+------------+------------+---------------+---------------+ Windows \u8d44\u4ea7\u5148\u8fdb\u884c Windows SSH \u8bbe\u7f6e Mysql Server \u9700\u8981\u6388\u6743 core \u548c koko \u7684\u8fdc\u7a0b\u8bbf\u95ee\u7684\u6743\u9650 mysql -uroot grant all on * . * to 'root' @ '%' identified by 'Test2020.M' ; flush privileges ; 2.1 \u7f16\u8f91\u8d44\u4ea7\u6811 \u00b6 \u6839\u8282\u70b9 Default \u4e0d\u80fd\u91cd\u540d, \u53f3\u51fb\u8282\u70b9\u53ef\u4ee5\u6dfb\u52a0\u3001\u5220\u9664\u548c\u91cd\u547d\u540d\u8282\u70b9, \u4ee5\u53ca\u8fdb\u884c\u8d44\u4ea7\u76f8\u5173\u7684\u64cd\u4f5c \u8bf4\u660e \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u8d44\u4ea7\u5217\u8868 \u5148\u5728\u6839\u8282\u70b9 Default \u53f3\u952e\u65b0\u5efa SSH Server \u548c RDP Server \u4e24\u4e2a\u8282\u70b9 2.2 \u521b\u5efa\u7ba1\u7406\u7528\u6237 \u00b6 \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u65b0\u5efa\u7ba1\u7406\u7528\u6237 \u521b\u5efa\u4e24\u4e2a\u7ba1\u7406\u7528\u6237, \u7ba1\u7406\u7528\u6237\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u8868\u5355\u7684 Admin User \u548c Password \u540d\u79f0\u4e0d\u80fd\u91cd\u540d, \u5bc6\u7801\u6216\u8005\u5bc6\u94a5\u4e8c\u9009\u4e00\u5373\u53ef, \u4e00\u4e9b\u8d44\u4ea7\u4e0d\u5141\u8bb8\u901a\u8fc7 \u5bc6\u7801 \u8ba4\u8bc1\u53ef\u4ee5\u6539\u7528 \u79c1\u94a5 \u8ba4\u8bc1 \u540d\u79f0 172.16.80.11_root \u7528\u6237\u540d root \u5bc6\u7801 Test2020.L \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u8d44\u4ea7\u7684 \u7ba1\u7406\u7528\u6237 \u540d\u79f0 172.16.80.21_administrator \u7528\u6237\u540d administrator \u5bc6\u7801 Test2020.W \u70b9\u51fb \u4fdd\u5b58 2.3 \u521b\u5efa\u8d44\u4ea7 \u00b6 \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u8d44\u4ea7\u5217\u8868 - \u521b\u5efa\u8d44\u4ea7 \u628a\u4e24\u4e2a\u8d44\u4ea7\u5bfc\u5165 \u4e3b\u673a\u540d\u4e0d\u80fd\u91cd\u540d \u4e3b\u673a\u540d test_ssh01 IP 172.16.80.11 \u7cfb\u7edf\u5e73\u53f0 Linux \u534f\u8bae\u7ec4 ssh 22 \u7ba1\u7406\u7528\u6237 172.16.80.11_root \u8282\u70b9 Default / SSH Server \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u8d44\u4ea7, \u6ce8\u610f\u534f\u8bae\u7ec4\u6211\u4eec\u9700\u8981\u9009\u62e9 ssh \u548c rdp , \u5426\u5219\u65e0\u6cd5\u83b7\u53d6 Windows \u8d44\u4ea7\u7684\u72b6\u6001\u53ca\u786c\u4ef6\u4fe1\u606f \u4e3b\u673a\u540d 172.16.80.21_administrator IP 172.16.80.21 \u7cfb\u7edf\u5e73\u53f0 Windows2016 \u534f\u8bae\u7ec4 rdp 3389 / ssh 22 \u7ba1\u7406\u7528\u6237 test_test_rdp01_administrator \u8282\u70b9 Default / RDP Server \u70b9\u51fb \u4fdd\u5b58 \u6d4b\u8bd5\u8d44\u4ea7\u8fde\u63a5\u63d0\u793a \u8d44\u4ea7\u521b\u5efa\u4fe1\u606f\u586b\u5199\u597d\u4fdd\u5b58\u4e4b\u540e\u9694\u51e0\u79d2\u949f\u65f6\u95f4\u5237\u65b0\u4e00\u4e0b\u7f51\u9875, ssh \u534f\u8bae\u8d44\u4ea7\u7684\u53ef\u8fde\u63a5\u56fe\u6807\u4f1a\u663e\u793a \u7eff\u8272 , \u4e14 \u786c\u4ef6\u4fe1\u606f \u4f1a\u663e\u793a\u51fa\u6765 \u5982\u679c \u53ef\u8fde\u63a5 \u7684\u56fe\u6807\u662f \u9ec4\u8272 \u6216\u8005 \u7ea2\u8272 , \u53ef\u4ee5\u70b9\u51fb \u8d44\u4ea7 \u7684 \u540d\u79f0 \uff0c\u5728\u53f3\u4fa7 \u5feb\u901f\u4fee\u6539 - \u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027 \u70b9\u51fb \u6d4b\u8bd5 \u6309\u94ae, \u6839\u636e\u9519\u8bef\u63d0\u793a\u5904\u7406 \u88ab\u8fde\u63a5 Linux \u8d44\u4ea7\u9700\u8981 python \u7ec4\u4ef6, \u4e14\u7248\u672c\u5927\u4e8e\u7b49\u4e8e 2.6 , Ubuntu \u7b49\u8d44\u4ea7\u9ed8\u8ba4\u4e0d\u5141\u8bb8 root \u7528\u6237\u8fdc\u7a0b ssh \u767b\u5f55, \u8bf7\u81ea\u884c\u5904\u7406, Windows \u8d44\u4ea7\u9700\u8981\u624b\u52a8\u5b89\u88c5 OpenSSH Server \u5982\u679c\u8d44\u4ea7\u4e0d\u80fd\u6b63\u5e38\u8fde\u63a5, \u8bf7\u68c0\u67e5 \u7ba1\u7406\u7528\u6237 \u7684 \u7528\u6237\u540d \u548c \u5bc6\u7801 \u662f\u5426\u6b63\u786e\u4ee5\u53ca\u8be5 \u7ba1\u7406\u7528\u6237 \u662f\u5426\u80fd\u4f7f\u7528 SSH \u4ece JumpServer \u4e3b\u673a\u6b63\u786e\u767b\u5f55\u5230\u8d44\u4ea7\u4e3b\u673a\u4e0a 2.3.1 \u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528 \u00b6 \u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u5e94\u7528\u7ba1\u7406 - \u6570\u636e\u5e93\u5e94\u7528 - \u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528 \u521b\u5efa mysql \u6570\u636e\u5e93 \u540d\u79f0 test_mysql01 \u7c7b\u578b MySQL \u4e3b\u673a 172.16.80.31 \u7aef\u53e3 3306 \u6570\u636e\u5e93 \u9009\u9879\u53ef\u4ee5\u7559\u7a7a, \u5982\u679c\u662f\u67d0\u4e9b\u7279\u5b9a\u7528\u6237, \u53ea\u5141\u8bb8\u8bbf\u95ee\u6307\u5b9a\u7684\u6570\u636e\u5e93, \u8fd9\u91cc\u6307\u5b9a\u6570\u636e\u5e93\u540d\u79f0\u5373\u53ef 2.4 \u521b\u5efa\u7cfb\u7edf\u7528\u6237 \u00b6 +--------------+------------+---------------+---------------+--------------+--------------+-------------+ | IP | System | System User | Password | Group | Sudo | Sftp Root | +==============+============+===============+===============+==============+==============+=============+ | 172.16.80.11 | Centos 7 | testssh01 | random pass | | ALL | / | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ | 172.16.80.21 | Windows 10 | testrdp01 | random pass | Users | | | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ | 172.16.80.23 | Mysql 5 | root | Test2020.M | | | | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ \u7cfb\u7edf\u7528\u6237\u63d0\u793a \u5728\u7406\u89e3 \u7cfb\u7edf\u7528\u6237 \u4e4b\u524d, \u4f60\u9996\u5148\u5f97\u77e5\u9053\u7cfb\u7edf\u7528\u6237\u662f\u5e72\u561b\u7528\u7684. \u5728 Jumpserver \u4e2d, \u9700\u8981\u5bf9\u8d44\u4ea7\u4e0d\u540c\u7684\u7528\u9014\u521b\u5efa\u4e0d\u540c\u7684 \u7cfb\u7edf\u7528\u6237 \u6bd4\u5982\u4e00\u4e2a \u8d44\u4ea7 , \u5f00\u53d1\u8981\u7528\u3001\u6d4b\u8bd5\u8981\u7528\u3001\u53ef\u80fd\u8fd8\u8981\u5176\u4ed6\u7684\u90e8\u95e8\u4e5f\u8981\u4f7f\u7528, \u5077\u61d2\u7684\u4eba\u53ef\u80fd\u4f1a\u7edf\u4e00\u7ed9 root \u7528\u6237, \u4f46\u662f\u8fd9\u6837\u5e76\u4e0d\u5b89\u5168 \u7cfb\u7edf\u7528\u6237\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, \u6211\u4eec\u9488\u5bf9\u4e0d\u540c\u7684\u7528\u9014\u521b\u5efa\u4e0d\u540c\u7684 \u7cfb\u7edf\u7528\u6237 , Linux \u901a\u8fc7 Sudo \u6765\u63a7\u5236\u7528\u6237\u7684\u6743\u9650, Windows \u901a\u8fc7\u7ec4\u6765\u63a7\u5236\u7528\u6237\u6743\u9650 \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u7cfb\u7edf\u7528\u6237 - \u521b\u5efa\u7cfb\u7edf\u7528\u6237 \u521b\u5efa\u4e24\u4e2a\u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_ssh01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d testssh01 \u534f\u8bae ssh Sudo ALL SFTP\u6839\u8def\u5f84 / \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_rdp01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d testrdp01 \u534f\u8bae rdp \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58 \u521b\u5efa MySQL \u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_mysql01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d root \u534f\u8bae mysql \u5bc6\u7801 Test2020.M \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58 \u4e09\u3001\u521b\u5efa\u6388\u6743\u89c4\u5219 \u00b6 3.1 \u4e3a\u7528\u6237\u5206\u914d\u8d44\u4ea7 \u00b6 +--------------+------------+---------------+-----------------+ | IP | System | System User | Jumpserver User | +==============+============+===============+=================+ | 172.16.80.11 | Centos 7 | testssh01 | admin | +--------------+------------+---------------+-----------------+ | 172.16.80.21 | Windows 10 | testrdp01 | admin | +--------------+------------+---------------+-----------------+ | 172.16.80.31 | Mysql 5 | root | admin | +--------------+------------+---------------+-----------------+ \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u6388\u6743\u7ba1\u7406 - \u8d44\u4ea7\u6388\u6743 - \u521b\u5efa\u6388\u6743\u89c4\u5219 \u521b\u5efa\u4e24\u4e2a\u6388\u6743 \u540d\u79f0 test_ssh01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u8d44\u4ea7 test_ssh01(172.16.80.11) \u7cfb\u7edf\u7528\u6237 test_ssh01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(testssh01) \u6709\u6548\u671f \u65f6\u95f4\u81ea\u884c\u5b9a\u4e49, \u7528\u6237\u53ea\u80fd\u5728\u6709\u6548\u671f\u65f6\u95f4\u5185\u8fde\u63a5\u8d44\u4ea7 \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u6388\u6743 \u540d\u79f0 test_rdp01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u8d44\u4ea7 test_rdp01(172.16.80.21) \u7cfb\u7edf\u7528\u6237 test_rdp01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(testrdp01) \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58 \u8d44\u4ea7\u6388\u6743\u63d0\u793a \u540d\u79f0 , \u6388\u6743\u7684\u540d\u79f0, \u4e0d\u80fd\u91cd\u590d \u7528\u6237 \u548c \u7528\u6237\u7ec4 \u4e8c\u9009\u4e00, \u4e0d\u63a8\u8350\u5373\u9009\u62e9 \u7528\u6237 \u53c8\u9009\u62e9 \u7528\u6237\u7ec4 \u8d44\u4ea7 \u548c \u8282\u70b9 \u4e8c\u9009\u4e00, \u9009\u62e9 \u8282\u70b9 \u4f1a\u5305\u542b \u8282\u70b9 \u4e0b\u9762\u7684\u6240\u6709 \u8d44\u4ea7 \u7cfb\u7edf\u7528\u6237 , \u53ca\u6240\u9009\u7684 \u7528\u6237 \u6216 \u7528\u6237\u7ec4 \u4e0b\u7684 \u7528\u6237 \u80fd\u901a\u8fc7\u8be5 \u7cfb\u7edf\u7528\u6237 \u4f7f\u7528\u6240\u9009 \u8282\u70b9 \u6216\u8005 \u8282\u70b9 \u4e0b\u7684 \u8d44\u4ea7 \u7528\u6237(\u7ec4) , \u8d44\u4ea7(\u8282\u70b9) , \u7cfb\u7edf\u7528\u6237 \u662f\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb, \u6240\u4ee5\u5f53\u62e5\u6709 Linux \u3001 Windows \u4e0d\u540c\u7c7b\u578b\u8d44\u4ea7\u65f6, \u5e94\u8be5\u5206\u522b\u7ed9 Linux \u8d44\u4ea7\u548c Windows \u8d44\u4ea7\u521b\u5efa \u6388\u6743\u89c4\u5219 \u4e00\u822c\u60c5\u51b5\u4e0b, \u8d44\u4ea7 \u6388\u6743\u7ed9 \u7528\u6237 , \u8282\u70b9 \u6388\u6743\u7ed9 \u7528\u6237\u7ec4 , \u4e00\u4e2a \u6388\u6743 \u53ea\u80fd\u9009\u62e9\u4e00\u4e2a \u7cfb\u7edf\u7528\u6237 3.1.1 \u4e3a\u7528\u6237\u5206\u914d\u6570\u636e\u5e93\u5e94\u7528 \u00b6 \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u6388\u6743\u7ba1\u7406 - \u6570\u636e\u5e93\u5e94\u7528 - \u521b\u5efa\u6388\u6743\u89c4\u5219 \u521b\u5efa\u6570\u636e\u5e93\u6388\u6743 \u540d\u79f0 test_mysql01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u6570\u636e\u5e93\u5e94\u7528 test_mysql01 \u7cfb\u7edf\u7528\u6237 test_mysql01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(root) \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58 \u56db\u3001\u7528\u6237\u767b\u5f55 \u00b6 \u767b\u5f55 JumpServer \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u4f1a\u8bdd\u7ba1\u7406 - Web\u7ec8\u7aef \u7528\u6237\u53ea\u80fd\u770b\u5230\u81ea\u5df1\u88ab\u7ba1\u7406\u5458\u6388\u6743\u4e86\u7684 \u8d44\u4ea7 , \u5982\u679c\u767b\u5f55\u540e\u65e0\u8d44\u4ea7, \u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u8fdb\u884c\u786e\u8ba4 \u8fde\u63a5\u8d44\u4ea7 \u5728\u6211\u7684\u8d44\u4ea7\u70b9\u51fb\u8d44\u4ea7\u53f3\u8fb9\u7684 \u8fde\u63a5 \u5feb\u901f\u8fde\u63a5\u8d44\u4ea7 \u4e5f\u53ef\u4ee5\u70b9\u51fb\u5de6\u4fa7\u680f\u7684 Web\u7ec8\u7aef \u70b9\u51fb \u8d44\u4ea7 \u540d\u5b57, \u5c31\u8fde\u4e0a\u8d44\u4ea7\u4e86 \u5982\u679c\u663e\u793a\u8fde\u63a5 \u8d85\u65f6 , \u8bf7\u53c2\u8003 FAQ \u6587\u6863\u8fdb\u884c\u5904\u7406 \u65ad\u5f00\u8d44\u4ea7 \u70b9\u51fb\u9875\u9762\u9876\u90e8\u7684 Server \u6309\u94ae\u4f1a\u5f39\u51fa\u9009\u4e2a\u9009\u9879, \u7b2c\u4e00\u4e2a\u65ad\u5f00\u6240\u9009\u7684\u8fde\u63a5, \u7b2c\u4e8c\u4e2a\u65ad\u5f00\u6240\u6709\u8fde\u63a5 \u4e5f\u53ef\u4ee5\u76f4\u63a5\u70b9\u8d44\u4ea7\u5c0f\u7a97\u53e3\u7684 X , SSH \u4f1a\u8bdd\u4e5f\u53ef\u4ee5\u8f93\u5165 exit \u6765\u9000\u51fa \u76f4\u63a5\u5173\u95ed\u9875\u9762\u4e5f\u53ef\u4ee5, \u4f46\u662f\u4e0d\u63a8\u8350 \u6587\u4ef6\u7ba1\u7406 \u70b9\u51fb \u6587\u4ef6\u7ba1\u7406 \u5148\u5728\u5de6\u8fb9\u9009\u62e9 \u8d44\u4ea7 , \u76ee\u524d\u53ea\u652f\u6301\u81ea\u52a8\u767b\u5f55\u7684 SSH \u534f\u8bae \u8d44\u4ea7 \u4e5f\u53ef\u4ee5\u4f7f\u7528 sftp \u65b9\u5f0f\u8fdb\u884c \u6587\u4ef6\u7ba1\u7406 \u4ee5\u4e0a\u5c31\u662f JumpServer \u7684\u7b80\u6613\u5165\u95e8\u4e86, JumpServer \u8fd8\u6709\u5f88\u591a\u529f\u80fd\u7b49\u5f85\u60a8\u53bb\u53d1\u73b0","title":"\u5feb\u901f\u5165\u95e8"},{"location":"admin-guide/quick_start/#_1","text":"\u4ee5\u4e0b\u64cd\u4f5c\u5747\u5728 Web \u9875\u9762\u5b8c\u6210\uff0c\u8bf7\u4f7f\u7528 admin \u7528\u6237\u767b\u9646\uff0c\u9ed8\u8ba4\u5bc6\u7801 admin","title":"\u5feb\u901f\u5165\u95e8"},{"location":"admin-guide/quick_start/#_2","text":"","title":"\u4e00\u3001\u7cfb\u7edf\u8bbe\u7f6e"},{"location":"admin-guide/quick_start/#11","text":"Warning \u5f53\u524d\u7ad9\u70b9URL \u4e0d\u8bbe\u7f6e\u7684\u8bdd\uff0c\u90ae\u4ef6\u6536\u5230\u7684\u5730\u5740\u4e3a http://localhost \u5f00\u5934 Email\u4e3b\u9898\u524d\u7f00 \u90ae\u4ef6\u7684\u6807\u9898\uff0c\u6bd4\u5982 [JMS] \u6536\u5230\u7684\u90ae\u4ef6\u4f1a\u662f [jms]\u521b\u5efa\u7528\u6237\u6210\u529f \u8fd9\u6837\u7684 \u7528\u6237\u5411\u5bfcURL \u7528\u6237\u9996\u6b21\u767b\u9646\u53ef\u4ee5\u770b\u5230\u6b64 \u8d85\u94fe\u63a5 \uff0c\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8bbe\u7f6e","title":"1.1 \u57fa\u672c\u8bbe\u7f6e"},{"location":"admin-guide/quick_start/#12","text":"\u5fc5\u987b\u8bbe\u7f6e\u624d\u80fd\u4f7f\u7528\u4e0e\u90ae\u4ef6\u76f8\u5173\u7684\u529f\u80fd \u4e0d\u53ef\u4ee5\u540c\u65f6\u52fe\u9009 \u4f7f\u7528SSL \u548c \u4f7f\u7528TLS \u4f7f\u7528SSL \u5982\u679c\u7aef\u53e3\u4f7f\u7528 465 \uff0c\u5fc5\u987b\u52fe\u9009\u6b64\u9879 \u4f7f\u7528TLS \u5982\u679c\u7aef\u53e3\u4f7f\u7528 587 \uff0c\u5fc5\u987b\u52fe\u9009\u6b64\u9879 SMTP\u4e3b\u673a \u8f93\u5165\u4f60\u6216\u8005\u4f60\u670d\u52a1\u5546\u63d0\u4f9b\u7684 smtp \u670d\u52a1\u5668, \u683c\u5f0f\uff1a smtp.qq.com SMTP\u7aef\u53e3 \u901a\u5e38\u662f 25 \uff0c\u63a8\u8350\u4f7f\u7528\u66f4\u5b89\u5168\u7684 465 \u6216\u8005 587 SMTP\u8d26\u53f7 \u901a\u5e38\u662f user@domain.com SMTP\u5bc6\u7801 \u8f93\u5165\u5bf9\u5e94\u8d26\u6237\u7684\u5bc6\u7801\uff0c\u6ce8\u610f\uff1a\u6bcf\u6b21\u6d4b\u8bd5\u90fd\u9700\u8981\u91cd\u65b0\u8f93\u5165\u5bc6\u7801 \u53d1\u9001\u8d26\u53f7 \u4e0e SMTP\u8d26\u6237 \u4fdd\u6301\u4e00\u81f4 \u6d4b\u8bd5\u6536\u4ef6\u4eba \u6d4b\u8bd5\u8fde\u63a5\u65f6\u4e00\u5b9a\u8981\u8f93\u5165","title":"1.2 \u90ae\u4ef6\u8bbe\u7f6e"},{"location":"admin-guide/quick_start/#_3","text":"\u51c6\u5907\u4e24\u4e2a\u6d4b\u8bd5\u8d44\u4ea7\u548c\u4e00\u4e2a\u6570\u636e\u5e93\u6765\u9a8c\u8bc1\u529f\u80fd +--------------+-----------------+------------+------------+---------------+---------------+ | IP | Host name | Port | System | Admin User | Password | +==============+=================+============+============+===============+===============+ | 172.16.80.11 | test_ssh01 | 22 | Centos 7 | root | Test2020.L | +--------------+-----------------+------------+------------+---------------+---------------+ | 172.16.80.21 | test_rdp01 | 3389 | Windows 10 | administrator | Test2020.W | +--------------+-----------------+------------+------------+---------------+---------------+ | 172.16.80.31 | test_mysql01 | 3306 | Mysql 5 | root | Test2020.M | +--------------+-----------------+------------+------------+---------------+---------------+ Windows \u8d44\u4ea7\u5148\u8fdb\u884c Windows SSH \u8bbe\u7f6e Mysql Server \u9700\u8981\u6388\u6743 core \u548c koko \u7684\u8fdc\u7a0b\u8bbf\u95ee\u7684\u6743\u9650 mysql -uroot grant all on * . * to 'root' @ '%' identified by 'Test2020.M' ; flush privileges ;","title":"\u4e8c\u3001\u8d44\u4ea7\u7ba1\u7406"},{"location":"admin-guide/quick_start/#21","text":"\u6839\u8282\u70b9 Default \u4e0d\u80fd\u91cd\u540d, \u53f3\u51fb\u8282\u70b9\u53ef\u4ee5\u6dfb\u52a0\u3001\u5220\u9664\u548c\u91cd\u547d\u540d\u8282\u70b9, \u4ee5\u53ca\u8fdb\u884c\u8d44\u4ea7\u76f8\u5173\u7684\u64cd\u4f5c \u8bf4\u660e \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u8d44\u4ea7\u5217\u8868 \u5148\u5728\u6839\u8282\u70b9 Default \u53f3\u952e\u65b0\u5efa SSH Server \u548c RDP Server \u4e24\u4e2a\u8282\u70b9","title":"2.1 \u7f16\u8f91\u8d44\u4ea7\u6811"},{"location":"admin-guide/quick_start/#22","text":"\u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u65b0\u5efa\u7ba1\u7406\u7528\u6237 \u521b\u5efa\u4e24\u4e2a\u7ba1\u7406\u7528\u6237, \u7ba1\u7406\u7528\u6237\u7684\u5185\u5bb9\u5c31\u662f\u4e0a\u9762\u8868\u5355\u7684 Admin User \u548c Password \u540d\u79f0\u4e0d\u80fd\u91cd\u540d, \u5bc6\u7801\u6216\u8005\u5bc6\u94a5\u4e8c\u9009\u4e00\u5373\u53ef, \u4e00\u4e9b\u8d44\u4ea7\u4e0d\u5141\u8bb8\u901a\u8fc7 \u5bc6\u7801 \u8ba4\u8bc1\u53ef\u4ee5\u6539\u7528 \u79c1\u94a5 \u8ba4\u8bc1 \u540d\u79f0 172.16.80.11_root \u7528\u6237\u540d root \u5bc6\u7801 Test2020.L \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u8d44\u4ea7\u7684 \u7ba1\u7406\u7528\u6237 \u540d\u79f0 172.16.80.21_administrator \u7528\u6237\u540d administrator \u5bc6\u7801 Test2020.W \u70b9\u51fb \u4fdd\u5b58","title":"2.2 \u521b\u5efa\u7ba1\u7406\u7528\u6237"},{"location":"admin-guide/quick_start/#23","text":"\u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u8d44\u4ea7\u5217\u8868 - \u521b\u5efa\u8d44\u4ea7 \u628a\u4e24\u4e2a\u8d44\u4ea7\u5bfc\u5165 \u4e3b\u673a\u540d\u4e0d\u80fd\u91cd\u540d \u4e3b\u673a\u540d test_ssh01 IP 172.16.80.11 \u7cfb\u7edf\u5e73\u53f0 Linux \u534f\u8bae\u7ec4 ssh 22 \u7ba1\u7406\u7528\u6237 172.16.80.11_root \u8282\u70b9 Default / SSH Server \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u8d44\u4ea7, \u6ce8\u610f\u534f\u8bae\u7ec4\u6211\u4eec\u9700\u8981\u9009\u62e9 ssh \u548c rdp , \u5426\u5219\u65e0\u6cd5\u83b7\u53d6 Windows \u8d44\u4ea7\u7684\u72b6\u6001\u53ca\u786c\u4ef6\u4fe1\u606f \u4e3b\u673a\u540d 172.16.80.21_administrator IP 172.16.80.21 \u7cfb\u7edf\u5e73\u53f0 Windows2016 \u534f\u8bae\u7ec4 rdp 3389 / ssh 22 \u7ba1\u7406\u7528\u6237 test_test_rdp01_administrator \u8282\u70b9 Default / RDP Server \u70b9\u51fb \u4fdd\u5b58 \u6d4b\u8bd5\u8d44\u4ea7\u8fde\u63a5\u63d0\u793a \u8d44\u4ea7\u521b\u5efa\u4fe1\u606f\u586b\u5199\u597d\u4fdd\u5b58\u4e4b\u540e\u9694\u51e0\u79d2\u949f\u65f6\u95f4\u5237\u65b0\u4e00\u4e0b\u7f51\u9875, ssh \u534f\u8bae\u8d44\u4ea7\u7684\u53ef\u8fde\u63a5\u56fe\u6807\u4f1a\u663e\u793a \u7eff\u8272 , \u4e14 \u786c\u4ef6\u4fe1\u606f \u4f1a\u663e\u793a\u51fa\u6765 \u5982\u679c \u53ef\u8fde\u63a5 \u7684\u56fe\u6807\u662f \u9ec4\u8272 \u6216\u8005 \u7ea2\u8272 , \u53ef\u4ee5\u70b9\u51fb \u8d44\u4ea7 \u7684 \u540d\u79f0 \uff0c\u5728\u53f3\u4fa7 \u5feb\u901f\u4fee\u6539 - \u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027 \u70b9\u51fb \u6d4b\u8bd5 \u6309\u94ae, \u6839\u636e\u9519\u8bef\u63d0\u793a\u5904\u7406 \u88ab\u8fde\u63a5 Linux \u8d44\u4ea7\u9700\u8981 python \u7ec4\u4ef6, \u4e14\u7248\u672c\u5927\u4e8e\u7b49\u4e8e 2.6 , Ubuntu \u7b49\u8d44\u4ea7\u9ed8\u8ba4\u4e0d\u5141\u8bb8 root \u7528\u6237\u8fdc\u7a0b ssh \u767b\u5f55, \u8bf7\u81ea\u884c\u5904\u7406, Windows \u8d44\u4ea7\u9700\u8981\u624b\u52a8\u5b89\u88c5 OpenSSH Server \u5982\u679c\u8d44\u4ea7\u4e0d\u80fd\u6b63\u5e38\u8fde\u63a5, \u8bf7\u68c0\u67e5 \u7ba1\u7406\u7528\u6237 \u7684 \u7528\u6237\u540d \u548c \u5bc6\u7801 \u662f\u5426\u6b63\u786e\u4ee5\u53ca\u8be5 \u7ba1\u7406\u7528\u6237 \u662f\u5426\u80fd\u4f7f\u7528 SSH \u4ece JumpServer \u4e3b\u673a\u6b63\u786e\u767b\u5f55\u5230\u8d44\u4ea7\u4e3b\u673a\u4e0a","title":"2.3 \u521b\u5efa\u8d44\u4ea7"},{"location":"admin-guide/quick_start/#231","text":"\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u5e94\u7528\u7ba1\u7406 - \u6570\u636e\u5e93\u5e94\u7528 - \u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528 \u521b\u5efa mysql \u6570\u636e\u5e93 \u540d\u79f0 test_mysql01 \u7c7b\u578b MySQL \u4e3b\u673a 172.16.80.31 \u7aef\u53e3 3306 \u6570\u636e\u5e93 \u9009\u9879\u53ef\u4ee5\u7559\u7a7a, \u5982\u679c\u662f\u67d0\u4e9b\u7279\u5b9a\u7528\u6237, \u53ea\u5141\u8bb8\u8bbf\u95ee\u6307\u5b9a\u7684\u6570\u636e\u5e93, \u8fd9\u91cc\u6307\u5b9a\u6570\u636e\u5e93\u540d\u79f0\u5373\u53ef","title":"2.3.1 \u521b\u5efa\u6570\u636e\u5e93\u5e94\u7528"},{"location":"admin-guide/quick_start/#24","text":"+--------------+------------+---------------+---------------+--------------+--------------+-------------+ | IP | System | System User | Password | Group | Sudo | Sftp Root | +==============+============+===============+===============+==============+==============+=============+ | 172.16.80.11 | Centos 7 | testssh01 | random pass | | ALL | / | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ | 172.16.80.21 | Windows 10 | testrdp01 | random pass | Users | | | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ | 172.16.80.23 | Mysql 5 | root | Test2020.M | | | | +--------------+------------+---------------+---------------+--------------+--------------+-------------+ \u7cfb\u7edf\u7528\u6237\u63d0\u793a \u5728\u7406\u89e3 \u7cfb\u7edf\u7528\u6237 \u4e4b\u524d, \u4f60\u9996\u5148\u5f97\u77e5\u9053\u7cfb\u7edf\u7528\u6237\u662f\u5e72\u561b\u7528\u7684. \u5728 Jumpserver \u4e2d, \u9700\u8981\u5bf9\u8d44\u4ea7\u4e0d\u540c\u7684\u7528\u9014\u521b\u5efa\u4e0d\u540c\u7684 \u7cfb\u7edf\u7528\u6237 \u6bd4\u5982\u4e00\u4e2a \u8d44\u4ea7 , \u5f00\u53d1\u8981\u7528\u3001\u6d4b\u8bd5\u8981\u7528\u3001\u53ef\u80fd\u8fd8\u8981\u5176\u4ed6\u7684\u90e8\u95e8\u4e5f\u8981\u4f7f\u7528, \u5077\u61d2\u7684\u4eba\u53ef\u80fd\u4f1a\u7edf\u4e00\u7ed9 root \u7528\u6237, \u4f46\u662f\u8fd9\u6837\u5e76\u4e0d\u5b89\u5168 \u7cfb\u7edf\u7528\u6237\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, \u6211\u4eec\u9488\u5bf9\u4e0d\u540c\u7684\u7528\u9014\u521b\u5efa\u4e0d\u540c\u7684 \u7cfb\u7edf\u7528\u6237 , Linux \u901a\u8fc7 Sudo \u6765\u63a7\u5236\u7528\u6237\u7684\u6743\u9650, Windows \u901a\u8fc7\u7ec4\u6765\u63a7\u5236\u7528\u6237\u6743\u9650 \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u8d44\u4ea7\u7ba1\u7406 - \u7cfb\u7edf\u7528\u6237 - \u521b\u5efa\u7cfb\u7edf\u7528\u6237 \u521b\u5efa\u4e24\u4e2a\u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_ssh01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d testssh01 \u534f\u8bae ssh Sudo ALL SFTP\u6839\u8def\u5f84 / \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_rdp01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d testrdp01 \u534f\u8bae rdp \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58 \u521b\u5efa MySQL \u7cfb\u7edf\u7528\u6237 \u540d\u79f0 test_mysql01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237 \u767b\u5f55\u6a21\u5f0f \u81ea\u52a8\u767b\u9646 \u7528\u6237\u540d root \u534f\u8bae mysql \u5bc6\u7801 Test2020.M \u5176\u4ed6\u9009\u9879\u9ed8\u8ba4, \u70b9\u51fb \u4fdd\u5b58","title":"2.4 \u521b\u5efa\u7cfb\u7edf\u7528\u6237"},{"location":"admin-guide/quick_start/#_4","text":"","title":"\u4e09\u3001\u521b\u5efa\u6388\u6743\u89c4\u5219"},{"location":"admin-guide/quick_start/#31","text":"+--------------+------------+---------------+-----------------+ | IP | System | System User | Jumpserver User | +==============+============+===============+=================+ | 172.16.80.11 | Centos 7 | testssh01 | admin | +--------------+------------+---------------+-----------------+ | 172.16.80.21 | Windows 10 | testrdp01 | admin | +--------------+------------+---------------+-----------------+ | 172.16.80.31 | Mysql 5 | root | admin | +--------------+------------+---------------+-----------------+ \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u6388\u6743\u7ba1\u7406 - \u8d44\u4ea7\u6388\u6743 - \u521b\u5efa\u6388\u6743\u89c4\u5219 \u521b\u5efa\u4e24\u4e2a\u6388\u6743 \u540d\u79f0 test_ssh01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u8d44\u4ea7 test_ssh01(172.16.80.11) \u7cfb\u7edf\u7528\u6237 test_ssh01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(testssh01) \u6709\u6548\u671f \u65f6\u95f4\u81ea\u884c\u5b9a\u4e49, \u7528\u6237\u53ea\u80fd\u5728\u6709\u6548\u671f\u65f6\u95f4\u5185\u8fde\u63a5\u8d44\u4ea7 \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58 \u518d\u521b\u5efa Windows \u6388\u6743 \u540d\u79f0 test_rdp01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u8d44\u4ea7 test_rdp01(172.16.80.21) \u7cfb\u7edf\u7528\u6237 test_rdp01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(testrdp01) \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58 \u8d44\u4ea7\u6388\u6743\u63d0\u793a \u540d\u79f0 , \u6388\u6743\u7684\u540d\u79f0, \u4e0d\u80fd\u91cd\u590d \u7528\u6237 \u548c \u7528\u6237\u7ec4 \u4e8c\u9009\u4e00, \u4e0d\u63a8\u8350\u5373\u9009\u62e9 \u7528\u6237 \u53c8\u9009\u62e9 \u7528\u6237\u7ec4 \u8d44\u4ea7 \u548c \u8282\u70b9 \u4e8c\u9009\u4e00, \u9009\u62e9 \u8282\u70b9 \u4f1a\u5305\u542b \u8282\u70b9 \u4e0b\u9762\u7684\u6240\u6709 \u8d44\u4ea7 \u7cfb\u7edf\u7528\u6237 , \u53ca\u6240\u9009\u7684 \u7528\u6237 \u6216 \u7528\u6237\u7ec4 \u4e0b\u7684 \u7528\u6237 \u80fd\u901a\u8fc7\u8be5 \u7cfb\u7edf\u7528\u6237 \u4f7f\u7528\u6240\u9009 \u8282\u70b9 \u6216\u8005 \u8282\u70b9 \u4e0b\u7684 \u8d44\u4ea7 \u7528\u6237(\u7ec4) , \u8d44\u4ea7(\u8282\u70b9) , \u7cfb\u7edf\u7528\u6237 \u662f\u4e00\u5bf9\u4e00\u7684\u5173\u7cfb, \u6240\u4ee5\u5f53\u62e5\u6709 Linux \u3001 Windows \u4e0d\u540c\u7c7b\u578b\u8d44\u4ea7\u65f6, \u5e94\u8be5\u5206\u522b\u7ed9 Linux \u8d44\u4ea7\u548c Windows \u8d44\u4ea7\u521b\u5efa \u6388\u6743\u89c4\u5219 \u4e00\u822c\u60c5\u51b5\u4e0b, \u8d44\u4ea7 \u6388\u6743\u7ed9 \u7528\u6237 , \u8282\u70b9 \u6388\u6743\u7ed9 \u7528\u6237\u7ec4 , \u4e00\u4e2a \u6388\u6743 \u53ea\u80fd\u9009\u62e9\u4e00\u4e2a \u7cfb\u7edf\u7528\u6237","title":"3.1 \u4e3a\u7528\u6237\u5206\u914d\u8d44\u4ea7"},{"location":"admin-guide/quick_start/#311","text":"\u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u6388\u6743\u7ba1\u7406 - \u6570\u636e\u5e93\u5e94\u7528 - \u521b\u5efa\u6388\u6743\u89c4\u5219 \u521b\u5efa\u6570\u636e\u5e93\u6388\u6743 \u540d\u79f0 test_mysql01_\u6d4b\u8bd5\u6388\u6743 \u7528\u6237 Administrator(admin) \u6570\u636e\u5e93\u5e94\u7528 test_mysql01 \u7cfb\u7edf\u7528\u6237 test_mysql01_\u6d4b\u8bd5\u7cfb\u7edf\u7528\u6237(root) \u4fee\u6539\u5b8c\u6210\u540e\u70b9\u51fb \u4fdd\u5b58","title":"3.1.1 \u4e3a\u7528\u6237\u5206\u914d\u6570\u636e\u5e93\u5e94\u7528"},{"location":"admin-guide/quick_start/#_5","text":"\u767b\u5f55 JumpServer \u70b9\u51fb\u9875\u9762\u5de6\u4fa7\u7684 \u4f1a\u8bdd\u7ba1\u7406 - Web\u7ec8\u7aef \u7528\u6237\u53ea\u80fd\u770b\u5230\u81ea\u5df1\u88ab\u7ba1\u7406\u5458\u6388\u6743\u4e86\u7684 \u8d44\u4ea7 , \u5982\u679c\u767b\u5f55\u540e\u65e0\u8d44\u4ea7, \u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u8fdb\u884c\u786e\u8ba4 \u8fde\u63a5\u8d44\u4ea7 \u5728\u6211\u7684\u8d44\u4ea7\u70b9\u51fb\u8d44\u4ea7\u53f3\u8fb9\u7684 \u8fde\u63a5 \u5feb\u901f\u8fde\u63a5\u8d44\u4ea7 \u4e5f\u53ef\u4ee5\u70b9\u51fb\u5de6\u4fa7\u680f\u7684 Web\u7ec8\u7aef \u70b9\u51fb \u8d44\u4ea7 \u540d\u5b57, \u5c31\u8fde\u4e0a\u8d44\u4ea7\u4e86 \u5982\u679c\u663e\u793a\u8fde\u63a5 \u8d85\u65f6 , \u8bf7\u53c2\u8003 FAQ \u6587\u6863\u8fdb\u884c\u5904\u7406 \u65ad\u5f00\u8d44\u4ea7 \u70b9\u51fb\u9875\u9762\u9876\u90e8\u7684 Server \u6309\u94ae\u4f1a\u5f39\u51fa\u9009\u4e2a\u9009\u9879, \u7b2c\u4e00\u4e2a\u65ad\u5f00\u6240\u9009\u7684\u8fde\u63a5, \u7b2c\u4e8c\u4e2a\u65ad\u5f00\u6240\u6709\u8fde\u63a5 \u4e5f\u53ef\u4ee5\u76f4\u63a5\u70b9\u8d44\u4ea7\u5c0f\u7a97\u53e3\u7684 X , SSH \u4f1a\u8bdd\u4e5f\u53ef\u4ee5\u8f93\u5165 exit \u6765\u9000\u51fa \u76f4\u63a5\u5173\u95ed\u9875\u9762\u4e5f\u53ef\u4ee5, \u4f46\u662f\u4e0d\u63a8\u8350 \u6587\u4ef6\u7ba1\u7406 \u70b9\u51fb \u6587\u4ef6\u7ba1\u7406 \u5148\u5728\u5de6\u8fb9\u9009\u62e9 \u8d44\u4ea7 , \u76ee\u524d\u53ea\u652f\u6301\u81ea\u52a8\u767b\u5f55\u7684 SSH \u534f\u8bae \u8d44\u4ea7 \u4e5f\u53ef\u4ee5\u4f7f\u7528 sftp \u65b9\u5f0f\u8fdb\u884c \u6587\u4ef6\u7ba1\u7406 \u4ee5\u4e0a\u5c31\u662f JumpServer \u7684\u7b80\u6613\u5165\u95e8\u4e86, JumpServer \u8fd8\u6709\u5f88\u591a\u529f\u80fd\u7b49\u5f85\u60a8\u53bb\u53d1\u73b0","title":"\u56db\u3001\u7528\u6237\u767b\u5f55"},{"location":"admin-guide/assets/linux_ssh/","text":"Linux SSH \u8d44\u4ea7\u8981\u6c42 \u00b6 \u8d44\u4ea7\u5fc5\u987b\u90e8\u7f72 openssh-server \u9632\u706b\u5899 ssh \u7aef\u53e3\u5fc5\u987b\u5f00\u653e\u7ed9 jumpserver \u6240\u6709\u670d\u52a1\u5668\u8bbf\u95ee \u8bf7\u68c0\u67e5 /etc/hosts.allow /etc/hosts.deny /etc/ssh/sshd_config \u662f\u5426\u6709\u767b\u5f55\u9650\u5236 \u8d44\u4ea7\u8fde\u63a5\u8d85\u65f6 timeout \u8bf7\u68c0\u67e5 /etc/ssh/sshd_config \u7684 USEDNS \u9879\u662f\u5426\u4e3a no UseDNS no","title":"Linux SSH"},{"location":"admin-guide/assets/linux_ssh/#linux-ssh","text":"\u8d44\u4ea7\u5fc5\u987b\u90e8\u7f72 openssh-server \u9632\u706b\u5899 ssh \u7aef\u53e3\u5fc5\u987b\u5f00\u653e\u7ed9 jumpserver \u6240\u6709\u670d\u52a1\u5668\u8bbf\u95ee \u8bf7\u68c0\u67e5 /etc/hosts.allow /etc/hosts.deny /etc/ssh/sshd_config \u662f\u5426\u6709\u767b\u5f55\u9650\u5236 \u8d44\u4ea7\u8fde\u63a5\u8d85\u65f6 timeout \u8bf7\u68c0\u67e5 /etc/ssh/sshd_config \u7684 USEDNS \u9879\u662f\u5426\u4e3a no UseDNS no","title":"Linux SSH \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/assets/linux_vnc/","text":"Linux VNC \u8d44\u4ea7\u8981\u6c42 \u00b6 \u8d44\u4ea7\u5fc5\u987b\u90e8\u7f72 vncserver \u9632\u706b\u5899 vncserver \u7aef\u53e3\u5fc5\u987b\u5f00\u653e\u7ed9 jumpserver \u6240\u6709\u670d\u52a1\u5668\u8bbf\u95ee Centos 7 \u793a\u4f8b yum -y groupinstall \"GNOME Desktop\" \"Graphical Administration Tools\" yum -y install tigervnc-server tigervnc cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service vi /lib/systemd/system/vncserver \\@\\: 1 .service [Service] Type = forking User =< root > ExecStartPre = /bin/ sh - c '/usr/bin/vncserver -kill :1 > /dev/null 2>&1 || :' ExecStart = /sbin/ runuser - l root - c \"/usr/bin/vncserver :1 -geometry 1280x720 -depth 24\" PIDFile = /root/ .vnc/%H% i .pid ExecStop = /bin/ sh - c '/usr/bin/vncserver -kill :1 > /dev/null 2>&1 || :' [Install] WantedBy = multi - user.target systemctl daemon-reload vncpasswd \u5b89\u88c5\u63d0\u793a\u8bbe\u7f6e\u5bc6\u7801, \u8fd9\u4e2a\u5bc6\u7801\u586b\u5728 jumpserver \u7cfb\u7edf\u7528\u6237 \u4e0a, \u7528\u6237\u540d \u4e3a\u7a7a\u4e0d\u9700\u8981\u586b\u5199 firewall-cmd --permanent --add-service vnc-server vncserver :1 :1 \u4e3a 5901 \u7aef\u53e3, \u540c\u7406 :2 \u4e3a 5902 systemctl enable vncserver@:1","title":"Linux VNC"},{"location":"admin-guide/assets/linux_vnc/#linux-vnc","text":"\u8d44\u4ea7\u5fc5\u987b\u90e8\u7f72 vncserver \u9632\u706b\u5899 vncserver \u7aef\u53e3\u5fc5\u987b\u5f00\u653e\u7ed9 jumpserver \u6240\u6709\u670d\u52a1\u5668\u8bbf\u95ee Centos 7 \u793a\u4f8b yum -y groupinstall \"GNOME Desktop\" \"Graphical Administration Tools\" yum -y install tigervnc-server tigervnc cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service vi /lib/systemd/system/vncserver \\@\\: 1 .service [Service] Type = forking User =< root > ExecStartPre = /bin/ sh - c '/usr/bin/vncserver -kill :1 > /dev/null 2>&1 || :' ExecStart = /sbin/ runuser - l root - c \"/usr/bin/vncserver :1 -geometry 1280x720 -depth 24\" PIDFile = /root/ .vnc/%H% i .pid ExecStop = /bin/ sh - c '/usr/bin/vncserver -kill :1 > /dev/null 2>&1 || :' [Install] WantedBy = multi - user.target systemctl daemon-reload vncpasswd \u5b89\u88c5\u63d0\u793a\u8bbe\u7f6e\u5bc6\u7801, \u8fd9\u4e2a\u5bc6\u7801\u586b\u5728 jumpserver \u7cfb\u7edf\u7528\u6237 \u4e0a, \u7528\u6237\u540d \u4e3a\u7a7a\u4e0d\u9700\u8981\u586b\u5199 firewall-cmd --permanent --add-service vnc-server vncserver :1 :1 \u4e3a 5901 \u7aef\u53e3, \u540c\u7406 :2 \u4e3a 5902 systemctl enable vncserver@:1","title":"Linux VNC \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/assets/telnet/","text":"Telnet \u8d44\u4ea7\u8981\u6c42 \u00b6 \u9700\u8981\u5728 Web \"\u7cfb\u7edf\u8bbe\u7f6e\"-\"\u7ec8\u7aef\u8bbe\u7f6e\" \u6dfb\u52a0\u6210\u529f\u5224\u65ad\u4ee3\u7801 \u662f \u901a\u8fc7 tenlet \u547d\u4ee4\u767b\u5f55 telnet\u8bbe\u5907 \u6210\u529f \u7684\u8fd4\u56de\u5b57\u7b26\u4e32 \u4e3e\u4f8b telnet 172 .16.0.1 Login authentication login: admin password: ********* Info: The max number or VTY users is 10, and the number of current VTY users on line is 1. \u628a <RA-L7-RD> \u5199\u5165\u5230 Web \"\u7cfb\u7edf\u8bbe\u7f6e\"-\"\u7ec8\u7aef\u8bbe\u7f6e\"-\"Telnet \u6210\u529f\u6b63\u5219\u8868\u8fbe\u5f0f\" \u91cc\u9762 <RA-L7-RD> \u6b63\u5219\u53ef\u7528 <.*> \u8868\u793a \u6216\u8005 <RA-.*> RW-F1-1 \u6b63\u5219\u53ef\u7528 RW-.* \u4e0d\u4f1a\u5199\u6b63\u5219\u76f4\u63a5\u5199\u8bbe\u5907\u540d\u5c31\u884c, \u8bbe\u59071\u540d|\u8bbe\u59072\u540d|\u8bbe\u59073\u540d|\u8bbe\u59074\u540d|success|\u6210\u529f RW-1F-1|RW-2F-1|RW-3F-1|success|\u6210\u529f <RA-L7-RD>|<RA-L6-RD>|<RA-L5-RD>|success|\u6210\u529f <.*>|.*>|success|\u6210\u529f","title":"Tetnet"},{"location":"admin-guide/assets/telnet/#telnet","text":"\u9700\u8981\u5728 Web \"\u7cfb\u7edf\u8bbe\u7f6e\"-\"\u7ec8\u7aef\u8bbe\u7f6e\" \u6dfb\u52a0\u6210\u529f\u5224\u65ad\u4ee3\u7801 \u662f \u901a\u8fc7 tenlet \u547d\u4ee4\u767b\u5f55 telnet\u8bbe\u5907 \u6210\u529f \u7684\u8fd4\u56de\u5b57\u7b26\u4e32 \u4e3e\u4f8b telnet 172 .16.0.1 Login authentication login: admin password: ********* Info: The max number or VTY users is 10, and the number of current VTY users on line is 1. \u628a <RA-L7-RD> \u5199\u5165\u5230 Web \"\u7cfb\u7edf\u8bbe\u7f6e\"-\"\u7ec8\u7aef\u8bbe\u7f6e\"-\"Telnet \u6210\u529f\u6b63\u5219\u8868\u8fbe\u5f0f\" \u91cc\u9762 <RA-L7-RD> \u6b63\u5219\u53ef\u7528 <.*> \u8868\u793a \u6216\u8005 <RA-.*> RW-F1-1 \u6b63\u5219\u53ef\u7528 RW-.* \u4e0d\u4f1a\u5199\u6b63\u5219\u76f4\u63a5\u5199\u8bbe\u5907\u540d\u5c31\u884c, \u8bbe\u59071\u540d|\u8bbe\u59072\u540d|\u8bbe\u59073\u540d|\u8bbe\u59074\u540d|success|\u6210\u529f RW-1F-1|RW-2F-1|RW-3F-1|success|\u6210\u529f <RA-L7-RD>|<RA-L6-RD>|<RA-L5-RD>|success|\u6210\u529f <.*>|.*>|success|\u6210\u529f","title":"Telnet \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/assets/windows_rdp/","text":"Windows RDP \u8d44\u4ea7\u8981\u6c42 \u00b6 \u90e8\u5206\u5b89\u88c5\u4e86 360 \u5b89\u5168\u8f6f\u4ef6\u7684\u8d44\u4ea7\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5 \u7cfb\u7edf\u5e73\u53f0 \u54ea\u4e2a\u80fd\u7528\u5c31\u7528\u54ea\u4e2a, \u6b64\u9009\u9879\u8ddf\u8d44\u4ea7\u7684\u8bbe\u7f6e\u6709\u5173 Windows 7/2008 \u00b6 \u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u8fdc\u7a0b\u8bbe\u7f6e \u8981\u52fe\u9009 \u5141\u8bb8\u8fd0\u884c\u4efb\u610f\u7248\u672c\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u8f83\u4e0d\u5b89\u5168)(L) Windows 8/10 \u00b6 \u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u7528\u6237 \u81ea\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows(2016) \u8fdc\u7a0b\u8bbe\u7f6e \u4e0d\u8981\u52fe\u9009 \u4ec5\u5141\u8bb8\u8fd0\u884c\u4f7f\u7528\u7f51\u7edc\u7ea7\u522b\u8eab\u4efd\u9a8c\u8bc1\u7684\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u5efa\u8bae)(N) Windows 2012/2016/2019 \u00b6 \u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u7528\u6237 \u81ea\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows(2016) \u8fdc\u7a0b\u8bbe\u7f6e \u4e0d\u8981\u52fe\u9009 \u4ec5\u5141\u8bb8\u8fd0\u884c\u4f7f\u7528\u7f51\u7edc\u7ea7\u522b\u8eab\u4efd\u9a8c\u8bc1\u7684\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u5efa\u8bae)(N) \u591a\u4eba\u540c\u65f6\u8fde\u63a5\u8bf7\u81ea\u884c\u90e8\u7f72 Remote Desktop Service","title":"Windows RDP"},{"location":"admin-guide/assets/windows_rdp/#windows-rdp","text":"\u90e8\u5206\u5b89\u88c5\u4e86 360 \u5b89\u5168\u8f6f\u4ef6\u7684\u8d44\u4ea7\u65e0\u6cd5\u6b63\u5e38\u8fde\u63a5 \u7cfb\u7edf\u5e73\u53f0 \u54ea\u4e2a\u80fd\u7528\u5c31\u7528\u54ea\u4e2a, \u6b64\u9009\u9879\u8ddf\u8d44\u4ea7\u7684\u8bbe\u7f6e\u6709\u5173","title":"Windows RDP \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/assets/windows_rdp/#windows-72008","text":"\u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u8fdc\u7a0b\u8bbe\u7f6e \u8981\u52fe\u9009 \u5141\u8bb8\u8fd0\u884c\u4efb\u610f\u7248\u672c\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u8f83\u4e0d\u5b89\u5168)(L)","title":"Windows 7/2008"},{"location":"admin-guide/assets/windows_rdp/#windows-810","text":"\u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u7528\u6237 \u81ea\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows(2016) \u8fdc\u7a0b\u8bbe\u7f6e \u4e0d\u8981\u52fe\u9009 \u4ec5\u5141\u8bb8\u8fd0\u884c\u4f7f\u7528\u7f51\u7edc\u7ea7\u522b\u8eab\u4efd\u9a8c\u8bc1\u7684\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u5efa\u8bae)(N)","title":"Windows 8/10"},{"location":"admin-guide/assets/windows_rdp/#windows-201220162019","text":"\u6253\u5f00\u8fdc\u7a0b\u8bbe\u7f6e \u9632\u706b\u5899\u653e\u884c rdp \u7aef\u53e3 \u7cfb\u7edf\u7528\u6237 \u81ea\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows \u7cfb\u7edf\u7528\u6237 \u624b\u52a8\u767b\u5f55 \u8bbe\u7f6e \u7cfb\u7edf\u5e73\u53f0 \u9009\u62e9 Windows(2016) \u8fdc\u7a0b\u8bbe\u7f6e \u4e0d\u8981\u52fe\u9009 \u4ec5\u5141\u8bb8\u8fd0\u884c\u4f7f\u7528\u7f51\u7edc\u7ea7\u522b\u8eab\u4efd\u9a8c\u8bc1\u7684\u8fdc\u7a0b\u684c\u9762\u7684\u8ba1\u7b97\u673a\u8fde\u63a5(\u5efa\u8bae)(N) \u591a\u4eba\u540c\u65f6\u8fde\u63a5\u8bf7\u81ea\u884c\u90e8\u7f72 Remote Desktop Service","title":"Windows 2012/2016/2019"},{"location":"admin-guide/assets/windows_ssh/","text":"Windows SSH \u8d44\u4ea7\u8981\u6c42 \u00b6 Windows \u8d44\u4ea7\u6d4b\u8bd5\u8fde\u63a5, \u83b7\u53d6\u786c\u4ef6, \u81ea\u52a8\u63a8\u9001\u9700\u8981\u8fdb\u884c\u76f8\u5173\u8bbe\u7f6e Win7 \u9700\u8981\u5347\u7ea7 powershell \u5230 3.0 \u4ee5\u4e0a, \u8be6\u60c5\u8bf7\u53c2\u8003 ansible \u5ba2\u6237\u7aef\u9700\u6c42 \u4e0b\u8f7d\u6700\u65b0\u7684 OpenSSH \u89e3\u538b\u540e\uff0c\u91cd\u547d\u540d\u5230 C:\\Program Files\\OpenSSH \u901a\u8fc7\u7ba1\u7406\u5458\u8eab\u4efd\u7684\u65b9\u5f0f\u6253\u5f00 powershell , \u5e76\u5728 powershell \u91cc\u9762\u6267\u884c\u4e0b\u9762\u547d\u4ee4 1. \u5b89\u88c5 OpenSSH \u00b6 cd \"C:\\Program Files\\OpenSSH\" powershell . exe -ExecutionPolicy Bypass -File install-sshd . ps1 2. \u8bbe\u7f6e\u9632\u706b\u5899 \u00b6 New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 \u5982\u679c win7 \u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4\u62a5\u9519\u8bf7\u6267\u884c\u6b64\u5904\u7684\u547d\u4ee4 netsh advfirewall firewall add rule name = sshd dir = in action = allow protocol = TCP localport = 22 3. \u542f\u52a8 OpenSSH \u00b6 net start sshd 4. \u8bbe\u7f6e OpenSSH \u81ea\u542f \u00b6 Set-Service sshd -StartupType Automatic ssh \u767b\u5f55\u7684\u8d26\u6237\u5bc6\u7801\u4e0e\u767b\u5f55 windows \u7cfb\u7edf\u7684\u8d26\u6237\u5bc6\u7801\u4e00\u81f4","title":"Windows SSH"},{"location":"admin-guide/assets/windows_ssh/#windows-ssh","text":"Windows \u8d44\u4ea7\u6d4b\u8bd5\u8fde\u63a5, \u83b7\u53d6\u786c\u4ef6, \u81ea\u52a8\u63a8\u9001\u9700\u8981\u8fdb\u884c\u76f8\u5173\u8bbe\u7f6e Win7 \u9700\u8981\u5347\u7ea7 powershell \u5230 3.0 \u4ee5\u4e0a, \u8be6\u60c5\u8bf7\u53c2\u8003 ansible \u5ba2\u6237\u7aef\u9700\u6c42 \u4e0b\u8f7d\u6700\u65b0\u7684 OpenSSH \u89e3\u538b\u540e\uff0c\u91cd\u547d\u540d\u5230 C:\\Program Files\\OpenSSH \u901a\u8fc7\u7ba1\u7406\u5458\u8eab\u4efd\u7684\u65b9\u5f0f\u6253\u5f00 powershell , \u5e76\u5728 powershell \u91cc\u9762\u6267\u884c\u4e0b\u9762\u547d\u4ee4","title":"Windows SSH \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/assets/windows_ssh/#1-openssh","text":"cd \"C:\\Program Files\\OpenSSH\" powershell . exe -ExecutionPolicy Bypass -File install-sshd . ps1","title":"1. \u5b89\u88c5 OpenSSH"},{"location":"admin-guide/assets/windows_ssh/#2","text":"New-NetFirewallRule -Name sshd -DisplayName 'OpenSSH Server (sshd)' -Enabled True -Direction Inbound -Protocol TCP -Action Allow -LocalPort 22 \u5982\u679c win7 \u6267\u884c\u4e0a\u9762\u7684\u547d\u4ee4\u62a5\u9519\u8bf7\u6267\u884c\u6b64\u5904\u7684\u547d\u4ee4 netsh advfirewall firewall add rule name = sshd dir = in action = allow protocol = TCP localport = 22","title":"2. \u8bbe\u7f6e\u9632\u706b\u5899"},{"location":"admin-guide/assets/windows_ssh/#3-openssh","text":"net start sshd","title":"3. \u542f\u52a8 OpenSSH"},{"location":"admin-guide/assets/windows_ssh/#4-openssh","text":"Set-Service sshd -StartupType Automatic ssh \u767b\u5f55\u7684\u8d26\u6237\u5bc6\u7801\u4e0e\u767b\u5f55 windows \u7cfb\u7edf\u7684\u8d26\u6237\u5bc6\u7801\u4e00\u81f4","title":"4. \u8bbe\u7f6e OpenSSH \u81ea\u542f"},{"location":"admin-guide/assets/windows_vnc/","text":"Windows VNC \u8d44\u4ea7\u8981\u6c42 \u00b6 VNC \u76ee\u524d\u4e0d\u652f\u6301\u52a0\u5bc6\u7684\u8fde\u63a5 \u6b63\u5e38\u5b89\u88c5\u597d RealVNC Server , \u6ce8\u610f\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5141\u8bb8\u653e\u884c\u9632\u706b\u5899 \u5728 RealVNC Server - Options - Security \u9009\u9879\u91cc\u9762\u8bbe\u7f6e Encryption \u4e3a Prefer off \u5728 RealVNC Server - Options - Security \u9009\u9879\u91cc\u9762\u9009\u62e9 Authentication \u4e3a VNC password \u70b9\u51fb\u4fdd\u5b58, \u7136\u540e\u4f1a\u63d0\u793a\u8f93\u5165 vnc \u5bc6\u7801, \u8fd9\u4e2a\u5bc6\u7801\u5c31\u662f\u7528\u6765\u8fde\u63a5 vnc server \u9ed8\u8ba4\u7684\u7aef\u53e3\u662f 5900 \u53ef\u4ee5\u5728 vnc server \u4e3b\u9875\u4e0a\u67e5\u770b, \u7528\u6237\u540d\u4e3a\u7a7a Windows VNC \u4e0d\u652f\u6301\u4f7f\u7528\u7cfb\u7edf\u81ea\u5e26\u7684\u8eab\u4efd\u8ba4\u8bc1, \u53ea\u80fd\u4f7f\u7528 vnc password \u8fdb\u884c\u8fde\u63a5","title":"Windows VNC"},{"location":"admin-guide/assets/windows_vnc/#windows-vnc","text":"VNC \u76ee\u524d\u4e0d\u652f\u6301\u52a0\u5bc6\u7684\u8fde\u63a5 \u6b63\u5e38\u5b89\u88c5\u597d RealVNC Server , \u6ce8\u610f\u5b89\u88c5\u8fc7\u7a0b\u4e2d\u5141\u8bb8\u653e\u884c\u9632\u706b\u5899 \u5728 RealVNC Server - Options - Security \u9009\u9879\u91cc\u9762\u8bbe\u7f6e Encryption \u4e3a Prefer off \u5728 RealVNC Server - Options - Security \u9009\u9879\u91cc\u9762\u9009\u62e9 Authentication \u4e3a VNC password \u70b9\u51fb\u4fdd\u5b58, \u7136\u540e\u4f1a\u63d0\u793a\u8f93\u5165 vnc \u5bc6\u7801, \u8fd9\u4e2a\u5bc6\u7801\u5c31\u662f\u7528\u6765\u8fde\u63a5 vnc server \u9ed8\u8ba4\u7684\u7aef\u53e3\u662f 5900 \u53ef\u4ee5\u5728 vnc server \u4e3b\u9875\u4e0a\u67e5\u770b, \u7528\u6237\u540d\u4e3a\u7a7a Windows VNC \u4e0d\u652f\u6301\u4f7f\u7528\u7cfb\u7edf\u81ea\u5e26\u7684\u8eab\u4efd\u8ba4\u8bc1, \u53ea\u80fd\u4f7f\u7528 vnc password \u8fdb\u884c\u8fde\u63a5","title":"Windows VNC \u8d44\u4ea7\u8981\u6c42"},{"location":"admin-guide/authentication/cas/","text":"CAS \u8ba4\u8bc1 \u00b6 \u4f7f\u7528 CAS \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 CAS \u8ba4\u8bc1 vi /opt/jumpserver/config.yml AUTH_CAS : True CAS_SERVER_URL : https://account.jumpserver.org/cas/ CAS_ROOT_PROXIED_AS : https://demo.jumpserver.org:8443 CAS_LOGOUT_COMPLETELY : False CAS_VERSION : 3 \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e AUTH_CAS : Whether to open CAS authentication. CAS_SERVER_URL : This is the only setting you must explicitly define. Set it to the base URL of your CAS source (e.g. https://account.example.com/cas/ ). CAS_ROOT_PROXIED_AS : Useful if behind a proxy server. If host is listening on http://foo.bar:8080 but request is https://foo.bar:8443 . Add CAS_ROOT_PROXIED_AS = https://foo.bar:8443 to your settings. CAS_LOGOUT_COMPLETELY : If False, logging out of the application won\u2019t log the user out of CAS as well. CAS_VERSION : The CAS protocol version to use. CAS_VERSION \u53ef\u9009 1 \u3001 2 \u3001 3 \u3001 CAS_2_SAML_1_0","title":"CAS \u8ba4\u8bc1"},{"location":"admin-guide/authentication/cas/#cas","text":"\u4f7f\u7528 CAS \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 CAS \u8ba4\u8bc1 vi /opt/jumpserver/config.yml AUTH_CAS : True CAS_SERVER_URL : https://account.jumpserver.org/cas/ CAS_ROOT_PROXIED_AS : https://demo.jumpserver.org:8443 CAS_LOGOUT_COMPLETELY : False CAS_VERSION : 3 \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e AUTH_CAS : Whether to open CAS authentication. CAS_SERVER_URL : This is the only setting you must explicitly define. Set it to the base URL of your CAS source (e.g. https://account.example.com/cas/ ). CAS_ROOT_PROXIED_AS : Useful if behind a proxy server. If host is listening on http://foo.bar:8080 but request is https://foo.bar:8443 . Add CAS_ROOT_PROXIED_AS = https://foo.bar:8443 to your settings. CAS_LOGOUT_COMPLETELY : If False, logging out of the application won\u2019t log the user out of CAS as well. CAS_VERSION : The CAS protocol version to use. CAS_VERSION \u53ef\u9009 1 \u3001 2 \u3001 3 \u3001 CAS_2_SAML_1_0","title":"CAS \u8ba4\u8bc1"},{"location":"admin-guide/authentication/ldap/","text":"LDAP \u8ba4\u8bc1 \u00b6 LDAP \u652f\u6301 \u4f7f\u7528 LADP \u4e0e Windows AD \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 username \u548c mail \u5177\u6709\u552f\u4e00\u6027, \u4e14\u4e0d\u80fd\u4e3a\u7a7a\u503c LDAP \u8bbe\u7f6e \u52fe\u9009 \u4f7f\u7528SSL LDAP\u5730\u5740 \u9700\u8981\u4f7f\u7528 ssl \u7aef\u53e3, \u9ed8\u8ba4 636 LDAP\u5730\u5740 ldap://serverurl:389 \u7ed1\u5b9aDN cn=administrator,cn=Users,dc=jumpserver,dc=org \u7528\u6237OU ou=jumpserver,dc=jumpserver,dc=org \u7528\u6237\u8fc7\u6ee4\u5668 (cn=%(user)s) LADP\u5c5e\u6027\u6620\u5c04 {\"username\": \"cn\", \"name\": \"sn\", \"email\": \"mail\"} \u542f\u52a8LDAP\u8ba4\u8bc1 \u2611\ufe0f \u9009\u9879\u8bf4\u660e DN \u4e00\u5b9a\u8981\u662f\u5b8c\u6574\u7684DN, \u4e0d\u80fd\u8df3\u8fc7OU, \u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u5de5\u5177\u67e5\u8be2 cn=admin,ou=aaa,dc=jumpserver,dc=org \u4e0d\u80fd\u7f29\u5199\u6210 cn=admin,dc=jumpserver,dc=org \u7528\u6237OU \u7528\u6237OU\u53ef\u4ee5\u53ea\u5199\u9876\u5c42OU, \u4e0d\u5199\u5b50OU ou=aaa,ou=bbb,ou=ccc,dc=jumpserver,dc=org , \u53ef\u4ee5\u53ea\u5199 ou=ccc,dc=jumpserver,dc=org \u7528\u6237\u8fc7\u6ee4\u5668 \u6839\u636e\u89c4\u5219\u5230 \u7528\u6237OU \u91cc\u9762\u53bb\u68c0\u7d22\u7528\u6237, \u652f\u6301 memberof (uid=%(user)s) \u6216 (sAMAccountName=%(user)s) LADP\u5c5e\u6027\u6620\u5c04 username name email \u8fd9\u4e09\u9879\u4e0d\u53ef\u4fee\u6539\u5220\u9664 {\"username\": \"uid\", \"name\": \"sn\", \"email\": \"mail\"} \u6216 {\"username\": \"sAMAccountName\", \"name\": \"cn\", \"email\": \"mail\"} \u6ce8\u610f: \u7528\u6237\u8fc7\u6ee4\u5668\u7528\u4ec0\u4e48\u7b5b\u9009, LDAP\u5c5e\u6027\u6620\u5c04\u5b57\u6bb5\u8981\u4e0e\u5176\u4e00\u81f4, \u8fc7\u6ee4\u5668\u7528 uid, LDAP\u5c5e\u6027\u6620\u5c04\u4e5f\u8981\u7528 uid LDAP \u7684\u90e8\u5206\u529f\u80fd\u5728 jumpserver/config.yml \u8fdb\u884c\u8bbe\u7f6e \u6839\u636e\u9700\u8981\u5f00\u542f, \u8bf7\u52ff\u7167\u6284 # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf AUTH_LDAP_SEARCH_PAGED_SIZE : 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 AUTH_LDAP_SYNC_IS_PERIODIC : True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 AUTH_LDAP_SYNC_INTERVAL : 12 # Crontab \u8868\u8fbe\u5f0f AUTH_LDAP_SYNC_CRONTAB : * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS : False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection AUTH_LDAP_OPTIONS_OPT_REFERRALS : -1","title":"LDAP \u8ba4\u8bc1"},{"location":"admin-guide/authentication/ldap/#ldap","text":"LDAP \u652f\u6301 \u4f7f\u7528 LADP \u4e0e Windows AD \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 username \u548c mail \u5177\u6709\u552f\u4e00\u6027, \u4e14\u4e0d\u80fd\u4e3a\u7a7a\u503c LDAP \u8bbe\u7f6e \u52fe\u9009 \u4f7f\u7528SSL LDAP\u5730\u5740 \u9700\u8981\u4f7f\u7528 ssl \u7aef\u53e3, \u9ed8\u8ba4 636 LDAP\u5730\u5740 ldap://serverurl:389 \u7ed1\u5b9aDN cn=administrator,cn=Users,dc=jumpserver,dc=org \u7528\u6237OU ou=jumpserver,dc=jumpserver,dc=org \u7528\u6237\u8fc7\u6ee4\u5668 (cn=%(user)s) LADP\u5c5e\u6027\u6620\u5c04 {\"username\": \"cn\", \"name\": \"sn\", \"email\": \"mail\"} \u542f\u52a8LDAP\u8ba4\u8bc1 \u2611\ufe0f \u9009\u9879\u8bf4\u660e DN \u4e00\u5b9a\u8981\u662f\u5b8c\u6574\u7684DN, \u4e0d\u80fd\u8df3\u8fc7OU, \u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6\u5de5\u5177\u67e5\u8be2 cn=admin,ou=aaa,dc=jumpserver,dc=org \u4e0d\u80fd\u7f29\u5199\u6210 cn=admin,dc=jumpserver,dc=org \u7528\u6237OU \u7528\u6237OU\u53ef\u4ee5\u53ea\u5199\u9876\u5c42OU, \u4e0d\u5199\u5b50OU ou=aaa,ou=bbb,ou=ccc,dc=jumpserver,dc=org , \u53ef\u4ee5\u53ea\u5199 ou=ccc,dc=jumpserver,dc=org \u7528\u6237\u8fc7\u6ee4\u5668 \u6839\u636e\u89c4\u5219\u5230 \u7528\u6237OU \u91cc\u9762\u53bb\u68c0\u7d22\u7528\u6237, \u652f\u6301 memberof (uid=%(user)s) \u6216 (sAMAccountName=%(user)s) LADP\u5c5e\u6027\u6620\u5c04 username name email \u8fd9\u4e09\u9879\u4e0d\u53ef\u4fee\u6539\u5220\u9664 {\"username\": \"uid\", \"name\": \"sn\", \"email\": \"mail\"} \u6216 {\"username\": \"sAMAccountName\", \"name\": \"cn\", \"email\": \"mail\"} \u6ce8\u610f: \u7528\u6237\u8fc7\u6ee4\u5668\u7528\u4ec0\u4e48\u7b5b\u9009, LDAP\u5c5e\u6027\u6620\u5c04\u5b57\u6bb5\u8981\u4e0e\u5176\u4e00\u81f4, \u8fc7\u6ee4\u5668\u7528 uid, LDAP\u5c5e\u6027\u6620\u5c04\u4e5f\u8981\u7528 uid LDAP \u7684\u90e8\u5206\u529f\u80fd\u5728 jumpserver/config.yml \u8fdb\u884c\u8bbe\u7f6e \u6839\u636e\u9700\u8981\u5f00\u542f, \u8bf7\u52ff\u7167\u6284 # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf AUTH_LDAP_SEARCH_PAGED_SIZE : 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 AUTH_LDAP_SYNC_IS_PERIODIC : True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 AUTH_LDAP_SYNC_INTERVAL : 12 # Crontab \u8868\u8fbe\u5f0f AUTH_LDAP_SYNC_CRONTAB : * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS : False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection AUTH_LDAP_OPTIONS_OPT_REFERRALS : -1","title":"LDAP \u8ba4\u8bc1"},{"location":"admin-guide/authentication/mfa/","text":"MFA \u8ba4\u8bc1 \u00b6 MFA: \u591a\u56e0\u5b50\u8ba4\u8bc1 1. \u5f00\u542f MFA \u00b6 \u542f\u7528 \u5728 \u521b\u5efa\u7528\u6237 \u6216\u8005 \u66f4\u65b0\u7528\u6237 \u65f6\u53ef\u4ee5\u6307\u5b9a \u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5f3a\u5236\u7528\u6237\u5f00\u542f \u5728 web - \u7528\u6237\u7ba1\u7406 - \u7528\u6237\u5217\u8868 \u70b9\u51fb\u7528\u6237\u8be6\u60c5, \u53ef \u5f3a\u5236\u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5168\u5c40\u542f\u7528 \u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u52fe\u9009 \u591a\u56e0\u5b50\u8ba4\u8bc1 \u6ce8\u610f: \u5f00\u542f\u540e\u6240\u6709\u7528\u6237\u90fd\u4f1a\u5f3a\u5236\u542f\u7528 MFA \u8ba4\u8bc1, \u7528\u6237\u65e0\u6cd5\u624b\u52a8\u5173\u95ed \u63a8\u8350\u8bbe\u7f6e \u63a8\u8350\u6240\u6709\u7ba1\u7406\u5458\u90fd\u5f3a\u5236\u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\u5e94\u8be5\u5f00\u542f\u5168\u5c40 MFA \u4ee5\u589e\u52a0\u5b89\u5168\u6027 2. \u5173\u95ed MFA \u00b6 \u6b63\u5e38\u542f\u7528\u7684 MFA \u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5173\u95ed \u5f3a\u5236\u542f\u7528\u7684 MFA \u9700\u8981\u7ba1\u7406\u5458\u5173\u95ed \u5168\u5c40\u542f\u7528 MFA \u65e0\u6cd5\u5173\u95ed, \u5fc5\u987b\u5148\u5728 \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u5173\u95ed\u5168\u5c40 MFA 3. \u91cd\u7f6e MFA \u00b6 \u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u5176\u4ed6\u7528\u6237\u8be6\u60c5\u91cc\u9762\u91cd\u7f6e\u8be5\u7528\u6237\u7684\u591a\u56e0\u5b50\u8ba4\u8bc1 web - \u7528\u6237\u5217\u8868 \u70b9\u51fb\u7528\u6237\u7684 \u540d\u79f0, \u5373\u53ef\u770b\u5230\u7528\u6237\u8be6\u60c5 \u5982\u679c\u662f\u7ba1\u7406\u5458\u5fd8\u8bb0\u4e86 MFA, \u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u53f0\u91cd\u7f6e source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from users.models import User u = User . objects . get ( username = 'admin' ) u . mfa_level = '0' u . otp_secret_key = '' u . save () admin \u4e3a\u4f60\u8981\u91cd\u7f6e\u7684\u8d26\u6237, \u4e5f\u53ef\u4ee5\u901a\u8fc7\u65b0\u5efa\u7ba1\u7406\u5458\u540e\u767b\u9646 web \u91cd\u7f6e\u5176\u4ed6\u7ba1\u7406\u5458\u7684 MFA source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py createsuperuser --username = user --email = user@domain.com","title":"MFA \u8ba4\u8bc1"},{"location":"admin-guide/authentication/mfa/#mfa","text":"MFA: \u591a\u56e0\u5b50\u8ba4\u8bc1","title":"MFA \u8ba4\u8bc1"},{"location":"admin-guide/authentication/mfa/#1-mfa","text":"\u542f\u7528 \u5728 \u521b\u5efa\u7528\u6237 \u6216\u8005 \u66f4\u65b0\u7528\u6237 \u65f6\u53ef\u4ee5\u6307\u5b9a \u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5f3a\u5236\u7528\u6237\u5f00\u542f \u5728 web - \u7528\u6237\u7ba1\u7406 - \u7528\u6237\u5217\u8868 \u70b9\u51fb\u7528\u6237\u8be6\u60c5, \u53ef \u5f3a\u5236\u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5168\u5c40\u542f\u7528 \u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u52fe\u9009 \u591a\u56e0\u5b50\u8ba4\u8bc1 \u6ce8\u610f: \u5f00\u542f\u540e\u6240\u6709\u7528\u6237\u90fd\u4f1a\u5f3a\u5236\u542f\u7528 MFA \u8ba4\u8bc1, \u7528\u6237\u65e0\u6cd5\u624b\u52a8\u5173\u95ed \u63a8\u8350\u8bbe\u7f6e \u63a8\u8350\u6240\u6709\u7ba1\u7406\u5458\u90fd\u5f3a\u5236\u542f\u7528\u591a\u56e0\u5b50\u8ba4\u8bc1 \u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\u5e94\u8be5\u5f00\u542f\u5168\u5c40 MFA \u4ee5\u589e\u52a0\u5b89\u5168\u6027","title":"1. \u5f00\u542f MFA"},{"location":"admin-guide/authentication/mfa/#2-mfa","text":"\u6b63\u5e38\u542f\u7528\u7684 MFA \u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5173\u95ed \u5f3a\u5236\u542f\u7528\u7684 MFA \u9700\u8981\u7ba1\u7406\u5458\u5173\u95ed \u5168\u5c40\u542f\u7528 MFA \u65e0\u6cd5\u5173\u95ed, \u5fc5\u987b\u5148\u5728 \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u5173\u95ed\u5168\u5c40 MFA","title":"2. \u5173\u95ed MFA"},{"location":"admin-guide/authentication/mfa/#3-mfa","text":"\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u5176\u4ed6\u7528\u6237\u8be6\u60c5\u91cc\u9762\u91cd\u7f6e\u8be5\u7528\u6237\u7684\u591a\u56e0\u5b50\u8ba4\u8bc1 web - \u7528\u6237\u5217\u8868 \u70b9\u51fb\u7528\u6237\u7684 \u540d\u79f0, \u5373\u53ef\u770b\u5230\u7528\u6237\u8be6\u60c5 \u5982\u679c\u662f\u7ba1\u7406\u5458\u5fd8\u8bb0\u4e86 MFA, \u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u53f0\u91cd\u7f6e source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from users.models import User u = User . objects . get ( username = 'admin' ) u . mfa_level = '0' u . otp_secret_key = '' u . save () admin \u4e3a\u4f60\u8981\u91cd\u7f6e\u7684\u8d26\u6237, \u4e5f\u53ef\u4ee5\u901a\u8fc7\u65b0\u5efa\u7ba1\u7406\u5458\u540e\u767b\u9646 web \u91cd\u7f6e\u5176\u4ed6\u7ba1\u7406\u5458\u7684 MFA source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py createsuperuser --username = user --email = user@domain.com","title":"3. \u91cd\u7f6e MFA"},{"location":"admin-guide/authentication/openid/","text":"OpenID \u8ba4\u8bc1 \u00b6 1. \u7248\u672c \u5c0f\u4e8e\u7b49\u4e8e 1.5.8 \u00b6 \u4f7f\u7528 OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 OpenID \u8ba4\u8bc1 vi /opt/jumpserver/config.yml BASE_SITE_URL : http://localhost:8080 AUTH_OPENID : True AUTH_OPENID_SERVER_URL : https://openid-auth-server.com/ AUTH_OPENID_REALM_NAME : realm-name AUTH_OPENID_CLIENT_ID : client-id AUTH_OPENID_CLIENT_SECRET : client-secret AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_SHARE_SESSION : True \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e BASE_SITE_URL : JumpServer\u670d\u52a1\u7684\u5730\u5740\uff08\u6ce8\u610f\u672b\u5c3e\u4e0d\u52a0 \"/\"\uff09 AUTH_OPENID : \u662f\u5426\u542f\u7528 OpenID \u8ba4\u8bc1 AUTH_OPENID_SERVER_URL : OpenID Server \u670d\u52a1\u7684\u5730\u5740\uff08\u6ce8\u610f\u672b\u5c3e\u8981\u52a0 \"/\"\uff09 AUTH_OPENID_REALM_NAME : realm \u540d\u79f0\uff08client \u6240\u5728\u7684\u7684 realm AUTH_OPENID_CLIENT_ID : Client ID AUTH_OPENID_CLIENT_SECRET : Client Secret AUTH_OPENID_IGNORE_SSL_VERIFICATION : \u662f\u5426\u5ffd\u7565 SSL \u9a8c\u8bc1\uff08\u5728\u5411 OpenID Server \u53d1\u9001\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\u65f6\uff09 AUTH_OPENID_SHARE_SESSION : \u662f\u5426\u5171\u4eab session\uff08\u63a7\u5236\u7528\u6237\u662f\u5426\u53ef\u4ee5\u5355\u70b9\u9000\u51fa\uff09 2. \u7248\u672c\u5927\u4e8e\u7b49\u4e8e 1.5.9 \u00b6 \u4f7f\u7528 OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 OpenID \u8ba4\u8bc1 vi /opt/jumpserver/config.yml BASE_SITE_URL : http://localhost:8080 AUTH_OPENID : False AUTH_OPENID_CLIENT_ID : client-id AUTH_OPENID_CLIENT_SECRET : client-secret AUTH_OPENID_PROVIDER_ENDPOINT : https://op-example.com/ AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : https://op-example.com/authorize AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : https://op-example.com/token AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : https://op-example.com/jwks AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : https://op-example.com/userinfo AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : https://op-example.com/logout AUTH_OPENID_PROVIDER_SIGNATURE_ALG : HS256 AUTH_OPENID_PROVIDER_SIGNATURE_KEY : None AUTH_OPENID_SCOPES : openid profile email AUTH_OPENID_ID_TOKEN_MAX_AGE : 60 AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : True AUTH_OPENID_USE_STATE : True AUTH_OPENID_USE_NONCE : True AUTH_OPENID_SHARE_SESSION : True AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_ALWAYS_UPDATE_USER : True \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e BASE_SITE_URL : JumpServer service URL AUTH_OPENID : Whether to enable OpenID authentication AUTH_OPENID_CLIENT_ID : This setting defines the Client ID that should be provided by the considered OIDC provider. AUTH_OPENID_CLIENT_SECRET : This setting defines the Client Secret that should be provided by the considered OIDC provider. AUTH_OPENID_PROVIDER_ENDPOINT : This setting defines the top-level endpoint under which all OIDC-specific endpoints are available (such as the authotization, token and userinfo endpoints). AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : This setting defines the authorization endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : This setting defines the token endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : This setting defines the JWKs endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : This setting defines the userinfo endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : This setting defines the end session endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_SIGNATURE_ALG : This setting defines the signature algorithm used by the OpenID Connect Provider to sign ID tokens. The value of this setting should be HS256 or RS256. AUTH_OPENID_PROVIDER_SIGNATURE_KEY : This setting defines the value of the key used by the OP to the sign ID tokens. It should be used only when the AUTH_OPENID_PROVIDER_SIGNATURE_ALG setting is set to RS256. AUTH_OPENID_SCOPES : This setting defines the OpenID Connect scopes to request during authentication. AUTH_OPENID_ID_TOKEN_MAX_AGE : This setting defines the amount of time (in seconds) an id_token should be considered valid. AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : This settings defines whether the id_token content can be used to retrieve userinfo claims and scopes in order to create and update the user being authenticated. AUTH_OPENID_USE_STATE : This setting defines whether or not states should be used when forging authorization requests. States are used to maintain state between the authentication request and the callback. AUTH_OPENID_USE_NONCE : This setting defines whether or not nonces should be used when forging authorization requests. Nonces are used to mitigate replay attacks. AUTH_OPENID_SHARE_SESSION : Whether or not to share session (controls whether or not the user can exit with a single point) AUTH_OPENID_IGNORE_SSL_VERIFICATION : Whether to ignore SSL validation (when sending a request to OpenID Server for data) AUTH_OPENID_ALWAYS_UPDATE_USER : Whether the user information is always updated (when the user logs in and authenticates successfully every time) \u4f8b: BASE_SITE_URL : https://demo.jumpserver.org AUTH_OPENID : True AUTH_OPENID_CLIENT_ID : jumpserver AUTH_OPENID_CLIENT_SECRET : 5222e5ed-0234-45f5-b3e7-3133f0d15f99 AUTH_OPENID_PROVIDER_ENDPOINT : https://op-example.com/ AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : /authorize AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : /token AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : /jwks AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : /userinfo AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : /logout AUTH_OPENID_PROVIDER_SIGNATURE_ALG : HS256 AUTH_OPENID_PROVIDER_SIGNATURE_KEY : None AUTH_OPENID_SCOPES : openid profile email AUTH_OPENID_ID_TOKEN_MAX_AGE : 60 AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : True AUTH_OPENID_USE_STATE : True AUTH_OPENID_USE_NONCE : True AUTH_OPENID_SHARE_SESSION : True AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_ALWAYS_UPDATE_USER : True","title":"OpenID \u8ba4\u8bc1"},{"location":"admin-guide/authentication/openid/#openid","text":"","title":"OpenID \u8ba4\u8bc1"},{"location":"admin-guide/authentication/openid/#1-158","text":"\u4f7f\u7528 OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 OpenID \u8ba4\u8bc1 vi /opt/jumpserver/config.yml BASE_SITE_URL : http://localhost:8080 AUTH_OPENID : True AUTH_OPENID_SERVER_URL : https://openid-auth-server.com/ AUTH_OPENID_REALM_NAME : realm-name AUTH_OPENID_CLIENT_ID : client-id AUTH_OPENID_CLIENT_SECRET : client-secret AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_SHARE_SESSION : True \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e BASE_SITE_URL : JumpServer\u670d\u52a1\u7684\u5730\u5740\uff08\u6ce8\u610f\u672b\u5c3e\u4e0d\u52a0 \"/\"\uff09 AUTH_OPENID : \u662f\u5426\u542f\u7528 OpenID \u8ba4\u8bc1 AUTH_OPENID_SERVER_URL : OpenID Server \u670d\u52a1\u7684\u5730\u5740\uff08\u6ce8\u610f\u672b\u5c3e\u8981\u52a0 \"/\"\uff09 AUTH_OPENID_REALM_NAME : realm \u540d\u79f0\uff08client \u6240\u5728\u7684\u7684 realm AUTH_OPENID_CLIENT_ID : Client ID AUTH_OPENID_CLIENT_SECRET : Client Secret AUTH_OPENID_IGNORE_SSL_VERIFICATION : \u662f\u5426\u5ffd\u7565 SSL \u9a8c\u8bc1\uff08\u5728\u5411 OpenID Server \u53d1\u9001\u8bf7\u6c42\u83b7\u53d6\u6570\u636e\u65f6\uff09 AUTH_OPENID_SHARE_SESSION : \u662f\u5426\u5171\u4eab session\uff08\u63a7\u5236\u7528\u6237\u662f\u5426\u53ef\u4ee5\u5355\u70b9\u9000\u51fa\uff09","title":"1. \u7248\u672c \u5c0f\u4e8e\u7b49\u4e8e 1.5.8"},{"location":"admin-guide/authentication/openid/#2-159","text":"\u4f7f\u7528 OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 OpenID \u8ba4\u8bc1 vi /opt/jumpserver/config.yml BASE_SITE_URL : http://localhost:8080 AUTH_OPENID : False AUTH_OPENID_CLIENT_ID : client-id AUTH_OPENID_CLIENT_SECRET : client-secret AUTH_OPENID_PROVIDER_ENDPOINT : https://op-example.com/ AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : https://op-example.com/authorize AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : https://op-example.com/token AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : https://op-example.com/jwks AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : https://op-example.com/userinfo AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : https://op-example.com/logout AUTH_OPENID_PROVIDER_SIGNATURE_ALG : HS256 AUTH_OPENID_PROVIDER_SIGNATURE_KEY : None AUTH_OPENID_SCOPES : openid profile email AUTH_OPENID_ID_TOKEN_MAX_AGE : 60 AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : True AUTH_OPENID_USE_STATE : True AUTH_OPENID_USE_NONCE : True AUTH_OPENID_SHARE_SESSION : True AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_ALWAYS_UPDATE_USER : True \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e BASE_SITE_URL : JumpServer service URL AUTH_OPENID : Whether to enable OpenID authentication AUTH_OPENID_CLIENT_ID : This setting defines the Client ID that should be provided by the considered OIDC provider. AUTH_OPENID_CLIENT_SECRET : This setting defines the Client Secret that should be provided by the considered OIDC provider. AUTH_OPENID_PROVIDER_ENDPOINT : This setting defines the top-level endpoint under which all OIDC-specific endpoints are available (such as the authotization, token and userinfo endpoints). AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : This setting defines the authorization endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : This setting defines the token endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : This setting defines the JWKs endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : This setting defines the userinfo endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : This setting defines the end session endpoint URL of the OIDC provider. AUTH_OPENID_PROVIDER_SIGNATURE_ALG : This setting defines the signature algorithm used by the OpenID Connect Provider to sign ID tokens. The value of this setting should be HS256 or RS256. AUTH_OPENID_PROVIDER_SIGNATURE_KEY : This setting defines the value of the key used by the OP to the sign ID tokens. It should be used only when the AUTH_OPENID_PROVIDER_SIGNATURE_ALG setting is set to RS256. AUTH_OPENID_SCOPES : This setting defines the OpenID Connect scopes to request during authentication. AUTH_OPENID_ID_TOKEN_MAX_AGE : This setting defines the amount of time (in seconds) an id_token should be considered valid. AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : This settings defines whether the id_token content can be used to retrieve userinfo claims and scopes in order to create and update the user being authenticated. AUTH_OPENID_USE_STATE : This setting defines whether or not states should be used when forging authorization requests. States are used to maintain state between the authentication request and the callback. AUTH_OPENID_USE_NONCE : This setting defines whether or not nonces should be used when forging authorization requests. Nonces are used to mitigate replay attacks. AUTH_OPENID_SHARE_SESSION : Whether or not to share session (controls whether or not the user can exit with a single point) AUTH_OPENID_IGNORE_SSL_VERIFICATION : Whether to ignore SSL validation (when sending a request to OpenID Server for data) AUTH_OPENID_ALWAYS_UPDATE_USER : Whether the user information is always updated (when the user logs in and authenticates successfully every time) \u4f8b: BASE_SITE_URL : https://demo.jumpserver.org AUTH_OPENID : True AUTH_OPENID_CLIENT_ID : jumpserver AUTH_OPENID_CLIENT_SECRET : 5222e5ed-0234-45f5-b3e7-3133f0d15f99 AUTH_OPENID_PROVIDER_ENDPOINT : https://op-example.com/ AUTH_OPENID_PROVIDER_AUTHORIZATION_ENDPOINT : /authorize AUTH_OPENID_PROVIDER_TOKEN_ENDPOINT : /token AUTH_OPENID_PROVIDER_JWKS_ENDPOINT : /jwks AUTH_OPENID_PROVIDER_USERINFO_ENDPOINT : /userinfo AUTH_OPENID_PROVIDER_END_SESSION_ENDPOINT : /logout AUTH_OPENID_PROVIDER_SIGNATURE_ALG : HS256 AUTH_OPENID_PROVIDER_SIGNATURE_KEY : None AUTH_OPENID_SCOPES : openid profile email AUTH_OPENID_ID_TOKEN_MAX_AGE : 60 AUTH_OPENID_ID_TOKEN_INCLUDE_CLAIM : True AUTH_OPENID_USE_STATE : True AUTH_OPENID_USE_NONCE : True AUTH_OPENID_SHARE_SESSION : True AUTH_OPENID_IGNORE_SSL_VERIFICATION : True AUTH_OPENID_ALWAYS_UPDATE_USER : True","title":"2. \u7248\u672c\u5927\u4e8e\u7b49\u4e8e 1.5.9"},{"location":"admin-guide/authentication/radius/","text":"Radius \u8ba4\u8bc1 \u00b6 \u4f7f\u7528 Radius \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 Radius \u8ba4\u8bc1 vi /opt/jumpserver/config.yml AUTH_RADIUS : True RADIUS_SERVER : 127.0.0.1 RADIUS_PORT : 1812 RADIUS_SECRET : radius_secret \u4fee\u6539\u5b8c\u6210\u540e\u4fdd\u5b58, \u91cd\u542f jumpserver \u5373\u53ef \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e RADIUS_SERVER : 127.0.0.1 \u662f Radius \u670d\u52a1\u5668\u7684IP\u5730\u5740 RADIUS_PORT : 1812 \u662f Radius \u670d\u52a1\u5668\u7684\u7aef\u53e3 RADIUS_SECRET : radius_secret \u662f Radius \u670d\u52a1\u5668\u7684\u9884\u5171\u4eab\u79d8\u94a5 freeradius \u7684 SECRET \u5728 clients.conf \u91cc\u9762 \u601d\u79d1\u7684 SECRET \u53ef\u4ee5\u4ece web \u9875\u9762\u7684 RADIUS Authentication Settings \u91cc\u9762\u7684 Shared Secret \u83b7\u53d6 \u534e\u4e3a\u7684 SECRET \u53ef\u4ee5\u4ece web \u9875\u9762\u7684 Authentication Options \u91cc\u9762\u7684 Shared Secret \u83b7\u53d6 \u5176\u4ed6\u5382\u5546\u7684\u8bf7\u81ea\u884c\u54a8\u8be2\u76f8\u5173\u5382\u5546\u5de5\u4f5c\u4eba\u5458 \u4f8b: AUTH_RADIUS : True RADIUS_SERVER : 47.98.186.18 RADIUS_PORT : 1812 RADIUS_SECRET : testing123","title":"Radius \u8ba4\u8bc1"},{"location":"admin-guide/authentication/radius/#radius","text":"\u4f7f\u7528 Radius \u7684\u7528\u6237\u4f5c\u4e3a jumpserver \u767b\u5f55\u7528\u6237 \u4fee\u6539 JumpServer \u914d\u7f6e\u6587\u4ef6\u542f\u7528 Radius \u8ba4\u8bc1 vi /opt/jumpserver/config.yml AUTH_RADIUS : True RADIUS_SERVER : 127.0.0.1 RADIUS_PORT : 1812 RADIUS_SECRET : radius_secret \u4fee\u6539\u5b8c\u6210\u540e\u4fdd\u5b58, \u91cd\u542f jumpserver \u5373\u53ef \u8bbe\u7f6e\u53c2\u6570\u8bf4\u660e RADIUS_SERVER : 127.0.0.1 \u662f Radius \u670d\u52a1\u5668\u7684IP\u5730\u5740 RADIUS_PORT : 1812 \u662f Radius \u670d\u52a1\u5668\u7684\u7aef\u53e3 RADIUS_SECRET : radius_secret \u662f Radius \u670d\u52a1\u5668\u7684\u9884\u5171\u4eab\u79d8\u94a5 freeradius \u7684 SECRET \u5728 clients.conf \u91cc\u9762 \u601d\u79d1\u7684 SECRET \u53ef\u4ee5\u4ece web \u9875\u9762\u7684 RADIUS Authentication Settings \u91cc\u9762\u7684 Shared Secret \u83b7\u53d6 \u534e\u4e3a\u7684 SECRET \u53ef\u4ee5\u4ece web \u9875\u9762\u7684 Authentication Options \u91cc\u9762\u7684 Shared Secret \u83b7\u53d6 \u5176\u4ed6\u5382\u5546\u7684\u8bf7\u81ea\u884c\u54a8\u8be2\u76f8\u5173\u5382\u5546\u5de5\u4f5c\u4eba\u5458 \u4f8b: AUTH_RADIUS : True RADIUS_SERVER : 47.98.186.18 RADIUS_PORT : 1812 RADIUS_SECRET : testing123","title":"Radius \u8ba4\u8bc1"},{"location":"admin-guide/organization/","text":"\u7ec4\u7ec7\u7ba1\u7406 \u00b6 \u7ec4\u7ec7\u521b\u5efa\u6210\u529f\u540e \u7ba1\u7406\u5458 \u53ef\u4ee5\u5728 web \u4e3b\u9875\u9762\u7684\u5de6\u4e0a\u89d2\u8fdb\u884c\u7ec4\u7ec7\u5207\u6362 \u7528\u6237\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u7ec4\u7ec7\uff0c\u7ba1\u7406\u5458\u4e5f\u53ef\u4ee5\u540c\u65f6\u7ba1\u7406\u591a\u4e2a\u7ec4\u7ec7 1. \u63a7\u5236\u53f0 \u00b6 source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell 2. \u6dfb\u52a0\u7ec4\u7ec7 \u00b6 from assets.models import Asset from orgs.models import Organization dev_org = Organization . objects . create ( name = '\u5f00\u53d1\u90e8' ) 3. \u521b\u5efa\u7ec4\u7ec7\u7ba1\u7406\u5458 \u00b6 from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . create ( name = '\u7528\u6237' , username = 'user' , email = 'user@jumpserver.org' ) user . set_password ( 'PassWord' ) user . save () dev_org . admins . add ( user ) dev_org . users . add ( user ) \u521b\u5efa\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u7528\u6237\u5e76\u8bbe\u7f6e\u4e3a\u7ec4\u7ec7\u7ba1\u7406\u5458 4. \u6dfb\u52a0\u7ec4\u7ec7\u7ba1\u7406\u5458 \u00b6 from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . get ( username = 'admin' ) dev_org . admins . add ( user ) \u6dfb\u52a0\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\u5e76\u8bbe\u7f6e\u4e3a\u7ec4\u7ec7\u7ba1\u7406\u5458 5. \u5f80\u7ec4\u7ec7\u6dfb\u52a0\u7528\u6237 \u00b6 from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . get ( username = 'admin' ) dev_org . users . add ( user ) \u6dfb\u52a0\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\u5230\u7ec4\u7ec7","title":"\u7ec4\u7ec7\u7ba1\u7406"},{"location":"admin-guide/organization/#_1","text":"\u7ec4\u7ec7\u521b\u5efa\u6210\u529f\u540e \u7ba1\u7406\u5458 \u53ef\u4ee5\u5728 web \u4e3b\u9875\u9762\u7684\u5de6\u4e0a\u89d2\u8fdb\u884c\u7ec4\u7ec7\u5207\u6362 \u7528\u6237\u53ef\u4ee5\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u7ec4\u7ec7\uff0c\u7ba1\u7406\u5458\u4e5f\u53ef\u4ee5\u540c\u65f6\u7ba1\u7406\u591a\u4e2a\u7ec4\u7ec7","title":"\u7ec4\u7ec7\u7ba1\u7406"},{"location":"admin-guide/organization/#1","text":"source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell","title":"1. \u63a7\u5236\u53f0"},{"location":"admin-guide/organization/#2","text":"from assets.models import Asset from orgs.models import Organization dev_org = Organization . objects . create ( name = '\u5f00\u53d1\u90e8' )","title":"2. \u6dfb\u52a0\u7ec4\u7ec7"},{"location":"admin-guide/organization/#3","text":"from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . create ( name = '\u7528\u6237' , username = 'user' , email = 'user@jumpserver.org' ) user . set_password ( 'PassWord' ) user . save () dev_org . admins . add ( user ) dev_org . users . add ( user ) \u521b\u5efa\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u7528\u6237\u5e76\u8bbe\u7f6e\u4e3a\u7ec4\u7ec7\u7ba1\u7406\u5458","title":"3. \u521b\u5efa\u7ec4\u7ec7\u7ba1\u7406\u5458"},{"location":"admin-guide/organization/#4","text":"from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . get ( username = 'admin' ) dev_org . admins . add ( user ) \u6dfb\u52a0\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\u5e76\u8bbe\u7f6e\u4e3a\u7ec4\u7ec7\u7ba1\u7406\u5458","title":"4. \u6dfb\u52a0\u7ec4\u7ec7\u7ba1\u7406\u5458"},{"location":"admin-guide/organization/#5","text":"from assets.models import Asset from orgs.models import Organization from users.models import User dev_org = Organization . objects . get ( name = '\u5f00\u53d1\u90e8' ) user = User . objects . get ( username = 'admin' ) dev_org . users . add ( user ) \u6dfb\u52a0\u4e00\u4e2a\u5df2\u7ecf\u5b58\u5728\u7684\u7528\u6237\u5230\u7ec4\u7ec7","title":"5. \u5f80\u7ec4\u7ec7\u6dfb\u52a0\u7528\u6237"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/","text":"1.0.0-1.4.3 \u5347\u7ea7\u5230 1.4.4 \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver.sql \u5347\u7ea7\u6b65\u9aa4 \u00b6 \u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u4e0d\u652f\u6301\u4ece 0.x \u7248\u672c\u5347\u7ea7\u5230 1.x \u7248\u672c \u672c\u6587\u6863\u4ec5\u9488\u5bf9 1.0.x - 1.4.3 \u7684\u7248\u672c\u5347\u7ea7\u6559\u7a0b \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 1. \u505c\u6b62 core \u00b6 cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55 2. \u5207\u6362 1.4.4 \u5206\u652f \u00b6 git fetch git checkout 1 .4.4 \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull \u5982\u679c\u4f60\u7684\u4ee3\u7801\u4e0d\u662f\u4ece github \u4ed3\u5e93\u83b7\u53d6\u7684, \u8bf7\u901a\u8fc7\u8fd9\u91cc\u7684\u9690\u85cf\u5e2e\u52a9\u6765\u8fdb\u884c\u8fc1\u79fb \u5907\u4efd\u6570\u636e\u5e93 mysqldump -uroot -p jumpserver --ignore-table = jumpserver.django_migrations > /opt/jumpserver.sql \u4e0b\u8f7d\u4ee3\u7801 mv /opt/jumpserver /opt/jumpserver_bak cd /opt git clone https://github.com/jumpserver/jumpserver.git cd jumpserver git checkout 1 .4.4 \u8fd8\u539f\u6587\u4ef6 cd /opt/jumpserver_bak for d in $( ls ) ; do if [ -d $d ] && [ -d $d /migrations ] ; then cp ${ d } /migrations/*.py /opt/jumpserver/apps/ ${ d } /migrations/ fi done 3. \u66f4\u65b0\u4f9d\u8d56 \u00b6 cd /opt/jumpserver pip install -r requirements/requirements.txt \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883, \u4e2d\u95f4\u5982\u679c\u9047\u5230\u62a5\u9519\u4e00\u822c\u662f\u4f9d\u8d56\u5305\u6ca1\u88c5\u5168, \u53ef\u4ee5\u901a\u8fc7 \u641c\u7d22\u5f15\u64ce \u89e3\u51b3 \u56fd\u5185\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u52a0\u901f pip install wheel -i https://mirrors.aliyun.com/pypi/simple/ pip install --upgrade pip setuptools -i https://mirrors.aliyun.com/pypi/simple/ pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ 4. \u5904\u7406\u5347\u7ea7 \u00b6 cd utils sh make_migrations.sh \u5982\u679c\u6267\u884c sh make_migrations.sh \u6709\u9519\u8bef, \u8bf7\u53c2\u8003\u6b64\u5904\u8fdb\u884c\u5904\u7406 You have an error in your SQL syntax; check the manual than corresponds to your MySql server version for the right syntax to use near '(6) NOT NULL' # \u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u6570\u636e\u5e93\u7248\u672c\u4e0d\u5bf9 , \u4ece 1 . 4 . x \u7248\u672c\u5f00\u59cb mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 6 , mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 5 . 56 # \u8bf7\u5347\u7ea7\u6570\u636e\u5e93\u540e\u91cd\u65b0\u64cd\u4f5c \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.1.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_04_11_migrate_permissions.sh \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.4.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_07_15_set_win_protocol_to_ssh.sh 5. \u542f\u52a8 core \u00b6 cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u8bf7\u63a5\u7740\u6839\u636e 1.4.4 \u5347\u7ea7\u5230 1.4.5 \u7684\u6587\u6863\u5347\u7ea7\u52301.4.5, \u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528","title":"1.0.0-1.4.3 \u5347\u7ea7\u5230 1.4.4"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#100-143-144","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver.sql","title":"1.0.0-1.4.3 \u5347\u7ea7\u5230 1.4.4"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#_1","text":"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u4e0d\u652f\u6301\u4ece 0.x \u7248\u672c\u5347\u7ea7\u5230 1.x \u7248\u672c \u672c\u6587\u6863\u4ec5\u9488\u5bf9 1.0.x - 1.4.3 \u7684\u7248\u672c\u5347\u7ea7\u6559\u7a0b \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6","title":"\u5347\u7ea7\u6b65\u9aa4"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#1-core","text":"cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55","title":"1. \u505c\u6b62 core"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#2-144","text":"git fetch git checkout 1 .4.4 \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull \u5982\u679c\u4f60\u7684\u4ee3\u7801\u4e0d\u662f\u4ece github \u4ed3\u5e93\u83b7\u53d6\u7684, \u8bf7\u901a\u8fc7\u8fd9\u91cc\u7684\u9690\u85cf\u5e2e\u52a9\u6765\u8fdb\u884c\u8fc1\u79fb \u5907\u4efd\u6570\u636e\u5e93 mysqldump -uroot -p jumpserver --ignore-table = jumpserver.django_migrations > /opt/jumpserver.sql \u4e0b\u8f7d\u4ee3\u7801 mv /opt/jumpserver /opt/jumpserver_bak cd /opt git clone https://github.com/jumpserver/jumpserver.git cd jumpserver git checkout 1 .4.4 \u8fd8\u539f\u6587\u4ef6 cd /opt/jumpserver_bak for d in $( ls ) ; do if [ -d $d ] && [ -d $d /migrations ] ; then cp ${ d } /migrations/*.py /opt/jumpserver/apps/ ${ d } /migrations/ fi done","title":"2. \u5207\u6362 1.4.4 \u5206\u652f"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#3","text":"cd /opt/jumpserver pip install -r requirements/requirements.txt \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883, \u4e2d\u95f4\u5982\u679c\u9047\u5230\u62a5\u9519\u4e00\u822c\u662f\u4f9d\u8d56\u5305\u6ca1\u88c5\u5168, \u53ef\u4ee5\u901a\u8fc7 \u641c\u7d22\u5f15\u64ce \u89e3\u51b3 \u56fd\u5185\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u52a0\u901f pip install wheel -i https://mirrors.aliyun.com/pypi/simple/ pip install --upgrade pip setuptools -i https://mirrors.aliyun.com/pypi/simple/ pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/","title":"3. \u66f4\u65b0\u4f9d\u8d56"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#4","text":"cd utils sh make_migrations.sh \u5982\u679c\u6267\u884c sh make_migrations.sh \u6709\u9519\u8bef, \u8bf7\u53c2\u8003\u6b64\u5904\u8fdb\u884c\u5904\u7406 You have an error in your SQL syntax; check the manual than corresponds to your MySql server version for the right syntax to use near '(6) NOT NULL' # \u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u6570\u636e\u5e93\u7248\u672c\u4e0d\u5bf9 , \u4ece 1 . 4 . x \u7248\u672c\u5f00\u59cb mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 6 , mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 5 . 56 # \u8bf7\u5347\u7ea7\u6570\u636e\u5e93\u540e\u91cd\u65b0\u64cd\u4f5c \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.1.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_04_11_migrate_permissions.sh \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.4.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_07_15_set_win_protocol_to_ssh.sh","title":"4. \u5904\u7406\u5347\u7ea7"},{"location":"admin-guide/upgrade/1.0.0-1.4.3/#5-core","text":"cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u8bf7\u63a5\u7740\u6839\u636e 1.4.4 \u5347\u7ea7\u5230 1.4.5 \u7684\u6587\u6863\u5347\u7ea7\u52301.4.5, \u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528","title":"5. \u542f\u52a8 core"},{"location":"admin-guide/upgrade/1.4.4/","text":"1.4.4 \u7248\u672c\u5347\u7ea7\u5230 1.4.5 \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_1.4.4_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_1.4.4.sql \u5347\u7ea7\u6b65\u9aa4 \u00b6 \u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.4.4 \u7684\u7248\u672c\u5347\u7ea7\u6559\u7a0b \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 1. \u505c\u6b62 core \u00b6 cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55 2. \u66f4\u65b0\u4ee3\u7801 \u00b6 cd /opt/jumpserver git fetch git checkout 1 .4.5 git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull 3. \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 \u00b6 mv config.py config_1.4.4.bak cp config_example.py config.py BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` sed -i \"s/BOOTSTRAP_TOKEN = 'PleaseChangeMe'/BOOTSTRAP_TOKEN = ' $BOOTSTRAP_TOKEN '/g\" config.py vi config.py \u628a\u65e7\u914d\u7f6e\u6587\u4ef6 config_1.4.4.bak \u7684\u76f8\u5173\u5185\u5bb9\u586b\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config.yml \u91cc\u9762 \u8bf7\u52ff\u7167\u6284, \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 #!/usr/bin/env python3 # -*- coding: utf-8 -*- \"\"\" jumpserver.config ~~~~~~~~~~~~~~~~~ Jumpserver project setting file :copyright: (c) 2014-2017 by Jumpserver Team :license: GPL v2, see LICENSE for more details. \"\"\" import os BASE_DIR = os . path . dirname ( os . path . abspath ( __file__ )) class Config : \"\"\" Jumpserver Config File Jumpserver \u914d\u7f6e\u6587\u4ef6 Jumpserver use this config for drive django framework running, You can set is value or set the same envirment value, Jumpserver look for config order: file => env => default Jumpserver\u4f7f\u7528\u914d\u7f6e\u6765\u9a71\u52a8Django\u6846\u67b6\u7684\u8fd0\u884c\uff0c \u4f60\u53ef\u4ee5\u5728\u8be5\u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff0c\u6216\u8005\u8bbe\u7f6e\u540c\u6837\u540d\u79f0\u7684\u73af\u5883\u53d8\u91cf, Jumpserver\u4f7f\u7528\u914d\u7f6e\u7684\u987a\u5e8f: \u6587\u4ef6 => \u73af\u5883\u53d8\u91cf => \u9ed8\u8ba4\u503c \"\"\" # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4 SECRET_KEY = '2vym+ky!997d5kkcc64mnz06y1mmui3lut#(^wd= %s _qj$1 %x ' # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN = 'PleaseChangeMe' # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 # DEBUG = True # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b # LOG_LEVEL = 'DEBUG' # LOG_DIR = os.path.join(BASE_DIR, 'logs') # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE = 3600 * 24 # SESSION_EXPIRE_AT_BROWSER_CLOSE = False # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE = 'sqlite3' # DB_NAME = os.path.join(BASE_DIR, 'data', 'db.sqlite3') # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE = 'mysql' DB_HOST = '127.0.0.1' DB_PORT = 3306 DB_USER = 'jumpserver' DB_PASSWORD = '' DB_NAME = 'jumpserver' # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST = '0.0.0.0' HTTP_LISTEN_PORT = 8080 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST = '127.0.0.1' REDIS_PORT = 6379 # REDIS_PASSWORD = '' # REDIS_DB_CELERY_BROKER = 3 # REDIS_DB_CACHE = 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL = 'http://localhost:8080' # AUTH_OPENID = False # True or False # AUTH_OPENID_SERVER_URL = 'https://openid-auth-server.com/' # AUTH_OPENID_REALM_NAME = 'realm-name' # AUTH_OPENID_CLIENT_ID = 'client-id' # AUTH_OPENID_CLIENT_SECRET = 'client-secret' def __init__ ( self ): pass def __getattr__ ( self , item ): return None class DevelopmentConfig ( Config ): pass class TestConfig ( Config ): pass class ProductionConfig ( Config ): pass # Default using Config settings, you can write if/else for different env config = DevelopmentConfig () 4. \u66f4\u65b0\u4f9d\u8d56 \u00b6 pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt 5. \u5904\u7406\u5347\u7ea7 \u00b6 cd utils sh make_migrations.sh \u5982\u679c\u6267\u884c sh make_migrations.sh \u6709\u9519\u8bef, \u8bf7\u53c2\u8003\u6b64\u5904\u8fdb\u884c\u5904\u7406 You have an error in your SQL syntax; check the manual than corresponds to your MySql server version for the right syntax to use near '(6) NOT NULL' # \u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u6570\u636e\u5e93\u7248\u672c\u4e0d\u5bf9 , \u4ece 1 . 4 . x \u7248\u672c\u5f00\u59cb mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 6 , mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 5 . 56 # \u8bf7\u5347\u7ea7\u6570\u636e\u5e93\u540e\u91cd\u65b0\u64cd\u4f5c \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.1.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_04_11_migrate_permissions.sh \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.4.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_07_15_set_win_protocol_to_ssh.sh 5. \u542f\u52a8 core \u00b6 cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u8bf7\u63a5\u7740\u6839\u636e 1.4.5 \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u7684\u6587\u6863\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c, \u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528","title":"1.4.4 \u5347\u7ea7\u5230 1.4.5"},{"location":"admin-guide/upgrade/1.4.4/#144-145","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_1.4.4_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_1.4.4.sql","title":"1.4.4 \u7248\u672c\u5347\u7ea7\u5230 1.4.5"},{"location":"admin-guide/upgrade/1.4.4/#_1","text":"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.4.4 \u7684\u7248\u672c\u5347\u7ea7\u6559\u7a0b \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6","title":"\u5347\u7ea7\u6b65\u9aa4"},{"location":"admin-guide/upgrade/1.4.4/#1-core","text":"cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55","title":"1. \u505c\u6b62 core"},{"location":"admin-guide/upgrade/1.4.4/#2","text":"cd /opt/jumpserver git fetch git checkout 1 .4.5 git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull","title":"2. \u66f4\u65b0\u4ee3\u7801"},{"location":"admin-guide/upgrade/1.4.4/#3","text":"mv config.py config_1.4.4.bak cp config_example.py config.py BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` sed -i \"s/BOOTSTRAP_TOKEN = 'PleaseChangeMe'/BOOTSTRAP_TOKEN = ' $BOOTSTRAP_TOKEN '/g\" config.py vi config.py \u628a\u65e7\u914d\u7f6e\u6587\u4ef6 config_1.4.4.bak \u7684\u76f8\u5173\u5185\u5bb9\u586b\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config.yml \u91cc\u9762 \u8bf7\u52ff\u7167\u6284, \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 #!/usr/bin/env python3 # -*- coding: utf-8 -*- \"\"\" jumpserver.config ~~~~~~~~~~~~~~~~~ Jumpserver project setting file :copyright: (c) 2014-2017 by Jumpserver Team :license: GPL v2, see LICENSE for more details. \"\"\" import os BASE_DIR = os . path . dirname ( os . path . abspath ( __file__ )) class Config : \"\"\" Jumpserver Config File Jumpserver \u914d\u7f6e\u6587\u4ef6 Jumpserver use this config for drive django framework running, You can set is value or set the same envirment value, Jumpserver look for config order: file => env => default Jumpserver\u4f7f\u7528\u914d\u7f6e\u6765\u9a71\u52a8Django\u6846\u67b6\u7684\u8fd0\u884c\uff0c \u4f60\u53ef\u4ee5\u5728\u8be5\u6587\u4ef6\u4e2d\u8bbe\u7f6e\uff0c\u6216\u8005\u8bbe\u7f6e\u540c\u6837\u540d\u79f0\u7684\u73af\u5883\u53d8\u91cf, Jumpserver\u4f7f\u7528\u914d\u7f6e\u7684\u987a\u5e8f: \u6587\u4ef6 => \u73af\u5883\u53d8\u91cf => \u9ed8\u8ba4\u503c \"\"\" # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4 SECRET_KEY = '2vym+ky!997d5kkcc64mnz06y1mmui3lut#(^wd= %s _qj$1 %x ' # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN = 'PleaseChangeMe' # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 # DEBUG = True # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b # LOG_LEVEL = 'DEBUG' # LOG_DIR = os.path.join(BASE_DIR, 'logs') # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE = 3600 * 24 # SESSION_EXPIRE_AT_BROWSER_CLOSE = False # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE = 'sqlite3' # DB_NAME = os.path.join(BASE_DIR, 'data', 'db.sqlite3') # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE = 'mysql' DB_HOST = '127.0.0.1' DB_PORT = 3306 DB_USER = 'jumpserver' DB_PASSWORD = '' DB_NAME = 'jumpserver' # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST = '0.0.0.0' HTTP_LISTEN_PORT = 8080 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST = '127.0.0.1' REDIS_PORT = 6379 # REDIS_PASSWORD = '' # REDIS_DB_CELERY_BROKER = 3 # REDIS_DB_CACHE = 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL = 'http://localhost:8080' # AUTH_OPENID = False # True or False # AUTH_OPENID_SERVER_URL = 'https://openid-auth-server.com/' # AUTH_OPENID_REALM_NAME = 'realm-name' # AUTH_OPENID_CLIENT_ID = 'client-id' # AUTH_OPENID_CLIENT_SECRET = 'client-secret' def __init__ ( self ): pass def __getattr__ ( self , item ): return None class DevelopmentConfig ( Config ): pass class TestConfig ( Config ): pass class ProductionConfig ( Config ): pass # Default using Config settings, you can write if/else for different env config = DevelopmentConfig ()","title":"3. \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6"},{"location":"admin-guide/upgrade/1.4.4/#4","text":"pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt","title":"4. \u66f4\u65b0\u4f9d\u8d56"},{"location":"admin-guide/upgrade/1.4.4/#5","text":"cd utils sh make_migrations.sh \u5982\u679c\u6267\u884c sh make_migrations.sh \u6709\u9519\u8bef, \u8bf7\u53c2\u8003\u6b64\u5904\u8fdb\u884c\u5904\u7406 You have an error in your SQL syntax; check the manual than corresponds to your MySql server version for the right syntax to use near '(6) NOT NULL' # \u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u6570\u636e\u5e93\u7248\u672c\u4e0d\u5bf9 , \u4ece 1 . 4 . x \u7248\u672c\u5f00\u59cb mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 6 , mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5 . 5 . 56 # \u8bf7\u5347\u7ea7\u6570\u636e\u5e93\u540e\u91cd\u65b0\u64cd\u4f5c \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.1.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_04_11_migrate_permissions.sh \u5347\u7ea7\u524d\u7248\u672c\u5c0f\u4e8e 1.4.0 \u9700\u8981\u6267\u884c\u6b64\u6b65\u9aa4 sh 2018_07_15_set_win_protocol_to_ssh.sh","title":"5. \u5904\u7406\u5347\u7ea7"},{"location":"admin-guide/upgrade/1.4.4/#5-core","text":"cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u8bf7\u63a5\u7740\u6839\u636e 1.4.5 \u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u7684\u6587\u6863\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c, \u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528","title":"5. \u542f\u52a8 core"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/","text":"1.4.5-1.4.10 \u7248\u672c\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_bak.sql \u5347\u7ea7\u6b65\u9aa4 \u00b6 \u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.4.5 1.4.6 1.4.7 1.4.8 1.4.9 1.4.10 \u7248\u672c \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 1. \u505c\u6b62 core \u00b6 cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55 2. \u66f4\u65b0\u4ee3\u7801 \u00b6 cd /opt/jumpserver git fetch git checkout master git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull 3. \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6 \u00b6 mv config.py config.py.bak cp config_example.yml config.yml vi config.yml \u628a\u65e7\u914d\u7f6e\u6587\u4ef6 config.py.bak \u7684\u76f8\u5173\u5185\u5bb9\u586b\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config.yml \u91cc\u9762 \u8bf7\u52ff\u7167\u6284, \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 127.0.0.1 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : rBi41SrDqlX4zsx9e1L0cqTP DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True 4. \u66f4\u65b0\u4f9d\u8d56 \u00b6 pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt \u5982\u679c\u5347\u7ea7\u524d\u7248\u672c\u662f 1.4.5 \u8bf7\u6267\u884c\u4e0b\u9762\u547d\u4ee4, \u4e0d\u662f 1.4.5 \u8bf7\u76f4\u63a5\u770b\u7b2c 5 \u6b65\u542f\u52a8 core cd utils vi 1 .4.4_to_1.4.5_migrations.sh # ! /bin/ bash # host = 127 . 0 . 0 . 1 # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93 ip port = 3306 # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93\u7aef\u53e3 username = root db = jumpserver # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93\u540d echo \"\u5907\u4efd\u539f\u6765\u7684 migrations\" mysqldump - u ${username} - h ${host} - P${port} - p ${db} django_migrations > django_migrations.sql.bak ret = $? if [ ${ ret } == \"0\" ];then echo \"\u5f00\u59cb\u4f7f\u7528\u65b0\u7684migrations\u6587\u4ef6\" mysql - u ${username} - h ${host} - P${port} - p ${db} < django_migrations.sql else echo \"Not valid\" fi 5. \u542f\u52a8 core \u00b6 cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d 6. \u4fee\u6539 nginx \u914d\u7f6e \u00b6 vi /etc/nginx/conf.d/jumpserver.conf \u4fee\u6539 jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload 7. \u66f4\u65b0 luna \u00b6 cd /opt rm -rf luna luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz 8. \u66f4\u65b0 koko \u00b6 1.5.2 \u7248\u672c\u5f00\u59cb coco \u88ab koko \u53d6\u4ee3, \u4e14 coco \u540e\u7eed\u4e0d\u518d\u66f4\u65b0, \u8bf7\u624b\u52a8\u505c\u6b62\u5e76\u5220\u9664 coco \u76ee\u5f55 docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9 9. \u66f4\u65b0 guacamole \u00b6 docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://<Jumpserver_url> -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = abcdefg1234 -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9 \u5347\u7ea7\u5b8c\u6210\u540e\u5230 Web \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u67e5\u770b\u7ec4\u4ef6\u662f\u5426\u5df2\u7ecf\u5728\u7ebf","title":"1.4.5-1.4.10 \u5347\u7ea7\u5230 \u6700\u65b0"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#145-1410","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_bak.sql","title":"1.4.5-1.4.10 \u7248\u672c\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#_1","text":"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.4.5 1.4.6 1.4.7 1.4.8 1.4.9 1.4.10 \u7248\u672c \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6","title":"\u5347\u7ea7\u6b65\u9aa4"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#1-core","text":"cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55","title":"1. \u505c\u6b62 core"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#2","text":"cd /opt/jumpserver git fetch git checkout master git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull","title":"2. \u66f4\u65b0\u4ee3\u7801"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#3","text":"mv config.py config.py.bak cp config_example.yml config.yml vi config.yml \u628a\u65e7\u914d\u7f6e\u6587\u4ef6 config.py.bak \u7684\u76f8\u5173\u5185\u5bb9\u586b\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 config.yml \u91cc\u9762 \u8bf7\u52ff\u7167\u6284, \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 127.0.0.1 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : rBi41SrDqlX4zsx9e1L0cqTP DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True","title":"3. \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#4","text":"pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt \u5982\u679c\u5347\u7ea7\u524d\u7248\u672c\u662f 1.4.5 \u8bf7\u6267\u884c\u4e0b\u9762\u547d\u4ee4, \u4e0d\u662f 1.4.5 \u8bf7\u76f4\u63a5\u770b\u7b2c 5 \u6b65\u542f\u52a8 core cd utils vi 1 .4.4_to_1.4.5_migrations.sh # ! /bin/ bash # host = 127 . 0 . 0 . 1 # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93 ip port = 3306 # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93\u7aef\u53e3 username = root db = jumpserver # \u4fee\u6539\u4f60\u7684 jumpserver \u6570\u636e\u5e93\u540d echo \"\u5907\u4efd\u539f\u6765\u7684 migrations\" mysqldump - u ${username} - h ${host} - P${port} - p ${db} django_migrations > django_migrations.sql.bak ret = $? if [ ${ ret } == \"0\" ];then echo \"\u5f00\u59cb\u4f7f\u7528\u65b0\u7684migrations\u6587\u4ef6\" mysql - u ${username} - h ${host} - P${port} - p ${db} < django_migrations.sql else echo \"Not valid\" fi","title":"4. \u66f4\u65b0\u4f9d\u8d56"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#5-core","text":"cd /opt/jumpserver ./jms start \u786e\u5b9a\u542f\u52a8\u6ca1\u6709\u9519\u8bef \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d","title":"5. \u542f\u52a8 core"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#6-nginx","text":"vi /etc/nginx/conf.d/jumpserver.conf \u4fee\u6539 jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload","title":"6. \u4fee\u6539 nginx \u914d\u7f6e"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#7-luna","text":"cd /opt rm -rf luna luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz","title":"7. \u66f4\u65b0 luna"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#8-koko","text":"1.5.2 \u7248\u672c\u5f00\u59cb coco \u88ab koko \u53d6\u4ee3, \u4e14 coco \u540e\u7eed\u4e0d\u518d\u66f4\u65b0, \u8bf7\u624b\u52a8\u505c\u6b62\u5e76\u5220\u9664 coco \u76ee\u5f55 docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9","title":"8. \u66f4\u65b0 koko"},{"location":"admin-guide/upgrade/1.4.5-1.4.10/#9-guacamole","text":"docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://<Jumpserver_url> -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = abcdefg1234 -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9 \u5347\u7ea7\u5b8c\u6210\u540e\u5230 Web \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u67e5\u770b\u7ec4\u4ef6\u662f\u5426\u5df2\u7ecf\u5728\u7ebf","title":"9. \u66f4\u65b0 guacamole"},{"location":"admin-guide/upgrade/1.5.0/","text":"1.5.0 \u53ca\u4e4b\u540e\u7248\u672c\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_bak.sql \u5347\u7ea7\u6b65\u9aa4 \u00b6 \u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.5.0 \u53ca\u4e4b\u540e\u7248\u672c \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6 1. \u505c\u6b62 core \u00b6 cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55 2. \u66f4\u65b0\u4ee3\u7801 \u00b6 cd /opt/jumpserver git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull 3. \u66f4\u65b0\u4f9d\u8d56 \u00b6 pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt 4. \u542f\u52a8 core \u00b6 ./jms start \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d 5. \u4fee\u6539 nginx \u914d\u7f6e \u00b6 vi /etc/nginx/conf.d/jumpserver.conf \u4fee\u6539 jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload 6. \u66f4\u65b0 luna \u00b6 cd /opt rm -rf luna luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz 7. \u66f4\u65b0 koko \u00b6 1.5.2 \u7248\u672c\u5f00\u59cb coco \u88ab koko \u53d6\u4ee3, \u4e14 coco \u540e\u7eed\u4e0d\u518d\u66f4\u65b0, \u8bf7\u624b\u52a8\u505c\u6b62\u5e76\u5220\u9664 coco \u76ee\u5f55 docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9 8. \u66f4\u65b0 guacamole \u00b6 docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://<Jumpserver_url> -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = abcdefg1234 -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9 \u5347\u7ea7\u5b8c\u6210\u540e\u5230 Web \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u67e5\u770b\u7ec4\u4ef6\u662f\u5426\u5df2\u7ecf\u5728\u7ebf","title":"1.5.0 \u53ca\u4e4b\u540e\u7248\u672c\u5347\u7ea7\u5230 \u6700\u65b0"},{"location":"admin-guide/upgrade/1.5.0/#150","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u66f4\u65b0\u524d\u8bf7\u4e00\u5b9a\u8981\u505a\u597d\u5907\u4efd \u6570\u636e\u5e93 \u548c jumpserver \u6e90\u4ee3\u7801\u7684\u5de5\u4f5c cp -r /opt/jumpserver /opt/jumpserver_bak mysqldump -uroot -p jumpserver > /opt/jumpserver_bak.sql","title":"1.5.0 \u53ca\u4e4b\u540e\u7248\u672c\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c"},{"location":"admin-guide/upgrade/1.5.0/#_1","text":"\u8bf7\u52a1\u5fc5\u8ba4\u771f\u8be6\u7ec6\u9605\u8bfb\u6bcf\u4e00\u4e2a\u6587\u5b57\u5e76\u7406\u89e3\u540e\u624d\u80fd\u64cd\u4f5c\u5347\u7ea7\u4e8b\u5b9c \u8bf7\u5148\u68c0\u67e5\u81ea\u5df1\u5404\u7ec4\u4ef6\u7684\u5f53\u524d\u7248\u672c \u672c\u6587\u6863\u4ec5\u9002\u5408 1.5.0 \u53ca\u4e4b\u540e\u7248\u672c \u4ece 1.4.x \u7248\u672c\u5f00\u59cb, mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6, mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.56 \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\u9700\u8981\u628a\u5bf9\u5e94\u65e7\u7248\u672c\u7684\u8bbe\u7f6e\u590d\u5236\u5230\u65b0\u7684\u914d\u7f6e\u6587\u4ef6","title":"\u5347\u7ea7\u6b65\u9aa4"},{"location":"admin-guide/upgrade/1.5.0/#1-core","text":"cd /opt/jumpserver source /opt/py3/bin/activate ./jms stop \u81ea\u884c\u66ff\u6362 /opt \u4e3a\u4f60\u5b9e\u9645\u5b89\u88c5\u76ee\u5f55","title":"1. \u505c\u6b62 core"},{"location":"admin-guide/upgrade/1.5.0/#2","text":"cd /opt/jumpserver git pull \u5982\u679c\u6267\u884c git pull \u63d0\u793a error, \u8bf7\u6309\u7167\u63d0\u793a\u81ea\u884c\u5904\u7406 \u63d0\u793a error: Your local changes to the following file would be overwritten by merge git reset --hard git pull","title":"2. \u66f4\u65b0\u4ee3\u7801"},{"location":"admin-guide/upgrade/1.5.0/#3","text":"pip install wheel pip install --upgrade pip setuptools pip install -r requirements/requirements.txt","title":"3. \u66f4\u65b0\u4f9d\u8d56"},{"location":"admin-guide/upgrade/1.5.0/#4-core","text":"./jms start \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d","title":"4. \u542f\u52a8 core"},{"location":"admin-guide/upgrade/1.5.0/#5-nginx","text":"vi /etc/nginx/conf.d/jumpserver.conf \u4fee\u6539 jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload","title":"5. \u4fee\u6539 nginx \u914d\u7f6e"},{"location":"admin-guide/upgrade/1.5.0/#6-luna","text":"cd /opt rm -rf luna luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz","title":"6. \u66f4\u65b0 luna"},{"location":"admin-guide/upgrade/1.5.0/#7-koko","text":"1.5.2 \u7248\u672c\u5f00\u59cb coco \u88ab koko \u53d6\u4ee3, \u4e14 coco \u540e\u7eed\u4e0d\u518d\u66f4\u65b0, \u8bf7\u624b\u52a8\u505c\u6b62\u5e76\u5220\u9664 coco \u76ee\u5f55 docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9","title":"7. \u66f4\u65b0 koko"},{"location":"admin-guide/upgrade/1.5.0/#8-guacamole","text":"docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://<Jumpserver_url> -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://192.168.244.144:8080 -e BOOTSTRAP_TOKEN = abcdefg1234 -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9 \u5347\u7ea7\u5b8c\u6210\u540e\u5230 Web \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u67e5\u770b\u7ec4\u4ef6\u662f\u5426\u5df2\u7ecf\u5728\u7ebf","title":"8. \u66f4\u65b0 guacamole"},{"location":"admin-guide/upgrade/other/","text":"\u5176\u4ed6\u65b9\u5f0f\u5347\u7ea7\u8bf4\u660e \u00b6 \u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 \u6781\u901f\u5b89\u88c5\u5347\u7ea7 \u00b6 cd /opt/setuptools git pull ./jmsctl.sh upgrade \u53ef\u4ee5\u4f7f\u7528 ./jmsctl.sh -h \u67e5\u770b\u5e2e\u52a9 docker \u5347\u7ea7 \u00b6 \u8bf7\u4e00\u5b9a\u8981\u5148\u505a\u597d\u5907\u4efd \u5982\u679c\u5df2\u7ecf\u505a\u4e86\u5bb9\u5668\u6301\u4e45\u5316, \u76f4\u63a5\u66f4\u65b0\u955c\u50cf\u7136\u540e\u6302\u8f7d /var/lib/mysql \u548c /opt/jumpserver/data \u76ee\u5f55\u542f\u52a8\u5373\u53ef docker stop jms_all docker rm jms_all docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -v /opt/jumpserver/mysql:/var/lib/mysql \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ jumpserver/jms_all:1.5.9 \u5982\u679c\u6ca1\u6709\u505a\u5bb9\u5668\u6301\u4e45\u5316, \u9700\u8981\u5148\u5c06\u6587\u4ef6\u62f7\u51fa mkdir /opt/jumpserver docker cp jms_all:/opt/jumpserver/data /opt/jumpserver/data docker cp jms_all:/var/lib/mysql /opt/jumpserver/mysql \u7136\u540e\u6302\u8f7d\u5230\u65b0\u7248\u672c\u91cc\u9762 docker stop jms_all docker rm jms_all docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -v /opt/jumpserver/mysql:/var/lib/mysql \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ jumpserver/jms_all:1.5.9 \u5982\u679c\u6570\u636e\u5e93\u5df2\u7ecf\u5916\u7f6e, \u5219\u53ea\u9700\u8981\u6302\u8f7d jumpserver/data \u5373\u53ef docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ -e DB_HOST = 192 .168.x.x \\ -e DB_PORT = 3306 \\ -e DB_USER = root \\ -e DB_PASSWORD = xxx \\ -e DB_NAME = jumpserver \\ jumpserver/jms_all:1.5.9 docker-compose \u5347\u7ea7 \u00b6 \u5bb9\u5668\u9ed8\u8ba4\u5df2\u7ecf\u505a\u597d\u4e86\u6301\u4e45\u5316 docker volume ls cd /opt/Dockerfile docker-compose down git pull cat docker-compose.yml \u6ce8\u610f, \u65b0\u7248\u672c\u66f4\u6539\u4e86 jumpserver/data \u6302\u8f7d\u76ee\u5f55, \u8bf7\u81ea\u884c\u5b8c\u6210\u66ff\u6362\u6216\u8005\u8fd8\u539f docker-compose up -d ansible-playbook \u5347\u7ea7 \u00b6 \u6ce8\u610f\u505a\u597d\u5907\u4efd\u5de5\u4f5c ansible-playbook upgrade.yml","title":"\u5176\u4ed6\u90e8\u7f72\u65b9\u5f0f\u5347\u7ea7\u8bf4\u660e"},{"location":"admin-guide/upgrade/other/#_1","text":"\u5347\u7ea7\u53ca\u8fc1\u79fb\u8bf7\u4fdd\u6301 SECRET_KEY \u4e0e\u65e7\u7248\u672c\u4e00\u81f4, \u5426\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u52a0\u5bc6\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6","title":"\u5176\u4ed6\u65b9\u5f0f\u5347\u7ea7\u8bf4\u660e"},{"location":"admin-guide/upgrade/other/#_2","text":"cd /opt/setuptools git pull ./jmsctl.sh upgrade \u53ef\u4ee5\u4f7f\u7528 ./jmsctl.sh -h \u67e5\u770b\u5e2e\u52a9","title":"\u6781\u901f\u5b89\u88c5\u5347\u7ea7"},{"location":"admin-guide/upgrade/other/#docker","text":"\u8bf7\u4e00\u5b9a\u8981\u5148\u505a\u597d\u5907\u4efd \u5982\u679c\u5df2\u7ecf\u505a\u4e86\u5bb9\u5668\u6301\u4e45\u5316, \u76f4\u63a5\u66f4\u65b0\u955c\u50cf\u7136\u540e\u6302\u8f7d /var/lib/mysql \u548c /opt/jumpserver/data \u76ee\u5f55\u542f\u52a8\u5373\u53ef docker stop jms_all docker rm jms_all docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -v /opt/jumpserver/mysql:/var/lib/mysql \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ jumpserver/jms_all:1.5.9 \u5982\u679c\u6ca1\u6709\u505a\u5bb9\u5668\u6301\u4e45\u5316, \u9700\u8981\u5148\u5c06\u6587\u4ef6\u62f7\u51fa mkdir /opt/jumpserver docker cp jms_all:/opt/jumpserver/data /opt/jumpserver/data docker cp jms_all:/var/lib/mysql /opt/jumpserver/mysql \u7136\u540e\u6302\u8f7d\u5230\u65b0\u7248\u672c\u91cc\u9762 docker stop jms_all docker rm jms_all docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -v /opt/jumpserver/mysql:/var/lib/mysql \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ jumpserver/jms_all:1.5.9 \u5982\u679c\u6570\u636e\u5e93\u5df2\u7ecf\u5916\u7f6e, \u5219\u53ea\u9700\u8981\u6302\u8f7d jumpserver/data \u5373\u53ef docker run --name jms_all -d \\ -v /opt/jumpserver/data:/opt/jumpserver/data \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ -e DB_HOST = 192 .168.x.x \\ -e DB_PORT = 3306 \\ -e DB_USER = root \\ -e DB_PASSWORD = xxx \\ -e DB_NAME = jumpserver \\ jumpserver/jms_all:1.5.9","title":"docker \u5347\u7ea7"},{"location":"admin-guide/upgrade/other/#docker-compose","text":"\u5bb9\u5668\u9ed8\u8ba4\u5df2\u7ecf\u505a\u597d\u4e86\u6301\u4e45\u5316 docker volume ls cd /opt/Dockerfile docker-compose down git pull cat docker-compose.yml \u6ce8\u610f, \u65b0\u7248\u672c\u66f4\u6539\u4e86 jumpserver/data \u6302\u8f7d\u76ee\u5f55, \u8bf7\u81ea\u884c\u5b8c\u6210\u66ff\u6362\u6216\u8005\u8fd8\u539f docker-compose up -d","title":"docker-compose \u5347\u7ea7"},{"location":"admin-guide/upgrade/other/#ansible-playbook","text":"\u6ce8\u610f\u505a\u597d\u5907\u4efd\u5de5\u4f5c ansible-playbook upgrade.yml","title":"ansible-playbook \u5347\u7ea7"},{"location":"dev/rest_api/","text":"API\u6587\u6863 \u00b6 Api\u5730\u5740 \u00b6 http://HOST:PORT/api/{VERSION}/{APP}/{RESOURCE}/ http://HOST:PORT/api/{VERSION}/{APP}/{RESOURCE}/{RESOURCEID}/ \u8d44\u4ea7\u5217\u8868 http://localhost/api/v1/assets/assets/ \u8d44\u4ea7\u8be6\u60c5 http://localhost/api/v1/assets/assets/2c56fd37-db65-40ed-b787-b65a98635f12/ Api\u5217\u8868 \u00b6 \u901a\u8fc7\u8bbf\u95ee http://JumpServer\u7684URL\u5730\u5740/docs \u6765\u8bbf\u95ee(\u5982 http://192.168.244.144/docs ) \u9700\u8981\u6253\u5f00 debug \u6a21\u5f0f vi jumpserver/config.yml DEBUG : true API\u8ba4\u8bc1 \u00b6 JumpServer Api \u652f\u6301\u7684\u8ba4\u8bc1\u6709\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f Session \u767b\u5f55\u540e\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528session_id\u4f5c\u4e3a\u8ba4\u8bc1\u65b9\u5f0f Token \u83b7\u53d6\u4e00\u6b21\u6027Token\uff0c\u8be5Token\u6709\u6709\u6548\u671f, \u8fc7\u671f\u4f5c\u5e9f Private Token \u6c38\u4e45Token Access Key\u7b7e\u540d \u5bf9Http Header\u8fdb\u884c\u7b7e\u540d Session \u7528\u6237\u901a\u8fc7\u9875\u9762\u540e\u767b\u5f55\uff0ccookie\u4e2d\u4f1a\u5b58\u5728 sessionid, \u8bf7\u6c42\u65f6\u540c\u6837\u628asessionid\u653e\u5230 cookie\u4e2d Token \u4f7f\u7528\u8d26\u53f7\u5bc6\u7801\u8c03\u7528 Api\u83b7\u53d6token\uff0c\u5982\u679c\u542f\u7528\u4e86MFA\uff0c\u5219\u9700\u8981\u4e24\u6b65\u9a8c\u8bc1 curl -X POST http://localhost/api/v1/authentication/auth/ \\ -H 'Content-Type: application/json' \\ -d '{\"username\": \"admin\", \"password\": \"admin\"}' \u4ee3\u7801: import requests import json from pprint import def get_token (): url = 'https://demo.jumpserver.org/api/v1/authentication/auth/' query_args = { \"username\" : \"admin\" , \"password\" : \"admin\" } response = requests . post ( url , data = query_args ) return json . loads ( response . text )[ 'token' ] def get_user_info (): url = 'https://demo.jumpserver.org/api/v1/users/users/' token = get_token () header_info = { \"Authorization\" : 'Bearer ' + token } response = requests . get ( url , headers = header_info ) print ( json . loads ( response . text )) get_user_info () Private Token source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell << EOF from users.models import User u = User.objects.get(username='admin') u.create_private_token() EOF \u5982\u679c\u751f\u6210\u62a5\u9519, \u8868\u793a\u5df2\u7ecf\u5b58\u5728 private_token, \u76f4\u63a5\u83b7\u53d6\u5373\u53ef u . private_token Access Key Access key \u7b7e\u540d\u673a\u5236\u662f\u4e3a\u4e86\u5b89\u5168\uff0c IETF \u53d1\u5e03\u7684\u6cd5\u6848 \u8be6\u89c1\u6b64\u5904 \u8ba4\u8bc1\u7684\u539f\u7406\u662f: \u7528\u6237\u6709\u4e00\u4e2a access key , key\u6709ID ( keyId ) \u548c\u5bc6\u94a5 ( keySecret ), \u8fd9\u4e2a key\u662f\u9884\u751f\u6210\u7684 \uff0c\u8bf7\u6c42\u8005\u548c\u670d\u52a1\u5668\u90fd\u77e5\u6653 \u7528\u6237\u8bf7\u6c42\u65f6 \u5c06\u8bf7\u6c42\u7684 \u5730\u5740\u3001\u8bf7\u6c42\u65b9\u6cd5\u3001\u65f6\u95f4\u7b49\u4f7f\u7528 \u5bc6\u94a5 ( \u67d0\u79cd\u5bf9\u79f0\u7b97\u6cd5 ) \u8fdb\u884c\u52a0\u5bc6\uff0c\u4f5c\u4e3a\u7b7e\u540d \u8fde\u540c keyId \u4e00\u540c\u653e\u5230 header \u4e2d\u53d1\u7ed9\u670d\u52a1\u5668 Authorization : Signature keyId = \"Test\" , algorithm = \"rsa-sha256\" , signature = \"jKyvPcxB4JbmYY4mByyBY7cZfNl4OW9HpFQlG7N4YcJPteKTu4MW CLyk+gIr0wDgqtLWf9NLpMAMimdfsH7FSWGfbMFSrsVTHNTk0rK3usrfFnti1dx sM4jl0kYJCKTGI/UWkqiaxwNiKqGcdlEDrTcUhhsFsOIo8VhddmZTZ8w=\" \u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u6839\u636e keyId\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u5230keySecret , \u89e3\u5bc6\u7b7e\u540d\uff0c\u6bd4\u5bf9 \u7b7e\u540d\u5185\u5bb9\u548c\u8bf7\u6c42\u7684\u5b57\u6bb5\u662f\u5426\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u81f4\uff0c\u8ba4\u8bc1\u6210\u529f\uff0c\u5426\u5219\u5931\u8d25 python \u4f7f\u7528 requests \u8bf7\u6c42\u793a\u4f8b \u5b89\u88c5\u4f9d\u8d56 pip install requests drf-httpsig python \u4ee3\u7801 import requests from httpsig.requests_auth import HTTPSignatureAuth KEY_ID = 'su-key' SECRET = 'my secret string' signature_headers = [ '(request-target)' , 'accept' , 'date' , 'host' ] headers = { 'Accept' : 'application/json' , 'Date' : \"Mon, 17 Feb 2014 06:11:05 GMT\" } auth = HTTPSignatureAuth ( key_id = KEY_ID , secret = SECRET , algorithm = 'hmac-sha256' , headers = signature_headers ) req = requests . get ( 'http://localhost/api/v1/users/users/' , auth = auth , headers = headers ) print ( req . content )","title":"API\u6587\u6863"},{"location":"dev/rest_api/#api","text":"","title":"API\u6587\u6863"},{"location":"dev/rest_api/#api_1","text":"http://HOST:PORT/api/{VERSION}/{APP}/{RESOURCE}/ http://HOST:PORT/api/{VERSION}/{APP}/{RESOURCE}/{RESOURCEID}/ \u8d44\u4ea7\u5217\u8868 http://localhost/api/v1/assets/assets/ \u8d44\u4ea7\u8be6\u60c5 http://localhost/api/v1/assets/assets/2c56fd37-db65-40ed-b787-b65a98635f12/","title":"Api\u5730\u5740"},{"location":"dev/rest_api/#api_2","text":"\u901a\u8fc7\u8bbf\u95ee http://JumpServer\u7684URL\u5730\u5740/docs \u6765\u8bbf\u95ee(\u5982 http://192.168.244.144/docs ) \u9700\u8981\u6253\u5f00 debug \u6a21\u5f0f vi jumpserver/config.yml DEBUG : true","title":"Api\u5217\u8868"},{"location":"dev/rest_api/#api_3","text":"JumpServer Api \u652f\u6301\u7684\u8ba4\u8bc1\u6709\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f Session \u767b\u5f55\u540e\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528session_id\u4f5c\u4e3a\u8ba4\u8bc1\u65b9\u5f0f Token \u83b7\u53d6\u4e00\u6b21\u6027Token\uff0c\u8be5Token\u6709\u6709\u6548\u671f, \u8fc7\u671f\u4f5c\u5e9f Private Token \u6c38\u4e45Token Access Key\u7b7e\u540d \u5bf9Http Header\u8fdb\u884c\u7b7e\u540d Session \u7528\u6237\u901a\u8fc7\u9875\u9762\u540e\u767b\u5f55\uff0ccookie\u4e2d\u4f1a\u5b58\u5728 sessionid, \u8bf7\u6c42\u65f6\u540c\u6837\u628asessionid\u653e\u5230 cookie\u4e2d Token \u4f7f\u7528\u8d26\u53f7\u5bc6\u7801\u8c03\u7528 Api\u83b7\u53d6token\uff0c\u5982\u679c\u542f\u7528\u4e86MFA\uff0c\u5219\u9700\u8981\u4e24\u6b65\u9a8c\u8bc1 curl -X POST http://localhost/api/v1/authentication/auth/ \\ -H 'Content-Type: application/json' \\ -d '{\"username\": \"admin\", \"password\": \"admin\"}' \u4ee3\u7801: import requests import json from pprint import def get_token (): url = 'https://demo.jumpserver.org/api/v1/authentication/auth/' query_args = { \"username\" : \"admin\" , \"password\" : \"admin\" } response = requests . post ( url , data = query_args ) return json . loads ( response . text )[ 'token' ] def get_user_info (): url = 'https://demo.jumpserver.org/api/v1/users/users/' token = get_token () header_info = { \"Authorization\" : 'Bearer ' + token } response = requests . get ( url , headers = header_info ) print ( json . loads ( response . text )) get_user_info () Private Token source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell << EOF from users.models import User u = User.objects.get(username='admin') u.create_private_token() EOF \u5982\u679c\u751f\u6210\u62a5\u9519, \u8868\u793a\u5df2\u7ecf\u5b58\u5728 private_token, \u76f4\u63a5\u83b7\u53d6\u5373\u53ef u . private_token Access Key Access key \u7b7e\u540d\u673a\u5236\u662f\u4e3a\u4e86\u5b89\u5168\uff0c IETF \u53d1\u5e03\u7684\u6cd5\u6848 \u8be6\u89c1\u6b64\u5904 \u8ba4\u8bc1\u7684\u539f\u7406\u662f: \u7528\u6237\u6709\u4e00\u4e2a access key , key\u6709ID ( keyId ) \u548c\u5bc6\u94a5 ( keySecret ), \u8fd9\u4e2a key\u662f\u9884\u751f\u6210\u7684 \uff0c\u8bf7\u6c42\u8005\u548c\u670d\u52a1\u5668\u90fd\u77e5\u6653 \u7528\u6237\u8bf7\u6c42\u65f6 \u5c06\u8bf7\u6c42\u7684 \u5730\u5740\u3001\u8bf7\u6c42\u65b9\u6cd5\u3001\u65f6\u95f4\u7b49\u4f7f\u7528 \u5bc6\u94a5 ( \u67d0\u79cd\u5bf9\u79f0\u7b97\u6cd5 ) \u8fdb\u884c\u52a0\u5bc6\uff0c\u4f5c\u4e3a\u7b7e\u540d \u8fde\u540c keyId \u4e00\u540c\u653e\u5230 header \u4e2d\u53d1\u7ed9\u670d\u52a1\u5668 Authorization : Signature keyId = \"Test\" , algorithm = \"rsa-sha256\" , signature = \"jKyvPcxB4JbmYY4mByyBY7cZfNl4OW9HpFQlG7N4YcJPteKTu4MW CLyk+gIr0wDgqtLWf9NLpMAMimdfsH7FSWGfbMFSrsVTHNTk0rK3usrfFnti1dx sM4jl0kYJCKTGI/UWkqiaxwNiKqGcdlEDrTcUhhsFsOIo8VhddmZTZ8w=\" \u670d\u52a1\u5668\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u6839\u636e keyId\u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u5230keySecret , \u89e3\u5bc6\u7b7e\u540d\uff0c\u6bd4\u5bf9 \u7b7e\u540d\u5185\u5bb9\u548c\u8bf7\u6c42\u7684\u5b57\u6bb5\u662f\u5426\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u81f4\uff0c\u8ba4\u8bc1\u6210\u529f\uff0c\u5426\u5219\u5931\u8d25 python \u4f7f\u7528 requests \u8bf7\u6c42\u793a\u4f8b \u5b89\u88c5\u4f9d\u8d56 pip install requests drf-httpsig python \u4ee3\u7801 import requests from httpsig.requests_auth import HTTPSignatureAuth KEY_ID = 'su-key' SECRET = 'my secret string' signature_headers = [ '(request-target)' , 'accept' , 'date' , 'host' ] headers = { 'Accept' : 'application/json' , 'Date' : \"Mon, 17 Feb 2014 06:11:05 GMT\" } auth = HTTPSignatureAuth ( key_id = KEY_ID , secret = SECRET , algorithm = 'hmac-sha256' , headers = signature_headers ) req = requests . get ( 'http://localhost/api/v1/users/users/' , auth = auth , headers = headers ) print ( req . content )","title":"API\u8ba4\u8bc1"},{"location":"faq/core/","text":"Core \u5e38\u89c1\u95ee\u9898 \u00b6 \u5e38\u89c1\u95ee\u9898\u8bb0\u5f55 1. core \u542f\u52a8\u5f02\u5e38 \u00b6 ModuleNotFoundError: No module named 'daemon' source /opt/py3/bin/activate pip install -r requirements/requirements.txt redis.exceptions.ConnectionError: Error 111 connecting to 127.0.0.1:6379. Connection refused \u68c0\u67e5 config.yml \u7684 redis \u8bbe\u7f6e django.db.utils.OperationalError: (2006, \"Can't connect to MySQL server on '127.0.0.1' (115)\") \u68c0\u67e5 config.yml \u7684 mysql \u8bbe\u7f6e config.yml \u683c\u5f0f\u8bf4\u660e \u5e38\u89c1\u7684\u9519\u8bef\u5c31\u662f\u5b57\u6bb5\u4e3a\u7a7a\u548c : \u540e\u9762\u5c11\u4e00\u4e2a\u7a7a\u683c, \u53c2\u8003\u4e0b\u9762, \u8bf7\u52ff\u7167\u6284 SECRET_KEY : 5RLbBjm8AkMSvnft... # \u4e0d\u8981\u5ffd\u7565: \u540e\u9762\u7684\u7a7a\u683c, \u4e0d\u652f\u6301\u7eaf\u6570\u5b57 BOOTSTRAP_TOKEN : ihR4WG4gRShCnpQL... # \u4e0d\u8981\u5ffd\u7565: \u540e\u9762\u7684\u7a7a\u683c, \u4e0d\u652f\u6301\u7eaf\u6570\u5b57 DB_PASSWORD : '123456' # \u5bc6\u7801\u7eaf\u6570\u5b57\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765 DB_PASSWORD : cPzxaiUAtA5IkdT2... # \u975e\u7eaf\u6570\u5b57\u53ef\u4ee5\u4e0d\u7528\u5355\u5f15\u53f7 REDIS_PASSWORD : '888888' # \u5bc6\u7801\u7eaf\u6570\u5b57\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765 REDIS_PASSWORD : Ma5bzA3gVK5oY17l... # \u975e\u7eaf\u6570\u5b57\u53ef\u4ee5\u4e0d\u7528\u5355\u5f15\u53f7 2. Web \u767b\u5f55\u9875\u9762\u5f02\u5e38 \u00b6 \u9875\u9762\u663e\u793a\u4e0d\u6b63\u5e38 \u4e0d\u8981\u901a\u8fc7 8080 \u7aef\u53e3\u8bbf\u95ee Web \u9875\u9762 \u4e0d\u652f\u6301 IE \u6d4f\u89c8\u5668 \u5176\u4ed6\u5f02\u5e38, \u8bf7\u67e5\u770b jumpserver/logs/ \u548c /var/log/nginx \u4e0b\u9762\u7684 log, \u6839\u636e\u76f8\u5e94\u7684\u9519\u8bef\u6392\u67e5\u95ee\u9898 3. Web \u767b\u5f55\u5931\u8d25 \u00b6 \u5fd8\u8bb0\u5bc6\u7801 \u5982\u679c\u5fd8\u4e86\u5bc6\u7801, \u53ef\u4ee5\u70b9\u51fb\u627e\u56de\u5bc6\u7801\u901a\u8fc7\u90ae\u4ef6\u627e\u56de \u5982\u679c\u65e0\u6cd5\u901a\u8fc7\u90ae\u4ef6\u627e\u56de, \u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u53f0\u91cd\u7f6e source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from users.models import User u = User . objects . get ( username = 'admin' ) u . reset_password ( 'password' ) u . save () admin \u4e3a\u4f60\u8981\u4fee\u6539\u7684\u8d26\u6237\u540d\u79f0, password \u4e3a\u4f60\u8981\u4fee\u6539\u7684\u5bc6\u7801 \u767b\u5f55\u9891\u7e41\u8d26\u53f7\u88ab\u9501\u5b9a \u627e\u7ba1\u7406\u5458\u91cd\u7f6e, \u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u5bf9\u5e94\u7528\u6237\u7684\u4e2a\u4eba\u9875\u9762\u91cd\u7f6e \u6216\u8005\u901a\u8fc7\u4e0b\u9762\u7684 shell \u89e3\u51b3 source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from django.core.cache import cache cache . delete_pattern ( '_LOGIN_BLOCK_*' ) cache . delete_pattern ( '_LOGIN_LIMIT_*' ) \u5982\u679c\u662f\u8bbe\u7f6e\u4e86 LDAP \u540e\u65e0\u6cd5\u767b\u5f55, \u8bf7\u767b\u5f55\u6570\u636e\u5e93\u7981\u7528 ldap \u767b\u5f55, \u7136\u540e\u91cd\u65b0\u8bbe\u7f6e LDAP mysql -uroot -p use jumpserver ; update settings_setting set value = 'false' where name = 'AUTH_LDAP' ; \u5982\u679c\u662f\u8bbe\u7f6e \u5176\u4ed6\u8eab\u4efd\u8ba4\u8bc1 \u540e\u65e0\u6cd5\u767b\u5f55, \u6ce8\u91ca\u6389 jumpserver/config.yml \u91cc\u9762\u7684\u8eab\u4efd\u8ba4\u8bc1\u8bbe\u7f6e\u91cd\u542f\u5373\u53ef 4. \u7ba1\u7406\u7528\u6237 \u548c \u7cfb\u7edf\u7528\u6237 \u00b6 \u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f\u3001\u63a8\u9001\u63d0\u793a ........... source /opt/py3/bin/activate ./jms stop ps aux | grep py3 | awk '{print $2}' | xargs kill -9 rm -rf tmp/*.pid ./jms start -d \u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f \u62a5 Permission denied \u6216\u8005 Authentication failure \u4e00\u822c\u90fd\u662f\u7ba1\u7406\u7528\u6237\u8d26\u6237\u5bc6\u7801\u4e0d\u6b63\u786e \u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f \u62a5 /usr/bin/python: not found \u5728\u4e00\u822c\u662f\u8d44\u4ea7 python \u672a\u5b89\u88c5\u6216\u8005 python \u5f02\u5e38, \u4e00\u822c\u51fa\u73b0\u5728 ubuntu \u8d44\u4ea7\u4e0a \u7cfb\u7edf\u7528\u6237\u6d4b\u8bd5\u8d44\u4ea7\u53ef\u8fde\u63a5\u6027\u9519\u8bef \u786e\u5b9a\u7cfb\u7edf\u7528\u6237\u662f\u5426\u6b63\u786e, \u5982\u679c\u7cfb\u7edf\u7528\u6237\u4f7f\u7528\u4e86\u81ea\u52a8\u63a8\u9001, \u786e\u4fdd\u7ba1\u7406\u7528\u6237\u6b63\u786e \u7cfb\u7edf\u7528\u6237\u8bbe\u7f6e\u4e3a root \u7684\u60c5\u51b5\u4e0b, \u8bf7\u5173\u95ed\u81ea\u52a8\u63a8\u9001, \u5e76\u8f93\u5165\u6b63\u786e\u7684 root \u5bc6\u7801 \u63d0\u793a timeout vi /etc/ssh/sshd_config UseDNS no systemctl restart docker docker restart jms_koko Connect websocket server error kill \u6389\u8fdb\u7a0b\u518d\u91cd\u542f core \u5982\u679c\u4ecd\u7136\u4e00\u6837, \u8868\u793a nginx \u4e5f\u6709\u9519\u8bef, \u6839\u636e\u5b89\u88c5\u6587\u6863\u8fdb\u884c\u4fee\u6539\u540e\u91cd\u542f nginx \u5373\u53ef","title":"Core \u5e38\u89c1\u95ee\u9898"},{"location":"faq/core/#core","text":"\u5e38\u89c1\u95ee\u9898\u8bb0\u5f55","title":"Core \u5e38\u89c1\u95ee\u9898"},{"location":"faq/core/#1-core","text":"ModuleNotFoundError: No module named 'daemon' source /opt/py3/bin/activate pip install -r requirements/requirements.txt redis.exceptions.ConnectionError: Error 111 connecting to 127.0.0.1:6379. Connection refused \u68c0\u67e5 config.yml \u7684 redis \u8bbe\u7f6e django.db.utils.OperationalError: (2006, \"Can't connect to MySQL server on '127.0.0.1' (115)\") \u68c0\u67e5 config.yml \u7684 mysql \u8bbe\u7f6e config.yml \u683c\u5f0f\u8bf4\u660e \u5e38\u89c1\u7684\u9519\u8bef\u5c31\u662f\u5b57\u6bb5\u4e3a\u7a7a\u548c : \u540e\u9762\u5c11\u4e00\u4e2a\u7a7a\u683c, \u53c2\u8003\u4e0b\u9762, \u8bf7\u52ff\u7167\u6284 SECRET_KEY : 5RLbBjm8AkMSvnft... # \u4e0d\u8981\u5ffd\u7565: \u540e\u9762\u7684\u7a7a\u683c, \u4e0d\u652f\u6301\u7eaf\u6570\u5b57 BOOTSTRAP_TOKEN : ihR4WG4gRShCnpQL... # \u4e0d\u8981\u5ffd\u7565: \u540e\u9762\u7684\u7a7a\u683c, \u4e0d\u652f\u6301\u7eaf\u6570\u5b57 DB_PASSWORD : '123456' # \u5bc6\u7801\u7eaf\u6570\u5b57\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765 DB_PASSWORD : cPzxaiUAtA5IkdT2... # \u975e\u7eaf\u6570\u5b57\u53ef\u4ee5\u4e0d\u7528\u5355\u5f15\u53f7 REDIS_PASSWORD : '888888' # \u5bc6\u7801\u7eaf\u6570\u5b57\u7528\u5355\u5f15\u53f7\u62ec\u8d77\u6765 REDIS_PASSWORD : Ma5bzA3gVK5oY17l... # \u975e\u7eaf\u6570\u5b57\u53ef\u4ee5\u4e0d\u7528\u5355\u5f15\u53f7","title":"1. core \u542f\u52a8\u5f02\u5e38"},{"location":"faq/core/#2-web","text":"\u9875\u9762\u663e\u793a\u4e0d\u6b63\u5e38 \u4e0d\u8981\u901a\u8fc7 8080 \u7aef\u53e3\u8bbf\u95ee Web \u9875\u9762 \u4e0d\u652f\u6301 IE \u6d4f\u89c8\u5668 \u5176\u4ed6\u5f02\u5e38, \u8bf7\u67e5\u770b jumpserver/logs/ \u548c /var/log/nginx \u4e0b\u9762\u7684 log, \u6839\u636e\u76f8\u5e94\u7684\u9519\u8bef\u6392\u67e5\u95ee\u9898","title":"2. Web \u767b\u5f55\u9875\u9762\u5f02\u5e38"},{"location":"faq/core/#3-web","text":"\u5fd8\u8bb0\u5bc6\u7801 \u5982\u679c\u5fd8\u4e86\u5bc6\u7801, \u53ef\u4ee5\u70b9\u51fb\u627e\u56de\u5bc6\u7801\u901a\u8fc7\u90ae\u4ef6\u627e\u56de \u5982\u679c\u65e0\u6cd5\u901a\u8fc7\u90ae\u4ef6\u627e\u56de, \u53ef\u4ee5\u901a\u8fc7\u63a7\u5236\u53f0\u91cd\u7f6e source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from users.models import User u = User . objects . get ( username = 'admin' ) u . reset_password ( 'password' ) u . save () admin \u4e3a\u4f60\u8981\u4fee\u6539\u7684\u8d26\u6237\u540d\u79f0, password \u4e3a\u4f60\u8981\u4fee\u6539\u7684\u5bc6\u7801 \u767b\u5f55\u9891\u7e41\u8d26\u53f7\u88ab\u9501\u5b9a \u627e\u7ba1\u7406\u5458\u91cd\u7f6e, \u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u5bf9\u5e94\u7528\u6237\u7684\u4e2a\u4eba\u9875\u9762\u91cd\u7f6e \u6216\u8005\u901a\u8fc7\u4e0b\u9762\u7684 shell \u89e3\u51b3 source /opt/py3/bin/activate cd /opt/jumpserver/apps python manage.py shell from django.core.cache import cache cache . delete_pattern ( '_LOGIN_BLOCK_*' ) cache . delete_pattern ( '_LOGIN_LIMIT_*' ) \u5982\u679c\u662f\u8bbe\u7f6e\u4e86 LDAP \u540e\u65e0\u6cd5\u767b\u5f55, \u8bf7\u767b\u5f55\u6570\u636e\u5e93\u7981\u7528 ldap \u767b\u5f55, \u7136\u540e\u91cd\u65b0\u8bbe\u7f6e LDAP mysql -uroot -p use jumpserver ; update settings_setting set value = 'false' where name = 'AUTH_LDAP' ; \u5982\u679c\u662f\u8bbe\u7f6e \u5176\u4ed6\u8eab\u4efd\u8ba4\u8bc1 \u540e\u65e0\u6cd5\u767b\u5f55, \u6ce8\u91ca\u6389 jumpserver/config.yml \u91cc\u9762\u7684\u8eab\u4efd\u8ba4\u8bc1\u8bbe\u7f6e\u91cd\u542f\u5373\u53ef","title":"3. Web \u767b\u5f55\u5931\u8d25"},{"location":"faq/core/#4","text":"\u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f\u3001\u63a8\u9001\u63d0\u793a ........... source /opt/py3/bin/activate ./jms stop ps aux | grep py3 | awk '{print $2}' | xargs kill -9 rm -rf tmp/*.pid ./jms start -d \u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f \u62a5 Permission denied \u6216\u8005 Authentication failure \u4e00\u822c\u90fd\u662f\u7ba1\u7406\u7528\u6237\u8d26\u6237\u5bc6\u7801\u4e0d\u6b63\u786e \u8d44\u4ea7\u6d4b\u8bd5\u53ef\u8fde\u63a5\u6027\u3001\u66f4\u65b0\u786c\u4ef6\u4fe1\u606f \u62a5 /usr/bin/python: not found \u5728\u4e00\u822c\u662f\u8d44\u4ea7 python \u672a\u5b89\u88c5\u6216\u8005 python \u5f02\u5e38, \u4e00\u822c\u51fa\u73b0\u5728 ubuntu \u8d44\u4ea7\u4e0a \u7cfb\u7edf\u7528\u6237\u6d4b\u8bd5\u8d44\u4ea7\u53ef\u8fde\u63a5\u6027\u9519\u8bef \u786e\u5b9a\u7cfb\u7edf\u7528\u6237\u662f\u5426\u6b63\u786e, \u5982\u679c\u7cfb\u7edf\u7528\u6237\u4f7f\u7528\u4e86\u81ea\u52a8\u63a8\u9001, \u786e\u4fdd\u7ba1\u7406\u7528\u6237\u6b63\u786e \u7cfb\u7edf\u7528\u6237\u8bbe\u7f6e\u4e3a root \u7684\u60c5\u51b5\u4e0b, \u8bf7\u5173\u95ed\u81ea\u52a8\u63a8\u9001, \u5e76\u8f93\u5165\u6b63\u786e\u7684 root \u5bc6\u7801 \u63d0\u793a timeout vi /etc/ssh/sshd_config UseDNS no systemctl restart docker docker restart jms_koko Connect websocket server error kill \u6389\u8fdb\u7a0b\u518d\u91cd\u542f core \u5982\u679c\u4ecd\u7136\u4e00\u6837, \u8868\u793a nginx \u4e5f\u6709\u9519\u8bef, \u6839\u636e\u5b89\u88c5\u6587\u6863\u8fdb\u884c\u4fee\u6539\u540e\u91cd\u542f nginx \u5373\u53ef","title":"4. \u7ba1\u7406\u7528\u6237 \u548c \u7cfb\u7edf\u7528\u6237"},{"location":"faq/guacamole/","text":"Guacamole \u5e38\u89c1\u95ee\u9898 \u00b6 \u8bf7\u5148\u786e\u8ba4\u4e0b\u9762\u9009\u9879 \u8bf7\u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u91cc\u9762\u5141\u8bb8 \u7ec8\u7aef\u6ce8\u518c docker \u5bb9\u5668\u90e8\u7f72\u7684 JUMPSERVER_SERVER \u4e0d\u53ef\u4ee5\u4f7f\u7528 http://127.0.0.1:8080 1. guacamole \u542f\u52a8\u5f02\u5e38 \u00b6 guacamole \u7ec4\u4ef6\u4e0d\u5728\u7ebf\u53ef\u6309\u7167\u4e0b\u9762\u5904\u7406 cat /opt/jumpserver/config.yml | grep BOOTSTRAP_TOKEN docker logs -f jms_guacamole \u63d0\u793a wait for jms_core ready \u6b64\u95ee\u9898\u4e00\u822c\u662f JUMPSERVER_SERVER \u4f7f\u7528\u4e86 127.0.0.1 \u6216\u8005\u4fee\u6539\u4e86 firewalld iptables \u5bfc\u81f4\u7f51\u7edc\u6545\u969c systemctl restart jms_guacamole docker restart jms_guacamole docker logs -f jms_guacamole \u5982\u679c\u4f9d\u65e7\u63d0\u793a wait for jms_core ready docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9","title":"Guacamole \u95ee\u9898"},{"location":"faq/guacamole/#guacamole","text":"\u8bf7\u5148\u786e\u8ba4\u4e0b\u9762\u9009\u9879 \u8bf7\u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u91cc\u9762\u5141\u8bb8 \u7ec8\u7aef\u6ce8\u518c docker \u5bb9\u5668\u90e8\u7f72\u7684 JUMPSERVER_SERVER \u4e0d\u53ef\u4ee5\u4f7f\u7528 http://127.0.0.1:8080","title":"Guacamole \u5e38\u89c1\u95ee\u9898"},{"location":"faq/guacamole/#1-guacamole","text":"guacamole \u7ec4\u4ef6\u4e0d\u5728\u7ebf\u53ef\u6309\u7167\u4e0b\u9762\u5904\u7406 cat /opt/jumpserver/config.yml | grep BOOTSTRAP_TOKEN docker logs -f jms_guacamole \u63d0\u793a wait for jms_core ready \u6b64\u95ee\u9898\u4e00\u822c\u662f JUMPSERVER_SERVER \u4f7f\u7528\u4e86 127.0.0.1 \u6216\u8005\u4fee\u6539\u4e86 firewalld iptables \u5bfc\u81f4\u7f51\u7edc\u6545\u969c systemctl restart jms_guacamole docker restart jms_guacamole docker logs -f jms_guacamole \u5982\u679c\u4f9d\u65e7\u63d0\u793a wait for jms_core ready docker stop jms_guacamole docker rm jms_guacamole docker run --name jms_guacamole -d -p 127 .0.0.1:8081:8080 -e JUMPSERVER_SERVER = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e GUACAMOLE_LOG_LEVEL = ERROR jumpserver/jms_guacamole:1.5.9","title":"1. guacamole \u542f\u52a8\u5f02\u5e38"},{"location":"faq/koko/","text":"Koko \u5e38\u89c1\u95ee\u9898 \u00b6 \u8bf7\u5148\u786e\u8ba4\u4e0b\u9762\u9009\u9879 \u8bf7\u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u91cc\u9762\u5141\u8bb8 \u7ec8\u7aef\u6ce8\u518c docker \u5bb9\u5668\u90e8\u7f72\u7684 CORE_HOST \u4e0d\u53ef\u4ee5\u4f7f\u7528 http://127.0.0.1:8080 1. koko \u542f\u52a8\u5f02\u5e38 \u00b6 \u542f\u52a8\u5f02\u5e38 POST failed, get code: 403 , {\" detail \":\" \u8eab\u4efd\u8ba4\u8bc1\u4fe1\u606f\u672a\u63d0\u4f9b \u3002\"} POST failed, get code: 400 , {\" name \":[\" \u540d\u79f0\u91cd\u590d \"]} Connect Server error or access key is incalid, remove data/keys/.access_key run agent \u4e0a\u9762\u62a5\u9519\u90fd\u6309\u7167\u4e0b\u9762\u5904\u7406 cat /opt/jumpserver/config.yml | grep BOOTSTRAP_TOKEN \u6b63\u5e38\u90e8\u7f72\u7684 koko \u7ec4\u4ef6 \u5728 web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u5220\u9664 koko \u7684\u6ce8\u518c ( \u5728\u7ebf\u663e\u793a\u7ea2\u8272\u7684\u90a3\u4e2a ) \u5220\u6389 koko/data/keys/ \u4e0b\u9762\u7684\u6587\u4ef6 \u4fee\u6539 config.yml \u91cc\u9762\u7684 BOOTSTRAP_TOKEN \u4e3a\u4ece jumpserver/config.yml \u83b7\u53d6\u7684\u503c \u91cd\u542f koko rm -rf data/keys/.access_key vi config.yml ./koko docker \u5bb9\u5668\u90e8\u7f72\u7684 koko \u7ec4\u4ef6 \u5728 web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u5220\u9664 koko \u7684\u6ce8\u518c ( \u5728\u7ebf\u663e\u793a\u7ea2\u8272\u7684\u90a3\u4e2a ) \u5220\u6389 jms_koko \u5bb9\u5668 \u4ece jumpserver/config.yml \u83b7\u53d6 BOOTSTRAP_TOKEN \u91cd\u65b0\u8fd0\u884c docker rm jms_koko docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9 docker logs -f jms_koko \u63d0\u793a wait for jms_core ready \u6b64\u95ee\u9898\u4e00\u822c\u662f CORE_HOST \u4f7f\u7528\u4e86 127.0.0.1 \u6216\u8005\u4fee\u6539\u4e86 firewalld iptables \u5bfc\u81f4\u7f51\u7edc\u6545\u969c systemctl restart jms_koko docker restart jms_koko docker logs -f jms_koko \u5982\u679c\u4f9d\u65e7\u63d0\u793a wait for jms_core ready docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9","title":"koko \u5e38\u89c1\u95ee\u9898"},{"location":"faq/koko/#koko","text":"\u8bf7\u5148\u786e\u8ba4\u4e0b\u9762\u9009\u9879 \u8bf7\u5728 web - \u7cfb\u7edf\u8bbe\u7f6e - \u5b89\u5168\u8bbe\u7f6e \u91cc\u9762\u5141\u8bb8 \u7ec8\u7aef\u6ce8\u518c docker \u5bb9\u5668\u90e8\u7f72\u7684 CORE_HOST \u4e0d\u53ef\u4ee5\u4f7f\u7528 http://127.0.0.1:8080","title":"Koko \u5e38\u89c1\u95ee\u9898"},{"location":"faq/koko/#1-koko","text":"\u542f\u52a8\u5f02\u5e38 POST failed, get code: 403 , {\" detail \":\" \u8eab\u4efd\u8ba4\u8bc1\u4fe1\u606f\u672a\u63d0\u4f9b \u3002\"} POST failed, get code: 400 , {\" name \":[\" \u540d\u79f0\u91cd\u590d \"]} Connect Server error or access key is incalid, remove data/keys/.access_key run agent \u4e0a\u9762\u62a5\u9519\u90fd\u6309\u7167\u4e0b\u9762\u5904\u7406 cat /opt/jumpserver/config.yml | grep BOOTSTRAP_TOKEN \u6b63\u5e38\u90e8\u7f72\u7684 koko \u7ec4\u4ef6 \u5728 web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u5220\u9664 koko \u7684\u6ce8\u518c ( \u5728\u7ebf\u663e\u793a\u7ea2\u8272\u7684\u90a3\u4e2a ) \u5220\u6389 koko/data/keys/ \u4e0b\u9762\u7684\u6587\u4ef6 \u4fee\u6539 config.yml \u91cc\u9762\u7684 BOOTSTRAP_TOKEN \u4e3a\u4ece jumpserver/config.yml \u83b7\u53d6\u7684\u503c \u91cd\u542f koko rm -rf data/keys/.access_key vi config.yml ./koko docker \u5bb9\u5668\u90e8\u7f72\u7684 koko \u7ec4\u4ef6 \u5728 web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u5220\u9664 koko \u7684\u6ce8\u518c ( \u5728\u7ebf\u663e\u793a\u7ea2\u8272\u7684\u90a3\u4e2a ) \u5220\u6389 jms_koko \u5bb9\u5668 \u4ece jumpserver/config.yml \u83b7\u53d6 BOOTSTRAP_TOKEN \u91cd\u65b0\u8fd0\u884c docker rm jms_koko docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9 docker logs -f jms_koko \u63d0\u793a wait for jms_core ready \u6b64\u95ee\u9898\u4e00\u822c\u662f CORE_HOST \u4f7f\u7528\u4e86 127.0.0.1 \u6216\u8005\u4fee\u6539\u4e86 firewalld iptables \u5bfc\u81f4\u7f51\u7edc\u6545\u969c systemctl restart jms_koko docker restart jms_koko docker logs -f jms_koko \u5982\u679c\u4f9d\u65e7\u63d0\u793a wait for jms_core ready docker stop jms_koko docker rm jms_koko docker run --name jms_koko -d -p 2222 :2222 -p 127 .0.0.1:5000:5000 -e CORE_HOST = http://\u4f60\u7684core_url:8080 -e BOOTSTRAP_TOKEN = \u4f60\u7684token -e LOG_LEVEL = ERROR --restart = always jumpserver/jms_koko:1.5.9","title":"1. koko \u542f\u52a8\u5f02\u5e38"},{"location":"faq/luna/","text":"Luna \u5e38\u89c1\u95ee\u9898 \u00b6 luna \u9875\u9762\u8bbf\u95ee\u5f02\u5e38 \u8bf7\u4e0d\u8981\u901a\u8fc7 8080 \u7aef\u53e3\u8bbf\u95ee jumpserver, \u901a\u8fc7 nginx \u4ee3\u7406\u7aef\u53e3\u8fdb\u884c\u8bbf\u95ee \u5982\u679c\u4e0b\u8f7d\u4e86 luna \u6e90\u4ee3\u7801, \u8bf7\u5148\u7f16\u8bd1\u597d, \u5e76\u5728 nginx \u91cc\u628a luna \u76ee\u5f55\u6307\u5411\u7f16\u8bd1\u597d\u7684\u76ee\u5f55 \u5982\u679c\u7ec4\u4ef6\u90fd\u5df2\u7ecf\u542f\u52a8, \u4f46\u662f\u8bbf\u95ee\u63d0\u793a 502 \u6216\u8005 403, \u53ef\u4ee5\u68c0\u67e5\u4e0b \u9632\u706b\u5899 \u548c selinux \u8bbf\u95ee rdp vnc \u8d44\u4ea7\u767d\u5c4f \u6839\u636e\u5e2e\u52a9\u6587\u6863 guacamole \u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 guacamole \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee rdp vnc \u8d44\u4ea7\u63d0\u793a\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u6b64\u8fde\u63a5 \u6839\u636e\u5e2e\u52a9\u6587\u6863 guacamole \u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 guacamole \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee ssh telnet \u8d44\u4ea7\u65e0\u53cd\u5e94 \u53ea\u6709\u4e00\u4e2a\u767d\u8272\u5149\u6807, \u65e0\u4efb\u4f55\u5176\u4ed6\u63d0\u793a, \u6839\u636e\u5e2e\u52a9\u6587\u6863 koko \u5e38\u89c1\u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 koko \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee ssh \u8d44\u4ea7\u9519\u8bef unable to authenticate, attempted methods [none] \u8868\u793a\u8d44\u4ea7\u4e0a\u9762\u4e0d\u5b58\u5728\u6b64\u7528\u6237 unable to authenticate, attempted methods [none password] \u8868\u793a\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801\u9519\u8bef unable to authenticate, attempted methods [password publickey none] \u8868\u793a\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801\u548ckey\u90fd\u9519\u8bef \u4ee5\u4e0a\u4e09\u79cd\u9519\u8bef\u90fd\u662f\u7cfb\u7edf\u7528\u6237\u4e0d\u6b63\u786e, \u53ef\u4ee5\u5230 \u8d44\u4ea7\u5217\u8868 - \u7cfb\u7edf\u7528\u6237 - \u7cfb\u7edf\u7528\u6237\u8be6\u60c5 \u91cc\u9762\u8fdb\u884c\u63a8\u9001\u6216\u8005\u4fee\u6539 error: dial tcp x.x.x.x: i/o timeout \u8bbf\u95ee\u8d44\u4ea7\u8d85\u65f6, \u68c0\u67e5\u8d44\u4ea7\u7684 ssh \u8bbe\u7f6e USEDNS \u662f\u5426\u5df2\u7ecf\u5173\u95ed, \u81ea\u884c\u68c0\u67e5\u7f51\u7edc\u548c\u9632\u706b\u5899 \u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668, \u8bf7\u8054\u7cfb\u7ba1\u7406\u5458 rdp \u534f\u8bae\u8d44\u4ea7\u51fa\u73b0\u6b64\u95ee\u9898\u8bf7\u8ba4\u771f\u770b\u7ba1\u7406\u6587\u6863\u7684 Windows RDP \u8d44\u4ea7\u8981\u6c42 No asset id or system user id found \u6b64\u95ee\u9898\u4e00\u822c\u662f \u6388\u6743 \u4e0d\u5f53\u5bfc\u81f4, \u6bd4\u5982\u4e00\u4e2a \u6388\u6743 \u91cc\u9762\u5b58\u7740\u591a\u4e2a\u4e0d\u540c \u534f\u8bae \u7684 \u7cfb\u7edf\u7528\u6237 \u6216\u8005 \u7cfb\u7edf\u7528\u6237 \u7684 \u534f\u8bae \u4e0e \u8d44\u4ea7 \u534f\u8bae \u4e0d\u5339\u914d \u6216\u8005 \u6388\u6743 \u91cc\u9762\u4e0d\u5b58\u5728 \u7cfb\u7edf\u7528\u6237 \uff08\u4e00\u822c\u4f1a\u63d0\u793a \u8be5\u4e3b\u673a\u6ca1\u6709\u6388\u6743\u7cfb\u7edf\u7528\u6237\uff09 You don't have permission login \u672a\u6388\u6743\u8d44\u4ea7\u8fde\u63a5\u6743\u9650\uff08 \u6388\u6743\u89c4\u5219 - \u8d44\u4ea7\u6388\u6743 \u91cc\u9762\u7684 \u52a8\u4f5c \u52fe\u4e0a \u8fde\u63a5 \u9009\u9879\u5373\u53ef\uff09","title":"Luna \u5e38\u89c1\u95ee\u9898"},{"location":"faq/luna/#luna","text":"luna \u9875\u9762\u8bbf\u95ee\u5f02\u5e38 \u8bf7\u4e0d\u8981\u901a\u8fc7 8080 \u7aef\u53e3\u8bbf\u95ee jumpserver, \u901a\u8fc7 nginx \u4ee3\u7406\u7aef\u53e3\u8fdb\u884c\u8bbf\u95ee \u5982\u679c\u4e0b\u8f7d\u4e86 luna \u6e90\u4ee3\u7801, \u8bf7\u5148\u7f16\u8bd1\u597d, \u5e76\u5728 nginx \u91cc\u628a luna \u76ee\u5f55\u6307\u5411\u7f16\u8bd1\u597d\u7684\u76ee\u5f55 \u5982\u679c\u7ec4\u4ef6\u90fd\u5df2\u7ecf\u542f\u52a8, \u4f46\u662f\u8bbf\u95ee\u63d0\u793a 502 \u6216\u8005 403, \u53ef\u4ee5\u68c0\u67e5\u4e0b \u9632\u706b\u5899 \u548c selinux \u8bbf\u95ee rdp vnc \u8d44\u4ea7\u767d\u5c4f \u6839\u636e\u5e2e\u52a9\u6587\u6863 guacamole \u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 guacamole \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee rdp vnc \u8d44\u4ea7\u63d0\u793a\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u6b64\u8fde\u63a5 \u6839\u636e\u5e2e\u52a9\u6587\u6863 guacamole \u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 guacamole \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee ssh telnet \u8d44\u4ea7\u65e0\u53cd\u5e94 \u53ea\u6709\u4e00\u4e2a\u767d\u8272\u5149\u6807, \u65e0\u4efb\u4f55\u5176\u4ed6\u63d0\u793a, \u6839\u636e\u5e2e\u52a9\u6587\u6863 koko \u5e38\u89c1\u95ee\u9898 \u7b2c\u4e00\u6761, \u91cd\u65b0\u90e8\u7f72 koko \u786e\u5b9a web - \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u91cc\u9762\u7684\u7ec4\u4ef6\u90fd \u5728\u7ebf , \u5728\u7ebf\u56fe\u6807\u5904\u4e8e \u7eff\u8272 \u72b6\u6001 \u8bbf\u95ee ssh \u8d44\u4ea7\u9519\u8bef unable to authenticate, attempted methods [none] \u8868\u793a\u8d44\u4ea7\u4e0a\u9762\u4e0d\u5b58\u5728\u6b64\u7528\u6237 unable to authenticate, attempted methods [none password] \u8868\u793a\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801\u9519\u8bef unable to authenticate, attempted methods [password publickey none] \u8868\u793a\u7cfb\u7edf\u7528\u6237\u7684\u5bc6\u7801\u548ckey\u90fd\u9519\u8bef \u4ee5\u4e0a\u4e09\u79cd\u9519\u8bef\u90fd\u662f\u7cfb\u7edf\u7528\u6237\u4e0d\u6b63\u786e, \u53ef\u4ee5\u5230 \u8d44\u4ea7\u5217\u8868 - \u7cfb\u7edf\u7528\u6237 - \u7cfb\u7edf\u7528\u6237\u8be6\u60c5 \u91cc\u9762\u8fdb\u884c\u63a8\u9001\u6216\u8005\u4fee\u6539 error: dial tcp x.x.x.x: i/o timeout \u8bbf\u95ee\u8d44\u4ea7\u8d85\u65f6, \u68c0\u67e5\u8d44\u4ea7\u7684 ssh \u8bbe\u7f6e USEDNS \u662f\u5426\u5df2\u7ecf\u5173\u95ed, \u81ea\u884c\u68c0\u67e5\u7f51\u7edc\u548c\u9632\u706b\u5899 \u65e0\u6cd5\u8fde\u63a5\u670d\u52a1\u5668, \u8bf7\u8054\u7cfb\u7ba1\u7406\u5458 rdp \u534f\u8bae\u8d44\u4ea7\u51fa\u73b0\u6b64\u95ee\u9898\u8bf7\u8ba4\u771f\u770b\u7ba1\u7406\u6587\u6863\u7684 Windows RDP \u8d44\u4ea7\u8981\u6c42 No asset id or system user id found \u6b64\u95ee\u9898\u4e00\u822c\u662f \u6388\u6743 \u4e0d\u5f53\u5bfc\u81f4, \u6bd4\u5982\u4e00\u4e2a \u6388\u6743 \u91cc\u9762\u5b58\u7740\u591a\u4e2a\u4e0d\u540c \u534f\u8bae \u7684 \u7cfb\u7edf\u7528\u6237 \u6216\u8005 \u7cfb\u7edf\u7528\u6237 \u7684 \u534f\u8bae \u4e0e \u8d44\u4ea7 \u534f\u8bae \u4e0d\u5339\u914d \u6216\u8005 \u6388\u6743 \u91cc\u9762\u4e0d\u5b58\u5728 \u7cfb\u7edf\u7528\u6237 \uff08\u4e00\u822c\u4f1a\u63d0\u793a \u8be5\u4e3b\u673a\u6ca1\u6709\u6388\u6743\u7cfb\u7edf\u7528\u6237\uff09 You don't have permission login \u672a\u6388\u6743\u8d44\u4ea7\u8fde\u63a5\u6743\u9650\uff08 \u6388\u6743\u89c4\u5219 - \u8d44\u4ea7\u6388\u6743 \u91cc\u9762\u7684 \u52a8\u4f5c \u52fe\u4e0a \u8fde\u63a5 \u9009\u9879\u5373\u53ef\uff09","title":"Luna \u5e38\u89c1\u95ee\u9898"},{"location":"install/ansible_install/","text":"Ansible \u96c6\u7fa4\u90e8\u7f72 \u00b6 Ansible-Playbook \u00b6 \u672c\u9879\u76ee\u8bf7\u5148\u81ea\u884c\u8c03\u4f18\u540e\u518d\u4f7f\u7528, \u8bf7\u52ff\u76f4\u63a5\u5728\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u4f7f\u7528 \u8bf4\u660e \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u4e13\u4e1a\u7684\u80fd\u529b\u6765\u89e3\u51b3\u4e00\u4e9b\u96c6\u7fa4\u95ee\u9898\uff0c\u5982\u96c6\u7fa4\u5d29\u6e83 \u96c6\u7fa4\u5206\u79bb \u96c6\u7fa4\u6269\u5c55 lvs \u8d1f\u8f7d\u5747\u8861\u7b56\u7565 \u6545\u969c\u6392\u67e5 \u4ee5\u53ca \u96c6\u7fa4\u7ec4\u4ef6\u5b58\u6d3b\u68c0\u6d4b\u673a\u5236\u7b49\u3002\u5728\u8fd9\u4e9b\u95ee\u9898\u4e0a\u4f60\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97 JumpServer \u989d\u5916\u7684\u6280\u672f\u652f\u6301\u3002 \u90e8\u7f72\u76ee\u6807\u673a\u5668\u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6 \u81f3\u5c11\u9700\u8981 3 \u5b9e\u4f8b nfs mariadb redis \u53ef\u4ee5\u5904\u4e8e\u540c\u4e00\u4e3b\u673a core koko guacamole \u53ef\u4ee5\u5904\u4e8e\u540c\u4e00\u4e3b\u673a nginx \u5fc5\u987b\u4f4d\u4e8e\u5355\u72ec\u7684\u4e3b\u673a \u6ce8: MariaDB Redis \u672a\u505a\u96c6\u7fa4, \u8bf7\u6839\u636e\u5b9e\u9645\u73af\u5883\u81ea\u884c\u8fdb\u884c\u90e8\u7f72\u6216\u8005\u9009\u62e9\u5df2\u7ecf\u5c31\u7eea\u7684 MySQL Server \u548c Redis Server 1. \u90e8\u7f72\u4e2d\u63a7 \u00b6 \u4e2d\u63a7\u673a\u53ef\u4ee5\u662f\u90e8\u7f72\u76ee\u6807\u673a\u5668\u4e2d\u7684\u67d0\u4e00\u53f0 \u7cfb\u7edf\u8981\u6c42 CentOS 7.x \u64cd\u4f5c\u7cfb\u7edf \u8be5\u673a\u5668\u9700\u5f00\u653e\u5916\u7f51\u8bbf\u95ee \u9700\u8981\u90e8\u7f72\u4e2d\u63a7\u673a\u4e00\u53f0 2. \u5b89\u88c5\u4f9d\u8d56 \u00b6 \u4ee5 root \u7528\u6237\u767b\u5f55\u4e2d\u63a7\u673a, \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 yum -y install epel-release git curl sshpass yum -y install python2-pip 3. SSH key \u00b6 ssh-keygen -t rsa \u751f\u6210 ssh key 4. \u4e0b\u8f7d\u9879\u76ee \u00b6 cd /opt git clone --depth = 1 https://github.com/wojiushixiaobai/jms_ansible.git 5. \u5b89\u88c5\u4f9d\u8d56 \u00b6 cd jms_ansible mkdir ~/.pip echo -e \"[easy_install]\\nindex_url = https://mirrors.aliyun.com/pypi/simple/\" > ~/.pydistutils.cfg echo -e \"[global]\\nindex-url = https://mirrors.aliyun.com/pypi/simple/\\n\\n[install]\\ntrusted-host=mirrors.aliyun.com\" > ~/.pip/pip.conf pip install -r requirements/requirements.txt 6. \u5206\u914d\u8d44\u6e90 \u00b6 vi inventory.ini [nfs] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 nfs \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 [nginx] 192 . 168 . 1 . 146 # \u7528\u4f5c\u90e8\u7f72 nginx \u670d\u52a1\u5668\u7684 ip , \u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7\u5373\u53ef [mariadb] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 mysql \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u53ef\u4ee5\u4e0d\u8bbe\u7f6e [redis] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 redis \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u53ef\u4ee5\u4e0d\u8bbe\u7f6e [core_master] # \u7528\u4f5c\u90e8\u7f72 core \u4e3b\u670d\u52a1\u5668\u7684 ip , \u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7\u5373\u53ef 192 . 168 . 1 . 148 [core_slave] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 core \u4ece\u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u4e3b\u4ece\u4e4b\u95f4\u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [koko] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 koko \u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [guacamole] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 guacamole \u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [nfs:vars] nfs_perm = 192 . 168 . 1 . 0 / 24 ( rw , sync , no_root_squash ) # \u8fd9\u91cc\u662f nfs \u7684\u7b56\u7565 , \u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539 , \u4e5f\u53ef\u4ee5\u76f4\u63a5\u6388\u6743\u7f51\u6bb5 [nginx:vars] # https_port = 443 # \u6682\u65f6\u4e0d\u8bbe\u7f6e , \u7b49\u5f85\u540e\u7eed\u66f4\u65b0 ssh_port = 2222 # nginx \u5bf9\u5916\u7684 ssh \u7aef\u53e3 , \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u7aef\u53e3\u767b\u5f55\u5230 jumpserver \u8df3\u677f\u673a [db_info:children] mariadb core_master core_slave [db_info:vars] db_name = jumpserver # \u4e3a jumpserver \u521b\u5efa\u7684\u6570\u636e\u5e93\u540d\u79f0 db_user = jumpserver # \u4e3a jumpserver \u521b\u5efa\u7684\u8fde\u63a5\u7528\u6237 db_host = 192 . 168 . 1 . 147 # \u8bf7\u6539\u6210\u4f60\u7684 mysql \u6570\u636e\u5e93 ip db_passwd = weakPassword # \u8bf7\u66f4\u6539\u6b64\u5bc6\u7801\u4e3a\u66f4\u5b89\u5168\u7684\u5bc6\u7801 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u5728\u8fd9\u91cc\u6307\u5b9a [redis_info:children] redis core_master core_slave koko [redis_info:vars] redis_host = 192 . 168 . 1 . 147 # redis \u670d\u52a1\u5668\u7684 ip redis_passwd = weakPassword # redis \u670d\u52a1\u5668\u7684\u5bc6\u7801 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u5728\u8fd9\u91cc\u6307\u5b9a [nfs_info:children] nginx core_master core_slave [nfs_info:vars] nfs_server = 192 . 168 . 1 . 147 # \u6b64\u5904\u4fee\u6539\u6210\u4f60\u7684 nfs \u670d\u52a1\u5668 ip [nginx_info:children] nginx koko [nginx_info:vars] http_port = 80 # nginx \u5bf9\u5916\u7684 http \u7aef\u53e3 , \u7528\u6237\u901a\u8fc7\u6b64\u7aef\u53e3\u6765\u8bbf\u95ee jumpserver [core:children] core_master core_slave [core:vars] secret_key = gIQ3sUfkCQXd295d8Wwkvu3stAoeVAGvpsiblCEjRud9uwIFB0 # jumpserver \u9ed8\u8ba4\u7684\u52a0\u5bc6 key , \u8bf7\u66f4\u6539\u5e76\u7262\u8bb0 # \u4e22\u5931\u6b64 key \u4f1a\u5bfc\u81f4\u52a0\u5bc6\u7684\u6240\u6709\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 , \u8bf7\u4fdd\u7ba1\u5230\u5b89\u5168\u7684\u4f4d\u7f6e [core_info:children] core_master core_slave koko guacamole [core_info:vars] bootstrap_token = j6qfkdQWWrdVACcy # koko \u548c guacamole \u8ba4\u8bc1\u65f6\u9700\u8981\u7684 token , \u8bf7\u968f\u673a\u6570\u751f\u6210\u5e76\u66f4\u6539 , \u4e0d\u9700\u8981\u8bb0\u4f4f nginx_server = 192 . 168 . 1 . 146 # nginx \u670d\u52a1\u5668\u7684 ip \u5730\u5740 [ all :vars] ansible_user = root install_dir = / opt # jumpserver\u5b89\u88c5\u7684\u4f4d\u7f6e , \u5efa\u8bae\u9ed8\u8ba4 , \u4fee\u6539\u6b64\u9009\u9879 , \u4e0b\u9762 nfs \u5ba2\u6237\u7aef\u6302\u8f7d\u7684\u4f4d\u7f6e\u4e5f\u9700\u8981\u4fee\u6539 ntp_server = ntp1.aliyun. com # ntp \u9700\u8981\u65f6\u95f4\u540c\u6b65 jms_version = 1 . 5 . 9 # jumpserver \u7684\u7248\u672c nfs_src_dir = /data # nfs \u670d\u52a1\u7aef\u6302\u8f7d\u4f4d\u7f6e , \u5efa\u8bae\u9ed8\u8ba4 nfs_dest_dir = /opt/ jumpserver/data # nfs \u5ba2\u6237\u7aef\u6302\u8f7d\u7684\u4f4d\u7f6e , \u5fc5\u987b\u6307\u5411 jumpserver \u5b89\u88c5\u76ee\u5f55\u7684 data \u6587\u4ef6\u5939 jms_network = 192 . 168 . 1 . 0 / 24 # \u8bbe\u7f6e\u9632\u706b\u5899\u9700\u8981 , \u6388\u6743\u6574\u4e2a\u7f51\u6bb5 , \u8bf7\u4fee\u6539\u6210\u4f60\u90e8\u7f72 jumpserver \u7684\u8d44\u4ea7\u7f51\u6bb5 enable_mysql = True # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False , \u5e76\u5728\u4e0a\u9762\u6307\u5b9a\u5373\u53ef enable_redis = True # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False , \u5e76\u5728\u4e0a\u9762\u6307\u5b9a\u5373\u53ef enable_selinux = True # \u5982\u679c\u4f60\u7684\u8d44\u4ea7\u5173\u95ed\u4e86 selinux , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False enable_firewalld = True # \u5982\u679c\u4f60\u7684\u8d44\u4ea7\u5173\u95ed\u4e86 firewalld , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False \u8bf7\u4ed4\u7ec6\u770b\u8bf4\u660e 7. \u914d\u7f6e\u4e92\u4fe1 \u00b6 ansible-playbook deploy_user.yml -uroot -k \u6309\u63d0\u793a\u8f93\u5165\u90e8\u7f72\u76ee\u6807\u673a\u5668\u7684 root \u7528\u6237\u5bc6\u7801 8. \u6d4b\u8bd5\u4e92\u4fe1 \u00b6 ansible all -m shell -a 'whoami' 9. \u5f00\u59cb\u90e8\u7f72 \u00b6 ansible-playbook deploy.yml \u5982\u679c\u5b89\u88c5\u8fc7\u7a0b\u63d0\u793a\u9519\u8bef, \u53ef\u4ee5\u5c1d\u8bd5\u91cd\u65b0\u6267\u884c ansible-playbook deploy.yml \u6682\u65f6\u672a\u96c6\u6210\u5347\u7ea7\u529f\u80fd, \u6682\u65f6\u672a\u96c6\u6210\u5378\u8f7d\u529f\u80fd(\u7b49\u5f85\u540e\u7eed\u66f4\u65b0) \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"Ansible \u90e8\u7f72"},{"location":"install/ansible_install/#ansible","text":"","title":"Ansible \u96c6\u7fa4\u90e8\u7f72"},{"location":"install/ansible_install/#ansible-playbook","text":"\u672c\u9879\u76ee\u8bf7\u5148\u81ea\u884c\u8c03\u4f18\u540e\u518d\u4f7f\u7528, \u8bf7\u52ff\u76f4\u63a5\u5728\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u4f7f\u7528 \u8bf4\u660e \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u4e13\u4e1a\u7684\u80fd\u529b\u6765\u89e3\u51b3\u4e00\u4e9b\u96c6\u7fa4\u95ee\u9898\uff0c\u5982\u96c6\u7fa4\u5d29\u6e83 \u96c6\u7fa4\u5206\u79bb \u96c6\u7fa4\u6269\u5c55 lvs \u8d1f\u8f7d\u5747\u8861\u7b56\u7565 \u6545\u969c\u6392\u67e5 \u4ee5\u53ca \u96c6\u7fa4\u7ec4\u4ef6\u5b58\u6d3b\u68c0\u6d4b\u673a\u5236\u7b49\u3002\u5728\u8fd9\u4e9b\u95ee\u9898\u4e0a\u4f60\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97 JumpServer \u989d\u5916\u7684\u6280\u672f\u652f\u6301\u3002 \u90e8\u7f72\u76ee\u6807\u673a\u5668\u9700\u6ee1\u8db3\u4ee5\u4e0b\u6761\u4ef6 \u81f3\u5c11\u9700\u8981 3 \u5b9e\u4f8b nfs mariadb redis \u53ef\u4ee5\u5904\u4e8e\u540c\u4e00\u4e3b\u673a core koko guacamole \u53ef\u4ee5\u5904\u4e8e\u540c\u4e00\u4e3b\u673a nginx \u5fc5\u987b\u4f4d\u4e8e\u5355\u72ec\u7684\u4e3b\u673a \u6ce8: MariaDB Redis \u672a\u505a\u96c6\u7fa4, \u8bf7\u6839\u636e\u5b9e\u9645\u73af\u5883\u81ea\u884c\u8fdb\u884c\u90e8\u7f72\u6216\u8005\u9009\u62e9\u5df2\u7ecf\u5c31\u7eea\u7684 MySQL Server \u548c Redis Server","title":"Ansible-Playbook"},{"location":"install/ansible_install/#1","text":"\u4e2d\u63a7\u673a\u53ef\u4ee5\u662f\u90e8\u7f72\u76ee\u6807\u673a\u5668\u4e2d\u7684\u67d0\u4e00\u53f0 \u7cfb\u7edf\u8981\u6c42 CentOS 7.x \u64cd\u4f5c\u7cfb\u7edf \u8be5\u673a\u5668\u9700\u5f00\u653e\u5916\u7f51\u8bbf\u95ee \u9700\u8981\u90e8\u7f72\u4e2d\u63a7\u673a\u4e00\u53f0","title":"1. \u90e8\u7f72\u4e2d\u63a7"},{"location":"install/ansible_install/#2","text":"\u4ee5 root \u7528\u6237\u767b\u5f55\u4e2d\u63a7\u673a, \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4 yum -y install epel-release git curl sshpass yum -y install python2-pip","title":"2. \u5b89\u88c5\u4f9d\u8d56"},{"location":"install/ansible_install/#3-ssh-key","text":"ssh-keygen -t rsa \u751f\u6210 ssh key","title":"3. SSH key"},{"location":"install/ansible_install/#4","text":"cd /opt git clone --depth = 1 https://github.com/wojiushixiaobai/jms_ansible.git","title":"4. \u4e0b\u8f7d\u9879\u76ee"},{"location":"install/ansible_install/#5","text":"cd jms_ansible mkdir ~/.pip echo -e \"[easy_install]\\nindex_url = https://mirrors.aliyun.com/pypi/simple/\" > ~/.pydistutils.cfg echo -e \"[global]\\nindex-url = https://mirrors.aliyun.com/pypi/simple/\\n\\n[install]\\ntrusted-host=mirrors.aliyun.com\" > ~/.pip/pip.conf pip install -r requirements/requirements.txt","title":"5. \u5b89\u88c5\u4f9d\u8d56"},{"location":"install/ansible_install/#6","text":"vi inventory.ini [nfs] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 nfs \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 [nginx] 192 . 168 . 1 . 146 # \u7528\u4f5c\u90e8\u7f72 nginx \u670d\u52a1\u5668\u7684 ip , \u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7\u5373\u53ef [mariadb] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 mysql \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u53ef\u4ee5\u4e0d\u8bbe\u7f6e [redis] 192 . 168 . 1 . 147 # \u7528\u4f5c\u90e8\u7f72 redis \u670d\u52a1\u5668\u7684 ip , \u76ee\u524d\u53ea\u80fd\u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u53ef\u4ee5\u4e0d\u8bbe\u7f6e [core_master] # \u7528\u4f5c\u90e8\u7f72 core \u4e3b\u670d\u52a1\u5668\u7684 ip , \u6307\u5b9a\u4e00\u53f0\u8d44\u4ea7\u5373\u53ef 192 . 168 . 1 . 148 [core_slave] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 core \u4ece\u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u4e3b\u4ece\u4e4b\u95f4\u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [koko] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 koko \u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [guacamole] 192 . 168 . 1 . 148 # \u7528\u4f5c\u90e8\u7f72 guacamole \u670d\u52a1\u5668\u7684 ip , \u53ef\u4ee5\u6307\u5b9a\u591a\u53f0\u8d44\u4ea7 , \u901a\u8fc7 tengine \u8d1f\u8f7d\u5747\u8861 # 192 . 168 . 1 .xx # 192 . 168 . x .xx [nfs:vars] nfs_perm = 192 . 168 . 1 . 0 / 24 ( rw , sync , no_root_squash ) # \u8fd9\u91cc\u662f nfs \u7684\u7b56\u7565 , \u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u8fdb\u884c\u4fee\u6539 , \u4e5f\u53ef\u4ee5\u76f4\u63a5\u6388\u6743\u7f51\u6bb5 [nginx:vars] # https_port = 443 # \u6682\u65f6\u4e0d\u8bbe\u7f6e , \u7b49\u5f85\u540e\u7eed\u66f4\u65b0 ssh_port = 2222 # nginx \u5bf9\u5916\u7684 ssh \u7aef\u53e3 , \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6b64\u7aef\u53e3\u767b\u5f55\u5230 jumpserver \u8df3\u677f\u673a [db_info:children] mariadb core_master core_slave [db_info:vars] db_name = jumpserver # \u4e3a jumpserver \u521b\u5efa\u7684\u6570\u636e\u5e93\u540d\u79f0 db_user = jumpserver # \u4e3a jumpserver \u521b\u5efa\u7684\u8fde\u63a5\u7528\u6237 db_host = 192 . 168 . 1 . 147 # \u8bf7\u6539\u6210\u4f60\u7684 mysql \u6570\u636e\u5e93 ip db_passwd = weakPassword # \u8bf7\u66f4\u6539\u6b64\u5bc6\u7801\u4e3a\u66f4\u5b89\u5168\u7684\u5bc6\u7801 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u5728\u8fd9\u91cc\u6307\u5b9a [redis_info:children] redis core_master core_slave koko [redis_info:vars] redis_host = 192 . 168 . 1 . 147 # redis \u670d\u52a1\u5668\u7684 ip redis_passwd = weakPassword # redis \u670d\u52a1\u5668\u7684\u5bc6\u7801 # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u5728\u8fd9\u91cc\u6307\u5b9a [nfs_info:children] nginx core_master core_slave [nfs_info:vars] nfs_server = 192 . 168 . 1 . 147 # \u6b64\u5904\u4fee\u6539\u6210\u4f60\u7684 nfs \u670d\u52a1\u5668 ip [nginx_info:children] nginx koko [nginx_info:vars] http_port = 80 # nginx \u5bf9\u5916\u7684 http \u7aef\u53e3 , \u7528\u6237\u901a\u8fc7\u6b64\u7aef\u53e3\u6765\u8bbf\u95ee jumpserver [core:children] core_master core_slave [core:vars] secret_key = gIQ3sUfkCQXd295d8Wwkvu3stAoeVAGvpsiblCEjRud9uwIFB0 # jumpserver \u9ed8\u8ba4\u7684\u52a0\u5bc6 key , \u8bf7\u66f4\u6539\u5e76\u7262\u8bb0 # \u4e22\u5931\u6b64 key \u4f1a\u5bfc\u81f4\u52a0\u5bc6\u7684\u6240\u6709\u6570\u636e\u65e0\u6cd5\u89e3\u5bc6 , \u8bf7\u4fdd\u7ba1\u5230\u5b89\u5168\u7684\u4f4d\u7f6e [core_info:children] core_master core_slave koko guacamole [core_info:vars] bootstrap_token = j6qfkdQWWrdVACcy # koko \u548c guacamole \u8ba4\u8bc1\u65f6\u9700\u8981\u7684 token , \u8bf7\u968f\u673a\u6570\u751f\u6210\u5e76\u66f4\u6539 , \u4e0d\u9700\u8981\u8bb0\u4f4f nginx_server = 192 . 168 . 1 . 146 # nginx \u670d\u52a1\u5668\u7684 ip \u5730\u5740 [ all :vars] ansible_user = root install_dir = / opt # jumpserver\u5b89\u88c5\u7684\u4f4d\u7f6e , \u5efa\u8bae\u9ed8\u8ba4 , \u4fee\u6539\u6b64\u9009\u9879 , \u4e0b\u9762 nfs \u5ba2\u6237\u7aef\u6302\u8f7d\u7684\u4f4d\u7f6e\u4e5f\u9700\u8981\u4fee\u6539 ntp_server = ntp1.aliyun. com # ntp \u9700\u8981\u65f6\u95f4\u540c\u6b65 jms_version = 1 . 5 . 9 # jumpserver \u7684\u7248\u672c nfs_src_dir = /data # nfs \u670d\u52a1\u7aef\u6302\u8f7d\u4f4d\u7f6e , \u5efa\u8bae\u9ed8\u8ba4 nfs_dest_dir = /opt/ jumpserver/data # nfs \u5ba2\u6237\u7aef\u6302\u8f7d\u7684\u4f4d\u7f6e , \u5fc5\u987b\u6307\u5411 jumpserver \u5b89\u88c5\u76ee\u5f55\u7684 data \u6587\u4ef6\u5939 jms_network = 192 . 168 . 1 . 0 / 24 # \u8bbe\u7f6e\u9632\u706b\u5899\u9700\u8981 , \u6388\u6743\u6574\u4e2a\u7f51\u6bb5 , \u8bf7\u4fee\u6539\u6210\u4f60\u90e8\u7f72 jumpserver \u7684\u8d44\u4ea7\u7f51\u6bb5 enable_mysql = True # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 mysql server , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False , \u5e76\u5728\u4e0a\u9762\u6307\u5b9a\u5373\u53ef enable_redis = True # \u5982\u679c\u4f60\u5df2\u7ecf\u6709\u90e8\u7f72\u597d\u7684 redis server , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False , \u5e76\u5728\u4e0a\u9762\u6307\u5b9a\u5373\u53ef enable_selinux = True # \u5982\u679c\u4f60\u7684\u8d44\u4ea7\u5173\u95ed\u4e86 selinux , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False enable_firewalld = True # \u5982\u679c\u4f60\u7684\u8d44\u4ea7\u5173\u95ed\u4e86 firewalld , \u8bf7\u4fee\u6539\u6b64\u9879\u4e3a False \u8bf7\u4ed4\u7ec6\u770b\u8bf4\u660e","title":"6. \u5206\u914d\u8d44\u6e90"},{"location":"install/ansible_install/#7","text":"ansible-playbook deploy_user.yml -uroot -k \u6309\u63d0\u793a\u8f93\u5165\u90e8\u7f72\u76ee\u6807\u673a\u5668\u7684 root \u7528\u6237\u5bc6\u7801","title":"7. \u914d\u7f6e\u4e92\u4fe1"},{"location":"install/ansible_install/#8","text":"ansible all -m shell -a 'whoami'","title":"8. \u6d4b\u8bd5\u4e92\u4fe1"},{"location":"install/ansible_install/#9","text":"ansible-playbook deploy.yml \u5982\u679c\u5b89\u88c5\u8fc7\u7a0b\u63d0\u793a\u9519\u8bef, \u53ef\u4ee5\u5c1d\u8bd5\u91cd\u65b0\u6267\u884c ansible-playbook deploy.yml \u6682\u65f6\u672a\u96c6\u6210\u5347\u7ea7\u529f\u80fd, \u6682\u65f6\u672a\u96c6\u6210\u5378\u8f7d\u529f\u80fd(\u7b49\u5f85\u540e\u7eed\u66f4\u65b0) \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"9. \u5f00\u59cb\u90e8\u7f72"},{"location":"install/docker_install/","text":"Docker \u5b89\u88c5 \u00b6 JumpServer \u5c01\u88c5\u4e86\u4e00\u4e2a All in one Docker, \u53ef\u4ee5\u5feb\u901f\u542f\u52a8\u3002\u8be5\u955c\u50cf\u96c6\u6210\u4e86\u6240\u9700\u8981\u7684\u7ec4\u4ef6, \u652f\u6301\u4f7f\u7528\u5916\u7f6e Database \u548c Redis Docker \u5feb\u901f\u90e8\u7f72 \u00b6 \u4f7f\u7528 root \u8eab\u4efd\u8f93\u5165 \u73af\u5883\u8fc1\u79fb\u548c\u66f4\u65b0\u5347\u7ea7\u8bf7\u68c0\u67e5 SECRET_KEY \u662f\u5426\u4e0e\u4e4b\u524d\u8bbe\u7f6e\u4e00\u81f4, \u4e0d\u80fd\u968f\u673a\u751f\u6210, \u5426\u5219\u6570\u636e\u5e93\u6240\u6709\u52a0\u5bc6\u7684\u5b57\u6bb5\u5747\u65e0\u6cd5\u89e3\u5bc6 Linux \u751f\u6210\u968f\u673a\u52a0\u5bc6\u79d8\u94a5, \u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4 if [ ! \" $SECRET_KEY \" ] ; then SECRET_KEY = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50 ` ; echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.bashrc ; echo $SECRET_KEY ; else echo $SECRET_KEY ; fi if [ ! \" $BOOTSTRAP_TOKEN \" ] ; then BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` ; echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.bashrc ; echo $BOOTSTRAP_TOKEN ; else echo $BOOTSTRAP_TOKEN ; fi macOS \u751f\u6210\u968f\u673a key \u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4 if [ ! \" $SECRET_KEY \" ] ; then SECRET_KEY = ` LC_CTYPE = C tr -dc A-Za-z0-9 < /dev/urandom | head -c 50 ` ; echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.zshrc ; echo $SECRET_KEY ; else echo $SECRET_KEY ; fi if [ ! \" $BOOTSTRAP_TOKEN \" ] ; then BOOTSTRAP_TOKEN = ` LC_CTYPE = C tr -dc A-Za-z0-9 < /dev/urandom | head -c 16 ` ; echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.zshrc ; echo $BOOTSTRAP_TOKEN ; else echo $BOOTSTRAP_TOKEN ; fi docker run --name jms_all -d \\ -p 80 :80 -p 2222 :2222 \\ -e SECRET_KEY = $SECRET_KEY \\ -e BOOTSTRAP_TOKEN = $BOOTSTRAP_TOKEN \\ jumpserver/jms_all:latest \u8bbf\u95ee \u00b6 \u6d4f\u89c8\u5668\u8bbf\u95ee: http://<\u5bb9\u5668\u6240\u5728\u670d\u52a1\u5668IP> SSH \u8bbf\u95ee: ssh -p 2222 <\u5bb9\u5668\u6240\u5728\u670d\u52a1\u5668IP> XShell \u7b49\u5de5\u5177\u8bf7\u6dfb\u52a0 connection \u8fde\u63a5, \u9ed8\u8ba4 ssh \u7aef\u53e3 2222 \u9ed8\u8ba4\u7ba1\u7406\u5458\u8d26\u6237 admin \u5bc6\u7801 admin \u5916\u7f6e\u6570\u636e\u5e93\u8981\u6c42 \u00b6 mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6 mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.6 \u6570\u636e\u5e93\u7f16\u7801\u8981\u6c42 uft8 \u521b\u5efa\u6570\u636e\u5e93 create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '%' identified by 'weakPassword' ; \u989d\u5916\u53d8\u91cf\u8bf4\u660e SECRET_KEY = ****** BOOTSTRAP_TOKEN = ****** DB_HOST = mysql_host DB_PORT = 3306 DB_USER = jumpserver DB_PASSWORD = weakPassword DB_NAME = jumpserver REDIS_HOST = redis_host REDIS_PORT = 6379 REDIS_PASSWORD = weakPassword VOLUME /opt/jumpserver/data/media VOLUME /var/lib/mysql docker run --name jms_all -d \\ -v /opt/jumpserver:/opt/jumpserver/data/media \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ -e DB_HOST = 192 .168.x.x \\ -e DB_PORT = 3306 \\ -e DB_USER = root \\ -e DB_PASSWORD = xxx \\ -e DB_NAME = jumpserver \\ -e REDIS_HOST = 192 .168.x.x \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = xxx \\ jumpserver/jms_all:latest Docker-Compose \u90e8\u7f72 \u00b6 .env \u7684\u53d8\u91cf \u7528\u5728 docker-compose \u91cc\u9762\u4f7f\u7528, \u5c3d\u91cf\u81ea\u5df1\u8c03\u8bd5\u4e00\u904d\u540e\u518d\u4f7f\u7528 git clone https://github.com/jumpserver/Dockerfile.git cd Dockerfile cat .env docker-compose up \u4ed3\u5e93\u5730\u5740 \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"\u5bb9\u5668\u90e8\u7f72"},{"location":"install/docker_install/#docker","text":"JumpServer \u5c01\u88c5\u4e86\u4e00\u4e2a All in one Docker, \u53ef\u4ee5\u5feb\u901f\u542f\u52a8\u3002\u8be5\u955c\u50cf\u96c6\u6210\u4e86\u6240\u9700\u8981\u7684\u7ec4\u4ef6, \u652f\u6301\u4f7f\u7528\u5916\u7f6e Database \u548c Redis","title":"Docker \u5b89\u88c5"},{"location":"install/docker_install/#docker_1","text":"\u4f7f\u7528 root \u8eab\u4efd\u8f93\u5165 \u73af\u5883\u8fc1\u79fb\u548c\u66f4\u65b0\u5347\u7ea7\u8bf7\u68c0\u67e5 SECRET_KEY \u662f\u5426\u4e0e\u4e4b\u524d\u8bbe\u7f6e\u4e00\u81f4, \u4e0d\u80fd\u968f\u673a\u751f\u6210, \u5426\u5219\u6570\u636e\u5e93\u6240\u6709\u52a0\u5bc6\u7684\u5b57\u6bb5\u5747\u65e0\u6cd5\u89e3\u5bc6 Linux \u751f\u6210\u968f\u673a\u52a0\u5bc6\u79d8\u94a5, \u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4 if [ ! \" $SECRET_KEY \" ] ; then SECRET_KEY = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50 ` ; echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.bashrc ; echo $SECRET_KEY ; else echo $SECRET_KEY ; fi if [ ! \" $BOOTSTRAP_TOKEN \" ] ; then BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` ; echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.bashrc ; echo $BOOTSTRAP_TOKEN ; else echo $BOOTSTRAP_TOKEN ; fi macOS \u751f\u6210\u968f\u673a key \u53ef\u4ee5\u7528\u4e0b\u9762\u7684\u547d\u4ee4 if [ ! \" $SECRET_KEY \" ] ; then SECRET_KEY = ` LC_CTYPE = C tr -dc A-Za-z0-9 < /dev/urandom | head -c 50 ` ; echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.zshrc ; echo $SECRET_KEY ; else echo $SECRET_KEY ; fi if [ ! \" $BOOTSTRAP_TOKEN \" ] ; then BOOTSTRAP_TOKEN = ` LC_CTYPE = C tr -dc A-Za-z0-9 < /dev/urandom | head -c 16 ` ; echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.zshrc ; echo $BOOTSTRAP_TOKEN ; else echo $BOOTSTRAP_TOKEN ; fi docker run --name jms_all -d \\ -p 80 :80 -p 2222 :2222 \\ -e SECRET_KEY = $SECRET_KEY \\ -e BOOTSTRAP_TOKEN = $BOOTSTRAP_TOKEN \\ jumpserver/jms_all:latest","title":"Docker \u5feb\u901f\u90e8\u7f72"},{"location":"install/docker_install/#_1","text":"\u6d4f\u89c8\u5668\u8bbf\u95ee: http://<\u5bb9\u5668\u6240\u5728\u670d\u52a1\u5668IP> SSH \u8bbf\u95ee: ssh -p 2222 <\u5bb9\u5668\u6240\u5728\u670d\u52a1\u5668IP> XShell \u7b49\u5de5\u5177\u8bf7\u6dfb\u52a0 connection \u8fde\u63a5, \u9ed8\u8ba4 ssh \u7aef\u53e3 2222 \u9ed8\u8ba4\u7ba1\u7406\u5458\u8d26\u6237 admin \u5bc6\u7801 admin","title":"\u8bbf\u95ee"},{"location":"install/docker_install/#_2","text":"mysql \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.6 mariadb \u7248\u672c\u9700\u8981\u5927\u4e8e\u7b49\u4e8e 5.5.6 \u6570\u636e\u5e93\u7f16\u7801\u8981\u6c42 uft8 \u521b\u5efa\u6570\u636e\u5e93 create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '%' identified by 'weakPassword' ; \u989d\u5916\u53d8\u91cf\u8bf4\u660e SECRET_KEY = ****** BOOTSTRAP_TOKEN = ****** DB_HOST = mysql_host DB_PORT = 3306 DB_USER = jumpserver DB_PASSWORD = weakPassword DB_NAME = jumpserver REDIS_HOST = redis_host REDIS_PORT = 6379 REDIS_PASSWORD = weakPassword VOLUME /opt/jumpserver/data/media VOLUME /var/lib/mysql docker run --name jms_all -d \\ -v /opt/jumpserver:/opt/jumpserver/data/media \\ -p 80 :80 \\ -p 2222 :2222 \\ -e SECRET_KEY = xxxxxx \\ -e BOOTSTRAP_TOKEN = xxx \\ -e DB_HOST = 192 .168.x.x \\ -e DB_PORT = 3306 \\ -e DB_USER = root \\ -e DB_PASSWORD = xxx \\ -e DB_NAME = jumpserver \\ -e REDIS_HOST = 192 .168.x.x \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = xxx \\ jumpserver/jms_all:latest","title":"\u5916\u7f6e\u6570\u636e\u5e93\u8981\u6c42"},{"location":"install/docker_install/#docker-compose","text":".env \u7684\u53d8\u91cf \u7528\u5728 docker-compose \u91cc\u9762\u4f7f\u7528, \u5c3d\u91cf\u81ea\u5df1\u8c03\u8bd5\u4e00\u904d\u540e\u518d\u4f7f\u7528 git clone https://github.com/jumpserver/Dockerfile.git cd Dockerfile cat .env docker-compose up \u4ed3\u5e93\u5730\u5740 \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"Docker-Compose \u90e8\u7f72"},{"location":"install/install_security/","text":"\u5b89\u5168\u5efa\u8bae \u00b6 JumpServer \u6240\u5728\u670d\u52a1\u5668\u64cd\u4f5c\u7cfb\u7edf\u5e94\u8be5\u5347\u7ea7\u5230\u6700\u65b0 JumpServer \u4f9d\u8d56\u7684\u8f6f\u4ef6\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u3001redis \u7b49\u4f9d\u8d56\u7ec4\u4ef6\u8bf7\u52ff\u4f7f\u7528\u5f31\u53e3\u4ee4\u5bc6\u7801 \u4e0d\u63a8\u8350\u5173\u95ed firewalld \u548c selinux \u53ea\u5f00\u653e\u5fc5\u8981\u7684\u7aef\u53e3\uff0c\u5fc5\u8981\u7684\u8bdd\u8bf7\u901a\u8fc7 vpn \u6216\u8005 sslvpn \u8bbf\u95ee JumpServer \u5982\u679c\u5fc5\u987b\u5f00\u653e\u5230\u5916\u7f51\u4f7f\u7528\uff0c\u4f60\u5e94\u8be5\u90e8\u7f72 web \u5e94\u7528\u9632\u706b\u5899\u505a\u5b89\u5168\u8fc7\u6ee4 \u8bf7\u90e8\u7f72 ssl \u8bc1\u4e66\u901a\u8fc7 https \u534f\u8bae\u6765\u8bbf\u95ee JumpServer JumpServer \u4e0d\u8981\u4f7f\u7528\u5f31\u53e3\u4ee4\u5bc6\u7801\uff0c\u5e94\u7acb\u5373\u6539\u6389\u9ed8\u8ba4\u7684 admin \u5bc6\u7801 \u63a8\u8350\u5f00\u542f MFA \u529f\u80fd\uff0c\u907f\u514d\u56e0\u5bc6\u7801\u6cc4\u9732\u5bfc\u81f4\u7684\u5b89\u5168\u95ee\u9898 \u5173\u6ce8\u5b98\u65b9\u66f4\u65b0\uff0c\u53ca\u65f6\u66f4\u65b0\u4fee\u590d\u6f0f\u6d1e\u7684\u7248\u672c \u5982\u53d1\u73b0 JumpServer \u5b89\u5168\u95ee\u9898\uff0c\u8bf7\u53cd\u9988\u7ed9\u6211\u4eec ibuler@fit2cloud.com","title":"\u5b89\u5168\u5efa\u8bae"},{"location":"install/install_security/#_1","text":"JumpServer \u6240\u5728\u670d\u52a1\u5668\u64cd\u4f5c\u7cfb\u7edf\u5e94\u8be5\u5347\u7ea7\u5230\u6700\u65b0 JumpServer \u4f9d\u8d56\u7684\u8f6f\u4ef6\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c \u670d\u52a1\u5668\u3001\u6570\u636e\u5e93\u3001redis \u7b49\u4f9d\u8d56\u7ec4\u4ef6\u8bf7\u52ff\u4f7f\u7528\u5f31\u53e3\u4ee4\u5bc6\u7801 \u4e0d\u63a8\u8350\u5173\u95ed firewalld \u548c selinux \u53ea\u5f00\u653e\u5fc5\u8981\u7684\u7aef\u53e3\uff0c\u5fc5\u8981\u7684\u8bdd\u8bf7\u901a\u8fc7 vpn \u6216\u8005 sslvpn \u8bbf\u95ee JumpServer \u5982\u679c\u5fc5\u987b\u5f00\u653e\u5230\u5916\u7f51\u4f7f\u7528\uff0c\u4f60\u5e94\u8be5\u90e8\u7f72 web \u5e94\u7528\u9632\u706b\u5899\u505a\u5b89\u5168\u8fc7\u6ee4 \u8bf7\u90e8\u7f72 ssl \u8bc1\u4e66\u901a\u8fc7 https \u534f\u8bae\u6765\u8bbf\u95ee JumpServer JumpServer \u4e0d\u8981\u4f7f\u7528\u5f31\u53e3\u4ee4\u5bc6\u7801\uff0c\u5e94\u7acb\u5373\u6539\u6389\u9ed8\u8ba4\u7684 admin \u5bc6\u7801 \u63a8\u8350\u5f00\u542f MFA \u529f\u80fd\uff0c\u907f\u514d\u56e0\u5bc6\u7801\u6cc4\u9732\u5bfc\u81f4\u7684\u5b89\u5168\u95ee\u9898 \u5173\u6ce8\u5b98\u65b9\u66f4\u65b0\uff0c\u53ca\u65f6\u66f4\u65b0\u4fee\u590d\u6f0f\u6d1e\u7684\u7248\u672c \u5982\u53d1\u73b0 JumpServer \u5b89\u5168\u95ee\u9898\uff0c\u8bf7\u53cd\u9988\u7ed9\u6211\u4eec ibuler@fit2cloud.com","title":"\u5b89\u5168\u5efa\u8bae"},{"location":"install/setup_by_fast/","text":"\u6781\u901f\u5b89\u88c5 \u00b6 \u8bf4\u660e \u5168\u65b0\u5b89\u88c5\u7684 Centos7 (7.x) \u9700\u8981\u8fde\u63a5 \u4e92\u8054\u7f51 \u4f7f\u7528 root \u7528\u6237\u6267\u884c \u8d44\u4ea7\u6570\u91cf\u4e0d\u591a\uff0c\u6216\u8005\u6d4b\u8bd5\u4f53\u9a8c\u7684\u7528\u6237\u8bf7\u4f7f\u7528\u672c\u811a\u672c\u5feb\u901f\u90e8\u7f72 \u5982\u679c\u8d44\u4ea7\u89c4\u6a21\u8f83\u5927\uff0c\u8bf7\u53c2\u8003 \u5206\u5e03\u5f0f\u90e8\u7f72 \u6587\u6863 \u6ce8\u610f: \u5bf9\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u4fee\u6539\u5747\u53ef\u80fd\u5bfc\u81f4\u5b89\u88c5\u5931\u8d25\uff0c\u63a8\u8350\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u8fdb\u884c\u8c03\u4f18 \u5b89\u88c5\u89c6\u9891 \u4e0b\u8f7d \u00b6 \u4e0b\u8f7d\u6587\u4ef6 cd /opt yum -y install wget git git clone --depth = 1 https://github.com/jumpserver/setuptools.git cd setuptools cp config_example.conf config.conf vi config.conf \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e, \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, \u5982\u679c\u4e0d\u77e5\u9053\u7528\u9014\u8bf7\u52ff\u4fee\u6539 # \u4ee5\u4e0b\u8bbe\u7f6e\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u9700\u8981\u4fee\u6539 # \u9700\u8981\u5b89\u88c5\u7684\u7248\u672c Version = 1 . 5 . 9 # Jms \u52a0\u5bc6\u914d\u7f6e SECRET_KEY = BOOTSTRAP_TOKEN = # \u6570\u636e\u5e93 \u914d\u7f6e , \u5982\u679c \u6570\u636e\u5e93 \u5b89\u88c5\u5728\u5176\u4ed6\u7684\u670d\u52a1\u5668 , \u8bf7\u4fee\u6539\u4e0b\u9762\u8bbe\u7f6e DB_HOST = 127 . 0 . 0 . 1 DB_PORT = 3306 DB_USER = jumpserver DB_PASSWORD = DB_NAME = jumpserver # Redis \u914d\u7f6e , \u5982\u679c Redis \u5b89\u88c5\u5728\u5176\u4ed6\u7684\u670d\u52a1\u5668 , \u8bf7\u4fee\u6539\u4e0b\u9762\u8bbe\u7f6e REDIS_HOST = 127 . 0 . 0 . 1 REDIS_PORT = 6379 REDIS_PASSWORD = # \u670d\u52a1\u7aef\u53e3\u8bbe\u7f6e , \u5982\u679c\u4e91\u670d\u52a1\u5668\u672a\u5907\u6848\u8bf7\u4fee\u6539 http_port \u7aef\u53e3\u4e3a\u5176\u4ed6\u7aef\u53e3 http_port = 80 ssh_port = 2222 # \u670d\u52a1\u5b89\u88c5\u76ee\u5f55 install_dir = / opt Server_IP = `ip addr | grep 'state UP' - A2 | grep inet | egrep - v '(127.0.0.1|inet6|docker)' | awk '{print $2}' | tr - d \"addr:\" | head - n 1 | cut - d / - f1` Docker_IP = `ip addr | grep docker.* | grep inet | awk '{print $2}' | head - n 1 ` \u5b89\u88c5 \u00b6 Install ./jmsctl.sh install \u5e2e\u52a9 \u00b6 Help ./jmsctl.sh -h \u5347\u7ea7 \u00b6 Upgrade cd /opt/setuptools git pull ./jmsctl.sh upgrade \u5982\u679c\u7f51\u7edc\u6709\u95ee\u9898\u65e0\u6cd5\u8fde\u63a5\u5230 github wget -O /opt/setuptools.tar.gz http://demo.jumpserver.org/download/setuptools.tar.gz cd /opt tar -xf setuptools.tar.gz cd setuptools git pull ./jmsctl.sh -h \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"\u6781\u901f\u90e8\u7f72"},{"location":"install/setup_by_fast/#_1","text":"\u8bf4\u660e \u5168\u65b0\u5b89\u88c5\u7684 Centos7 (7.x) \u9700\u8981\u8fde\u63a5 \u4e92\u8054\u7f51 \u4f7f\u7528 root \u7528\u6237\u6267\u884c \u8d44\u4ea7\u6570\u91cf\u4e0d\u591a\uff0c\u6216\u8005\u6d4b\u8bd5\u4f53\u9a8c\u7684\u7528\u6237\u8bf7\u4f7f\u7528\u672c\u811a\u672c\u5feb\u901f\u90e8\u7f72 \u5982\u679c\u8d44\u4ea7\u89c4\u6a21\u8f83\u5927\uff0c\u8bf7\u53c2\u8003 \u5206\u5e03\u5f0f\u90e8\u7f72 \u6587\u6863 \u6ce8\u610f: \u5bf9\u7cfb\u7edf\u8fdb\u884c\u4efb\u4f55\u4fee\u6539\u5747\u53ef\u80fd\u5bfc\u81f4\u5b89\u88c5\u5931\u8d25\uff0c\u63a8\u8350\u5728\u5b89\u88c5\u5b8c\u6210\u540e\u518d\u8fdb\u884c\u8c03\u4f18 \u5b89\u88c5\u89c6\u9891","title":"\u6781\u901f\u5b89\u88c5"},{"location":"install/setup_by_fast/#_2","text":"\u4e0b\u8f7d\u6587\u4ef6 cd /opt yum -y install wget git git clone --depth = 1 https://github.com/jumpserver/setuptools.git cd setuptools cp config_example.conf config.conf vi config.conf \u914d\u7f6e\u6587\u4ef6\u8bf4\u660e, \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, \u5982\u679c\u4e0d\u77e5\u9053\u7528\u9014\u8bf7\u52ff\u4fee\u6539 # \u4ee5\u4e0b\u8bbe\u7f6e\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e0d\u9700\u8981\u4fee\u6539 # \u9700\u8981\u5b89\u88c5\u7684\u7248\u672c Version = 1 . 5 . 9 # Jms \u52a0\u5bc6\u914d\u7f6e SECRET_KEY = BOOTSTRAP_TOKEN = # \u6570\u636e\u5e93 \u914d\u7f6e , \u5982\u679c \u6570\u636e\u5e93 \u5b89\u88c5\u5728\u5176\u4ed6\u7684\u670d\u52a1\u5668 , \u8bf7\u4fee\u6539\u4e0b\u9762\u8bbe\u7f6e DB_HOST = 127 . 0 . 0 . 1 DB_PORT = 3306 DB_USER = jumpserver DB_PASSWORD = DB_NAME = jumpserver # Redis \u914d\u7f6e , \u5982\u679c Redis \u5b89\u88c5\u5728\u5176\u4ed6\u7684\u670d\u52a1\u5668 , \u8bf7\u4fee\u6539\u4e0b\u9762\u8bbe\u7f6e REDIS_HOST = 127 . 0 . 0 . 1 REDIS_PORT = 6379 REDIS_PASSWORD = # \u670d\u52a1\u7aef\u53e3\u8bbe\u7f6e , \u5982\u679c\u4e91\u670d\u52a1\u5668\u672a\u5907\u6848\u8bf7\u4fee\u6539 http_port \u7aef\u53e3\u4e3a\u5176\u4ed6\u7aef\u53e3 http_port = 80 ssh_port = 2222 # \u670d\u52a1\u5b89\u88c5\u76ee\u5f55 install_dir = / opt Server_IP = `ip addr | grep 'state UP' - A2 | grep inet | egrep - v '(127.0.0.1|inet6|docker)' | awk '{print $2}' | tr - d \"addr:\" | head - n 1 | cut - d / - f1` Docker_IP = `ip addr | grep docker.* | grep inet | awk '{print $2}' | head - n 1 `","title":"\u4e0b\u8f7d"},{"location":"install/setup_by_fast/#_3","text":"Install ./jmsctl.sh install","title":"\u5b89\u88c5"},{"location":"install/setup_by_fast/#_4","text":"Help ./jmsctl.sh -h","title":"\u5e2e\u52a9"},{"location":"install/setup_by_fast/#_5","text":"Upgrade cd /opt/setuptools git pull ./jmsctl.sh upgrade \u5982\u679c\u7f51\u7edc\u6709\u95ee\u9898\u65e0\u6cd5\u8fde\u63a5\u5230 github wget -O /opt/setuptools.tar.gz http://demo.jumpserver.org/download/setuptools.tar.gz cd /opt tar -xf setuptools.tar.gz cd setuptools git pull ./jmsctl.sh -h \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"\u5347\u7ea7"},{"location":"install/setup_by_prod/","text":"\u5206\u5e03\u5f0f\u90e8\u7f72 \u00b6 \u672c\u6587\u6863\u4e0d\u5e94\u8be5\u76f4\u63a5\u4f7f\u7528\u5728\u751f\u4ea7\u73af\u5883 \u8bf4\u660e \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u4e13\u4e1a\u7684\u80fd\u529b\u6765\u89e3\u51b3\u4e00\u4e9b\u96c6\u7fa4\u95ee\u9898\uff0c\u5982\u96c6\u7fa4\u5d29\u6e83 \u96c6\u7fa4\u5206\u79bb \u96c6\u7fa4\u6269\u5c55 lvs \u8d1f\u8f7d\u5747\u8861\u7b56\u7565 \u6545\u969c\u6392\u67e5 \u4ee5\u53ca \u96c6\u7fa4\u7ec4\u4ef6\u5b58\u6d3b\u68c0\u6d4b\u673a\u5236\u7b49\u3002\u5728\u8fd9\u4e9b\u95ee\u9898\u4e0a\u4f60\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97 JumpServer \u989d\u5916\u7684\u6280\u672f\u652f\u6301\u3002 \u73af\u5883\u8bf4\u660e \u00b6 \u7cfb\u7edf: CentOS 7 NFS IP: 192.168.100.99 Mariadb IP: 192.168.100.10 Redis ip: 192.168.100.20 Core IP: 192.168.100.30 192.168.100.31 koko IP: 192.168.100.40 192.168.100.41 Guacamole IP: 192.168.100.50 192.168.100.51 Tengine IP: 192.168.100.100 \u5b89\u5168\u8bf4\u660e \u00b6 ssh\u3001telnet \u534f\u8bae\u8d44\u4ea7\u7684\u9632\u706b\u5899\u8bbe\u7f6e\u5141\u8bb8 koko \u4e0e core \u8bbf\u95ee rdp\u3001vnc \u534f\u8bae\u8d44\u4ea7\u7684\u9632\u706b\u5899\u8bbe\u7f6e\u5141\u8bb8 guacamole \u4e0e core \u8bbf\u95ee \u5176\u4ed6 \u00b6 \u6700\u7ec8\u7528\u6237\u90fd\u662f\u901a\u8fc7 Tengine \u53cd\u5411\u4ee3\u7406\u8bbf\u95ee \u8d1f\u8f7d\u5747\u8861\u6a21\u5f0f, \u4e03\u5c42\u4f7f\u7528 session_sticky, \u56db\u5c42\u7528 least_conn jumpserver/data \u76ee\u5f55\u9700\u8981\u540c\u6b65 koko \u9700\u8981\u4f7f\u7528\u540c\u4e00\u4e2a redis \u751f\u4ea7\u5efa\u8bae \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5982 NetScaler \u7c7b\u4f3c\u7684\u786c\u4ef6\u6216\u8005\u8f6f\u4ef6\u6765\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\uff0c\u8bf7\u5904\u7406\u597d session \u95ee\u9898 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u5e94\u8be5\u66ff\u6362 nfs \u4e3a\u66f4\u5f3a\u5927\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u5982\uff1a Ceph \u5982\u679c\u4f60\u7684\u8bbe\u5907\u5f88\u591a\u4f7f\u7528\u4eba\u6570\u4e5f\u5f88\u591a\uff0c\u4f60\u5e94\u8be5\u90e8\u7f72\u5206\u5e03\u5f0f\u5173\u7cfb\u578b\u6570\u636e\u5e93 \u4f60\u5e94\u8be5\u90e8\u7f72\u591a\u4e2a\u72ec\u7acb\u7684 Redis \u8d1f\u8f7d\u5747\u8861\u8fdb\u884c\u5bb9\u9519\uff08\u5f53\u524d\u7248\u672c\u7684 JumpServer \u8fd8\u4e0d\u652f\u6301 Redis Cluster\uff09 Tengine RPM \u4f7f\u7528 wojiushixiaobai \u7ef4\u62a4\u7684\u4e00\u4e2a rpm \u5305\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f60\u5e94\u8be5\u81ea\u884c\u7f16\u8bd1","title":"\u73af\u5883\u8bf4\u660e"},{"location":"install/setup_by_prod/#_1","text":"\u672c\u6587\u6863\u4e0d\u5e94\u8be5\u76f4\u63a5\u4f7f\u7528\u5728\u751f\u4ea7\u73af\u5883 \u8bf4\u660e \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u4e13\u4e1a\u7684\u80fd\u529b\u6765\u89e3\u51b3\u4e00\u4e9b\u96c6\u7fa4\u95ee\u9898\uff0c\u5982\u96c6\u7fa4\u5d29\u6e83 \u96c6\u7fa4\u5206\u79bb \u96c6\u7fa4\u6269\u5c55 lvs \u8d1f\u8f7d\u5747\u8861\u7b56\u7565 \u6545\u969c\u6392\u67e5 \u4ee5\u53ca \u96c6\u7fa4\u7ec4\u4ef6\u5b58\u6d3b\u68c0\u6d4b\u673a\u5236\u7b49\u3002\u5728\u8fd9\u4e9b\u95ee\u9898\u4e0a\u4f60\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97 JumpServer \u989d\u5916\u7684\u6280\u672f\u652f\u6301\u3002","title":"\u5206\u5e03\u5f0f\u90e8\u7f72"},{"location":"install/setup_by_prod/#_2","text":"\u7cfb\u7edf: CentOS 7 NFS IP: 192.168.100.99 Mariadb IP: 192.168.100.10 Redis ip: 192.168.100.20 Core IP: 192.168.100.30 192.168.100.31 koko IP: 192.168.100.40 192.168.100.41 Guacamole IP: 192.168.100.50 192.168.100.51 Tengine IP: 192.168.100.100","title":"\u73af\u5883\u8bf4\u660e"},{"location":"install/setup_by_prod/#_3","text":"ssh\u3001telnet \u534f\u8bae\u8d44\u4ea7\u7684\u9632\u706b\u5899\u8bbe\u7f6e\u5141\u8bb8 koko \u4e0e core \u8bbf\u95ee rdp\u3001vnc \u534f\u8bae\u8d44\u4ea7\u7684\u9632\u706b\u5899\u8bbe\u7f6e\u5141\u8bb8 guacamole \u4e0e core \u8bbf\u95ee","title":"\u5b89\u5168\u8bf4\u660e"},{"location":"install/setup_by_prod/#_4","text":"\u6700\u7ec8\u7528\u6237\u90fd\u662f\u901a\u8fc7 Tengine \u53cd\u5411\u4ee3\u7406\u8bbf\u95ee \u8d1f\u8f7d\u5747\u8861\u6a21\u5f0f, \u4e03\u5c42\u4f7f\u7528 session_sticky, \u56db\u5c42\u7528 least_conn jumpserver/data \u76ee\u5f55\u9700\u8981\u540c\u6b65 koko \u9700\u8981\u4f7f\u7528\u540c\u4e00\u4e2a redis \u751f\u4ea7\u5efa\u8bae \u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5982 NetScaler \u7c7b\u4f3c\u7684\u786c\u4ef6\u6216\u8005\u8f6f\u4ef6\u6765\u8fdb\u884c\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\uff0c\u8bf7\u5904\u7406\u597d session \u95ee\u9898 \u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u5e94\u8be5\u66ff\u6362 nfs \u4e3a\u66f4\u5f3a\u5927\u7684\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff0c\u5982\uff1a Ceph \u5982\u679c\u4f60\u7684\u8bbe\u5907\u5f88\u591a\u4f7f\u7528\u4eba\u6570\u4e5f\u5f88\u591a\uff0c\u4f60\u5e94\u8be5\u90e8\u7f72\u5206\u5e03\u5f0f\u5173\u7cfb\u578b\u6570\u636e\u5e93 \u4f60\u5e94\u8be5\u90e8\u7f72\u591a\u4e2a\u72ec\u7acb\u7684 Redis \u8d1f\u8f7d\u5747\u8861\u8fdb\u884c\u5bb9\u9519\uff08\u5f53\u524d\u7248\u672c\u7684 JumpServer \u8fd8\u4e0d\u652f\u6301 Redis Cluster\uff09 Tengine RPM \u4f7f\u7528 wojiushixiaobai \u7ef4\u62a4\u7684\u4e00\u4e2a rpm \u5305\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f60\u5e94\u8be5\u81ea\u884c\u7f16\u8bd1","title":"\u5176\u4ed6"},{"location":"install/step_by_step/","text":"\u5b89\u88c5\u6587\u6863 \u00b6 \u63d0\u793a \u63a8\u8350\u4f7f\u7528 \u6781\u901f\u5b89\u88c5 \u5feb\u901f\u90e8\u7f72\uff0c\u8d44\u4ea7\u89c4\u6a21\u8f83\u5927\u53c2\u8003 \u5206\u5e03\u5f0f\u90e8\u7f72 \u8fdb\u884c\u90e8\u7f72 \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u5f3a\u7684\u52a8\u624b\u80fd\u529b, \u90e8\u7f72\u8fc7\u7a0b\u4e2d\u4f60\u4f1a\u9762\u4e34\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898 \u6ce8\u610f: \u4f7f\u7528\u672c\u6587\u6863\u4f60\u5c06\u65e0\u6cd5\u83b7\u5f97\u989d\u5916\u7684\u6280\u672f\u652f\u6301\uff0c\u5305\u62ec\u540e\u7eed\u7684\u5347\u7ea7\u5747\u9700\u8981\u81ea\u884c\u5904\u7406\uff0c\u6211\u4eec\u53ea\u63a8\u8350\u771f\u6b63\u6709\u9700\u8981\u7684\u8fd0\u7ef4\u5de5\u7a0b\u5e08\u8fdb\u884c\u4f7f\u7528 \u672c\u6587\u6863\u662f\u9488\u5bf9\u6240\u6709 Linux \u53d1\u884c\u7248 x86_64 \u7684\u5b89\u88c5\u8bf4\u660e, \u975e\u7279\u5b9a\u7cfb\u7edf\u8bf4\u660e\u6587\u6863, \u4f46\u662f\u793a\u4f8b\u4e2d\u6211\u4eec\u4ec5\u5c55\u793a Ubuntu \u548c Centos \u90e8\u5206(\u6ce8\u91ca\u90e8\u5206) \u9047\u5230\u95ee\u9898\u53ef\u4ee5\u53c2\u8003 \u5b89\u88c5\u89c6\u9891 JumpServer \u73af\u5883\u8981\u6c42: \u786c\u4ef6\u914d\u7f6e: 2\u4e2aCPU\u6838\u5fc3, 4G \u5185\u5b58, 50G \u786c\u76d8\uff08\u6700\u4f4e\uff09 \u64cd\u4f5c\u7cfb\u7edf: Linux \u53d1\u884c\u7248 x86_64 Python = 3.6.x Mysql Server \u2265 5.6 Mariadb Server \u2265 5.5.56 Redis \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 python3.6 mysql Redis \u00b6 \u63a8\u8350\u76f4\u63a5\u4ece\u4ed3\u5e93\u83b7\u53d6 \u6570\u636e\u5e93\u5b57\u7b26\u96c6\u8981\u6c42 : ``` mysql create database jumpserver default charset 'utf8' collate 'utf8_bin' ; ``` 2. \u521b\u5efa py3 \u865a\u62df\u73af\u5883 \u00b6 python3.6 -m venv /opt/py3 3. \u8f7d\u5165 py3 \u865a\u62df\u73af\u5883 \u00b6 source /opt/py3/bin/activate \u6bcf\u6b21\u64cd\u4f5c jumpserver \u90fd\u9700\u8981\u5148\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883 \u90e8\u5206\u7cfb\u7edf\u53ef\u80fd\u4f1a\u63d0\u793a source: not found, \u53ef\u4ee5\u4f7f\u7528 . \u4ee3\u66ff source . /opt/py3/bin/activate \u53ef\u4ee5\u5728 ~/.bashrc \u672b\u5c3e\u52a0\u5165 source /opt/py3/bin/activate \u81ea\u52a8\u8f7d\u5165\u73af\u5883 4. \u83b7\u53d6 jumpserver \u4ee3\u7801 \u00b6 cd /opt && \\ git clone --depth = 1 https://github.com/jumpserver/jumpserver.git \u5982\u679c\u6ca1\u6709\u5b89\u88c5 git \u8bf7\u5148\u5b89\u88c5, \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u4ece \u6b64\u5904 \u4e0b\u8f7d cd /opt wget http://demo.jumpserver.org/download/jumpserver/latest/jumpserver.tar.gz tar xf jumpserver.tar.gz 5. \u5b89\u88c5\u7f16\u8bd1\u73af\u5883\u4f9d\u8d56 \u00b6 cd /opt/jumpserver/requirements \u6839\u636e\u5f53\u524d\u7cfb\u7edf, \u9009\u62e9\u5bf9\u5e94\u7684\u6587\u4ef6\u6267\u884c\u5373\u53ef Centos: yum install -y $( cat rpm_requirements.txt ) Ubuntu: apt-get install -y $( cat deb_requirements.txt ) pip install wheel && \\ pip install --upgrade pip setuptools && \\ pip install -r requirements.txt \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883, \u4e2d\u95f4\u5982\u679c\u9047\u5230\u62a5\u9519\u4e00\u822c\u662f\u4f9d\u8d56\u5305\u6ca1\u88c5\u5168, \u53ef\u4ee5\u901a\u8fc7 \u641c\u7d22\u5f15\u64ce \u89e3\u51b3 \u56fd\u5185\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u52a0\u901f pip install wheel -i https://mirrors.aliyun.com/pypi/simple/ pip install --upgrade pip setuptools -i https://mirrors.aliyun.com/pypi/simple/ pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/ 6. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 cd /opt/jumpserver && \\ cp config_example.yml config.yml && \\ vi config.yml \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, \u53ef\u4ee5\u53c2\u8003\u6b64\u6a21\u7248 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 127.0.0.1 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : rBi41SrDqlX4zsx9e1L0cqTP DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True 7. \u542f\u52a8 jumpserver \u00b6 cd /opt/jumpserver ./jms start \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883 source /opt/py3/bin/activate \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d 8. \u6b63\u5e38\u90e8\u7f72 koko \u7ec4\u4ef6 \u00b6 cd /opt \u8bbf\u95ee \u6b64\u5904 \u4e0b\u8f7d\u5bf9\u5e94 release \u5305\u5e76\u89e3\u538b\u5230 /opt\u76ee\u5f55 \u5982\u679c\u7f51\u7edc\u5b58\u5728\u95ee\u9898\u53ef\u4ee5\u70b9\u51fb \u6b64\u5904 \u4e0b\u8f7d wget https://demo.jumpserver.org/download/koko/1.5.9/koko-master-linux-amd64.tar.gz wget https://github.com/jumpserver/koko/releases/download/1.5.9/koko-master-linux-amd64.tar.gz tar -xf koko-master-linux-amd64.tar.gz && \\ chown -R root:root kokodir && \\ cd kokodir cp config_example.yml config.yml && \\ vi config.yml BOOTSTRAP_TOKEN \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4 \u4ee5\u4e0b\u914d\u7f6e\u4ec5\u4f9b\u53c2\u8003 # \u9879\u76ee\u540d\u79f0, \u4f1a\u7528\u6765\u5411Jumpserver\u6ce8\u518c, \u8bc6\u522b\u800c\u5df2, \u4e0d\u80fd\u91cd\u590d # NAME: {{ Hostname }} # Jumpserver\u9879\u76ee\u7684url, api\u8bf7\u6c42\u6ce8\u518c\u4f1a\u4f7f\u7528 CORE_HOST : http://127.0.0.1:8080 # Bootstrap Token, \u9884\u5171\u4eab\u79d8\u94a5, \u7528\u6765\u6ce8\u518ccoco\u4f7f\u7528\u7684service account\u548cterminal # \u8bf7\u548cjumpserver \u914d\u7f6e\u6587\u4ef6\u4e2d\u4fdd\u6301\u4e00\u81f4\uff0c\u6ce8\u518c\u5b8c\u6210\u540e\u53ef\u4ee5\u5220\u9664 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # \u542f\u52a8\u65f6\u7ed1\u5b9a\u7684ip, \u9ed8\u8ba4 0.0.0.0 # BIND_HOST: 0.0.0.0 # \u76d1\u542c\u7684SSH\u7aef\u53e3\u53f7, \u9ed8\u8ba42222 # SSHD_PORT: 2222 # \u76d1\u542c\u7684HTTP/WS\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba45000 # HTTPD_PORT: 5000 # \u9879\u76ee\u4f7f\u7528\u7684ACCESS KEY, \u9ed8\u8ba4\u4f1a\u6ce8\u518c,\u5e76\u4fdd\u5b58\u5230 ACCESS_KEY_STORE\u4e2d, # \u5982\u679c\u6709\u9700\u6c42, \u53ef\u4ee5\u5199\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d, \u683c\u5f0f access_key_id:access_key_secret # ACCESS_KEY: null # ACCESS KEY \u4fdd\u5b58\u7684\u5730\u5740, \u9ed8\u8ba4\u6ce8\u518c\u540e\u4f1a\u4fdd\u5b58\u5230\u8be5\u6587\u4ef6\u4e2d # ACCESS_KEY_FILE: data/keys/.access_key # \u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b [DEBUG, INFO, WARN, ERROR, FATAL, CRITICAL] LOG_LEVEL : ERROR # SSH\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4 (default 15 seconds) # SSH_TIMEOUT: 15 # \u8bed\u8a00 [en,zh] # LANG: zh # SFTP\u7684\u6839\u76ee\u5f55, \u53ef\u9009 /tmp, Home\u5176\u4ed6\u81ea\u5b9a\u4e49\u76ee\u5f55 # SFTP_ROOT: /tmp # SFTP\u662f\u5426\u663e\u793a\u9690\u85cf\u6587\u4ef6 # SFTP_SHOW_HIDDEN_FILE: false # \u662f\u5426\u590d\u7528\u548c\u7528\u6237\u540e\u7aef\u8d44\u4ea7\u5df2\u5efa\u7acb\u7684\u8fde\u63a5(\u7528\u6237\u4e0d\u4f1a\u590d\u7528\u5176\u4ed6\u7528\u6237\u7684\u8fde\u63a5) # REUSE_CONNECTION: true # \u8d44\u4ea7\u52a0\u8f7d\u7b56\u7565, \u53ef\u6839\u636e\u8d44\u4ea7\u89c4\u6a21\u81ea\u884c\u8c03\u6574. \u9ed8\u8ba4\u5f02\u6b65\u52a0\u8f7d\u8d44\u4ea7, \u5f02\u6b65\u641c\u7d22\u5206\u9875; \u5982\u679c\u4e3aall, \u5219\u8d44\u4ea7\u5168\u90e8\u52a0\u8f7d, \u672c\u5730\u641c\u7d22\u5206\u9875. # ASSET_LOAD_POLICY: # zip\u538b\u7f29\u7684\u6700\u5927\u989d\u5ea6 (\u5355\u4f4d: M) # ZIP_MAX_SIZE: 1024M # zip\u538b\u7f29\u5b58\u653e\u7684\u4e34\u65f6\u76ee\u5f55 /tmp # ZIP_TMP_PATH: /tmp # \u5411 SSH Client \u8fde\u63a5\u53d1\u9001\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694 (\u5355\u4f4d: \u79d2)\uff0c\u9ed8\u8ba4\u4e3a30, 0\u5219\u8868\u793a\u4e0d\u53d1\u9001 # CLIENT_ALIVE_INTERVAL: 30 # \u5411\u8d44\u4ea7\u53d1\u9001\u5fc3\u8df3\u5305\u7684\u91cd\u8bd5\u6b21\u6570\uff0c\u9ed8\u8ba4\u4e3a3 # RETRY_ALIVE_COUNT_MAX: 3 # \u4f1a\u8bdd\u5171\u4eab\u4f7f\u7528\u7684\u7c7b\u578b [local, redis], \u9ed8\u8ba4local SHARE_ROOM_TYPE : redis # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_CLUSTERS: REDIS_DB_ROOM : 6 ./koko \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./koko -d 8.1. docker \u90e8\u7f72 koko \u7ec4\u4ef6 \u00b6 \u5982\u679c\u524d\u9762\u5df2\u7ecf\u6b63\u5e38\u90e8\u7f72\u4e86 koko, \u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://192.168.244.144:8080 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:1.5.9 9. \u6b63\u5e38\u5b89\u88c5\u5e76\u542f\u52a8 guacamole \u7ec4\u4ef6 \u00b6 \u5efa\u8bae\u4f7f\u7528 docker \u90e8\u7f72 guacamole \u7ec4\u4ef6 , \u90e8\u5206\u73af\u5883\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u7f16\u8bd1\u5b89\u88c5 cd /opt && \\ git clone --depth = 1 https://github.com/jumpserver/docker-guacamole.git cd /opt/docker-guacamole && \\ tar -xf guacamole-server-1.0.0.tar.gz && \\ tar -xf ssh-forward.tar.gz -C /bin/ && \\ chmod +x /bin/ssh-forward cd /opt/docker-guacamole/guacamole-server-1.0.0 \u6839\u636e guacamole\u5b98\u65b9\u6587\u6863 \u6587\u6863\u5b89\u88c5\u5bf9\u5e94\u7684\u4f9d\u8d56\u5305 Ubuntu: apt-get install -y libcairo2-dev libjpeg-turbo8-dev libpng12-dev libossp-uuid-dev && \\ apt-get install -y libavcodec-dev libavutil-dev libswscale-dev libfreerdp-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev && \\ ln -s /usr/local/lib/freerdp /usr/lib/x86_64-linux-gnu/freerdp Debian: apt-get install -y libcairo2-dev libjpeg62-turbo-dev libpng12-dev libossp-uuid-dev && \\ apt-get install -y libavcodec-dev libavutil-dev libswscale-dev libfreerdp-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev && \\ ln -s /usr/local/lib/freerdp /usr/lib/x86_64-linux-gnu/freerdp Fedora/CentOS/RHEL: yum -y localinstall --nogpgcheck https://mirrors.aliyun.com/rpmfusion/free/el/rpmfusion-free-release-7.noarch.rpm https://mirrors.aliyun.com/rpmfusion/nonfree/el/rpmfusion-nonfree-release-7.noarch.rpm && \\ yum install -y cairo-devel libjpeg-turbo-devel libpng-devel uuid-devel && \\ yum install -y ffmpeg-devel freerdp1.2-devel pango-devel libssh2-devel libtelnet-devel libvncserver-devel pulseaudio-libs-devel openssl-devel libvorbis-devel libwebp-devel && \\ ln -s /usr/local/lib/freerdp /usr/lib64/freerdp autoreconf -fi && \\ ./configure --with-init-dir = /etc/init.d && \\ make && \\ make install \u9700\u8981\u5148\u5728\u5f53\u524d\u73af\u5883\u914d\u7f6e\u597d java Ubuntu: apt-get -y install default-jre default-jdk Centos: yum install -y java-1.8.0-openjdk mkdir -p /config/guacamole /config/guacamole/extensions /config/guacamole/record /config/guacamole/drive && \\ chown daemon:daemon /config/guacamole/record /config/guacamole/drive && \\ cd /config \u8bbf\u95ee \u6b64\u5904 \u4e0b\u8f7d\u6700\u65b0\u7684 tomcat9 \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u56fd\u5185\u955c\u50cf\u6e90\u4e0b\u8f7d wget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.35/bin/apache-tomcat-9.0.35.tar.gz tar -xf apache-tomcat-9.0.35.tar.gz && \\ mv apache-tomcat-9.0.35 tomcat9 && \\ rm -rf /config/tomcat9/webapps/* && \\ sed -i 's/Connector port=\"8080\"/Connector port=\"8081\"/g' /config/tomcat9/conf/server.xml && \\ echo \"java.util.logging.ConsoleHandler.encoding = UTF-8\" >> /config/tomcat9/conf/logging.properties && \\ ln -sf /opt/docker-guacamole/guacamole-1.0.0.war /config/tomcat9/webapps/ROOT.war && \\ ln -sf /opt/docker-guacamole/guacamole-auth-jumpserver-1.0.0.jar /config/guacamole/extensions/guacamole-auth-jumpserver-1.0.0.jar && \\ ln -sf /opt/docker-guacamole/root/app/guacamole/guacamole.properties /config/guacamole/guacamole.properties \u8bbe\u7f6e guacamole \u73af\u5883 export JUMPSERVER_SERVER = http://127.0.0.1:8080 echo \"export JUMPSERVER_SERVER=http://127.0.0.1:8080\" >> ~/.bashrc export BOOTSTRAP_TOKEN = zxffNymGjP79j6BN echo \"export BOOTSTRAP_TOKEN=zxffNymGjP79j6BN\" >> ~/.bashrc export JUMPSERVER_KEY_DIR = /config/guacamole/keys echo \"export JUMPSERVER_KEY_DIR=/config/guacamole/keys\" >> ~/.bashrc export GUACAMOLE_HOME = /config/guacamole echo \"export GUACAMOLE_HOME=/config/guacamole\" >> ~/.bashrc export GUACAMOLE_LOG_LEVEL = ERROR echo \"export GUACAMOLE_LOG_LEVEL=ERROR\" >> ~/.bashrc export JUMPSERVER_ENABLE_DRIVE = true echo \"export JUMPSERVER_ENABLE_DRIVE=true\" >> ~/.bashrc \u73af\u5883\u53d8\u91cf\u8bf4\u660e JUMPSERVER_SERVER \u6307 core \u8bbf\u95ee\u5730\u5740 BOOTSTRAP_TOKEN \u4e3a Jumpserver/config.yml \u91cc\u9762\u7684 BOOTSTRAP_TOKEN \u503c JUMPSERVER_KEY_DIR \u8ba4\u8bc1\u6210\u529f\u540e key \u5b58\u653e\u76ee\u5f55 GUACAMOLE_HOME \u4e3a guacamole.properties \u914d\u7f6e\u6587\u4ef6\u6240\u5728\u76ee\u5f55 GUACAMOLE_LOG_LEVEL \u4e3a\u751f\u6210\u65e5\u5fd7\u7684\u7b49\u7ea7 JUMPSERVER_ENABLE_DRIVE \u4e3a rdp \u534f\u8bae\u6302\u8f7d\u5171\u4eab\u76d8 \u542f\u52a8 guacamole /etc/init.d/guacd start sh /config/tomcat9/bin/startup.sh 9.1 docker \u90e8\u7f72 guacamole \u7ec4\u4ef6 \u00b6 \u5982\u679c\u524d\u9762\u5df2\u7ecf\u6b63\u5e38\u90e8\u7f72\u4e86 guacamole, \u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 docker run --name jms_guacamole -d \\ -p 127 .0.0.1:8081:8080 \\ -e JUMPSERVER_SERVER = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d \\ -p 127 .0.0.1:8081:8080 \\ -e JUMPSERVER_SERVER = http://192.168.244.144:8080 \\ -e BOOTSTRAP_TOKEN = abcdefg1234 \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9 10. \u4e0b\u8f7d luna \u7ec4\u4ef6 \u00b6 cd /opt \u8bbf\u95ee \u6b64\u5904 \u83b7\u53d6 \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget http://demo.jumpserver.org/download/luna/1.5.9/luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz chown -R nginx:nginx luna 11. \u914d\u7f6e nginx \u6574\u5408\u5404\u7ec4\u4ef6 \u00b6 \u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u5b89\u88c5\u6700\u65b0\u7684\u7a33\u5b9a\u7248 nginx echo > /etc/nginx/conf.d/default.conf vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; proxy_pass http: // localhost: 8070 ; proxy_http_version 1 . 1 ; proxy_buffering off; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload 12. \u5f00\u59cb\u4f7f\u7528 JumpServer \u00b6 \u68c0\u67e5\u5e94\u7528\u662f\u5426\u5df2\u7ecf\u6b63\u5e38\u8fd0\u884c \u670d\u52a1\u5168\u90e8\u542f\u52a8\u540e, \u8bbf\u95ee jumpserver \u670d\u52a1\u5668 nginx \u4ee3\u7406\u7684 80 \u7aef\u53e3, \u4e0d\u8981\u901a\u8fc78080\u7aef\u53e3\u8bbf\u95ee \u9ed8\u8ba4\u8d26\u53f7: admin \u5bc6\u7801: admin \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"\u5b89\u88c5\u6587\u6863"},{"location":"install/step_by_step/#_1","text":"\u63d0\u793a \u63a8\u8350\u4f7f\u7528 \u6781\u901f\u5b89\u88c5 \u5feb\u901f\u90e8\u7f72\uff0c\u8d44\u4ea7\u89c4\u6a21\u8f83\u5927\u53c2\u8003 \u5206\u5e03\u5f0f\u90e8\u7f72 \u8fdb\u884c\u90e8\u7f72 \u672c\u6587\u6863\u9700\u8981\u975e\u5e38\u5f3a\u7684\u52a8\u624b\u80fd\u529b, \u90e8\u7f72\u8fc7\u7a0b\u4e2d\u4f60\u4f1a\u9762\u4e34\u5404\u79cd\u5404\u6837\u7684\u95ee\u9898 \u6ce8\u610f: \u4f7f\u7528\u672c\u6587\u6863\u4f60\u5c06\u65e0\u6cd5\u83b7\u5f97\u989d\u5916\u7684\u6280\u672f\u652f\u6301\uff0c\u5305\u62ec\u540e\u7eed\u7684\u5347\u7ea7\u5747\u9700\u8981\u81ea\u884c\u5904\u7406\uff0c\u6211\u4eec\u53ea\u63a8\u8350\u771f\u6b63\u6709\u9700\u8981\u7684\u8fd0\u7ef4\u5de5\u7a0b\u5e08\u8fdb\u884c\u4f7f\u7528 \u672c\u6587\u6863\u662f\u9488\u5bf9\u6240\u6709 Linux \u53d1\u884c\u7248 x86_64 \u7684\u5b89\u88c5\u8bf4\u660e, \u975e\u7279\u5b9a\u7cfb\u7edf\u8bf4\u660e\u6587\u6863, \u4f46\u662f\u793a\u4f8b\u4e2d\u6211\u4eec\u4ec5\u5c55\u793a Ubuntu \u548c Centos \u90e8\u5206(\u6ce8\u91ca\u90e8\u5206) \u9047\u5230\u95ee\u9898\u53ef\u4ee5\u53c2\u8003 \u5b89\u88c5\u89c6\u9891 JumpServer \u73af\u5883\u8981\u6c42: \u786c\u4ef6\u914d\u7f6e: 2\u4e2aCPU\u6838\u5fc3, 4G \u5185\u5b58, 50G \u786c\u76d8\uff08\u6700\u4f4e\uff09 \u64cd\u4f5c\u7cfb\u7edf: Linux \u53d1\u884c\u7248 x86_64 Python = 3.6.x Mysql Server \u2265 5.6 Mariadb Server \u2265 5.5.56 Redis","title":"\u5b89\u88c5\u6587\u6863"},{"location":"install/step_by_step/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/step_by_step/#1-python36-mysql-redis","text":"\u63a8\u8350\u76f4\u63a5\u4ece\u4ed3\u5e93\u83b7\u53d6 \u6570\u636e\u5e93\u5b57\u7b26\u96c6\u8981\u6c42 : ``` mysql create database jumpserver default charset 'utf8' collate 'utf8_bin' ; ```","title":"1. \u5b89\u88c5 python3.6 mysql Redis"},{"location":"install/step_by_step/#2-py3","text":"python3.6 -m venv /opt/py3","title":"2. \u521b\u5efa py3 \u865a\u62df\u73af\u5883"},{"location":"install/step_by_step/#3-py3","text":"source /opt/py3/bin/activate \u6bcf\u6b21\u64cd\u4f5c jumpserver \u90fd\u9700\u8981\u5148\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883 \u90e8\u5206\u7cfb\u7edf\u53ef\u80fd\u4f1a\u63d0\u793a source: not found, \u53ef\u4ee5\u4f7f\u7528 . \u4ee3\u66ff source . /opt/py3/bin/activate \u53ef\u4ee5\u5728 ~/.bashrc \u672b\u5c3e\u52a0\u5165 source /opt/py3/bin/activate \u81ea\u52a8\u8f7d\u5165\u73af\u5883","title":"3. \u8f7d\u5165 py3 \u865a\u62df\u73af\u5883"},{"location":"install/step_by_step/#4-jumpserver","text":"cd /opt && \\ git clone --depth = 1 https://github.com/jumpserver/jumpserver.git \u5982\u679c\u6ca1\u6709\u5b89\u88c5 git \u8bf7\u5148\u5b89\u88c5, \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u4ece \u6b64\u5904 \u4e0b\u8f7d cd /opt wget http://demo.jumpserver.org/download/jumpserver/latest/jumpserver.tar.gz tar xf jumpserver.tar.gz","title":"4. \u83b7\u53d6 jumpserver \u4ee3\u7801"},{"location":"install/step_by_step/#5","text":"cd /opt/jumpserver/requirements \u6839\u636e\u5f53\u524d\u7cfb\u7edf, \u9009\u62e9\u5bf9\u5e94\u7684\u6587\u4ef6\u6267\u884c\u5373\u53ef Centos: yum install -y $( cat rpm_requirements.txt ) Ubuntu: apt-get install -y $( cat deb_requirements.txt ) pip install wheel && \\ pip install --upgrade pip setuptools && \\ pip install -r requirements.txt \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883, \u4e2d\u95f4\u5982\u679c\u9047\u5230\u62a5\u9519\u4e00\u822c\u662f\u4f9d\u8d56\u5305\u6ca1\u88c5\u5168, \u53ef\u4ee5\u901a\u8fc7 \u641c\u7d22\u5f15\u64ce \u89e3\u51b3 \u56fd\u5185\u53ef\u4ee5\u4f7f\u7528\u955c\u50cf\u52a0\u901f pip install wheel -i https://mirrors.aliyun.com/pypi/simple/ pip install --upgrade pip setuptools -i https://mirrors.aliyun.com/pypi/simple/ pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/","title":"5. \u5b89\u88c5\u7f16\u8bd1\u73af\u5883\u4f9d\u8d56"},{"location":"install/step_by_step/#6","text":"cd /opt/jumpserver && \\ cp config_example.yml config.yml && \\ vi config.yml \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, \u53ef\u4ee5\u53c2\u8003\u6b64\u6a21\u7248 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 127.0.0.1 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : rBi41SrDqlX4zsx9e1L0cqTP DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True","title":"6. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"install/step_by_step/#7-jumpserver","text":"cd /opt/jumpserver ./jms start \u786e\u4fdd\u5df2\u7ecf\u8f7d\u5165 py3 \u865a\u62df\u73af\u5883 source /opt/py3/bin/activate \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./jms start -d","title":"7. \u542f\u52a8 jumpserver"},{"location":"install/step_by_step/#8-koko","text":"cd /opt \u8bbf\u95ee \u6b64\u5904 \u4e0b\u8f7d\u5bf9\u5e94 release \u5305\u5e76\u89e3\u538b\u5230 /opt\u76ee\u5f55 \u5982\u679c\u7f51\u7edc\u5b58\u5728\u95ee\u9898\u53ef\u4ee5\u70b9\u51fb \u6b64\u5904 \u4e0b\u8f7d wget https://demo.jumpserver.org/download/koko/1.5.9/koko-master-linux-amd64.tar.gz wget https://github.com/jumpserver/koko/releases/download/1.5.9/koko-master-linux-amd64.tar.gz tar -xf koko-master-linux-amd64.tar.gz && \\ chown -R root:root kokodir && \\ cd kokodir cp config_example.yml config.yml && \\ vi config.yml BOOTSTRAP_TOKEN \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4 \u4ee5\u4e0b\u914d\u7f6e\u4ec5\u4f9b\u53c2\u8003 # \u9879\u76ee\u540d\u79f0, \u4f1a\u7528\u6765\u5411Jumpserver\u6ce8\u518c, \u8bc6\u522b\u800c\u5df2, \u4e0d\u80fd\u91cd\u590d # NAME: {{ Hostname }} # Jumpserver\u9879\u76ee\u7684url, api\u8bf7\u6c42\u6ce8\u518c\u4f1a\u4f7f\u7528 CORE_HOST : http://127.0.0.1:8080 # Bootstrap Token, \u9884\u5171\u4eab\u79d8\u94a5, \u7528\u6765\u6ce8\u518ccoco\u4f7f\u7528\u7684service account\u548cterminal # \u8bf7\u548cjumpserver \u914d\u7f6e\u6587\u4ef6\u4e2d\u4fdd\u6301\u4e00\u81f4\uff0c\u6ce8\u518c\u5b8c\u6210\u540e\u53ef\u4ee5\u5220\u9664 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # \u542f\u52a8\u65f6\u7ed1\u5b9a\u7684ip, \u9ed8\u8ba4 0.0.0.0 # BIND_HOST: 0.0.0.0 # \u76d1\u542c\u7684SSH\u7aef\u53e3\u53f7, \u9ed8\u8ba42222 # SSHD_PORT: 2222 # \u76d1\u542c\u7684HTTP/WS\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba45000 # HTTPD_PORT: 5000 # \u9879\u76ee\u4f7f\u7528\u7684ACCESS KEY, \u9ed8\u8ba4\u4f1a\u6ce8\u518c,\u5e76\u4fdd\u5b58\u5230 ACCESS_KEY_STORE\u4e2d, # \u5982\u679c\u6709\u9700\u6c42, \u53ef\u4ee5\u5199\u5230\u914d\u7f6e\u6587\u4ef6\u4e2d, \u683c\u5f0f access_key_id:access_key_secret # ACCESS_KEY: null # ACCESS KEY \u4fdd\u5b58\u7684\u5730\u5740, \u9ed8\u8ba4\u6ce8\u518c\u540e\u4f1a\u4fdd\u5b58\u5230\u8be5\u6587\u4ef6\u4e2d # ACCESS_KEY_FILE: data/keys/.access_key # \u8bbe\u7f6e\u65e5\u5fd7\u7ea7\u522b [DEBUG, INFO, WARN, ERROR, FATAL, CRITICAL] LOG_LEVEL : ERROR # SSH\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4 (default 15 seconds) # SSH_TIMEOUT: 15 # \u8bed\u8a00 [en,zh] # LANG: zh # SFTP\u7684\u6839\u76ee\u5f55, \u53ef\u9009 /tmp, Home\u5176\u4ed6\u81ea\u5b9a\u4e49\u76ee\u5f55 # SFTP_ROOT: /tmp # SFTP\u662f\u5426\u663e\u793a\u9690\u85cf\u6587\u4ef6 # SFTP_SHOW_HIDDEN_FILE: false # \u662f\u5426\u590d\u7528\u548c\u7528\u6237\u540e\u7aef\u8d44\u4ea7\u5df2\u5efa\u7acb\u7684\u8fde\u63a5(\u7528\u6237\u4e0d\u4f1a\u590d\u7528\u5176\u4ed6\u7528\u6237\u7684\u8fde\u63a5) # REUSE_CONNECTION: true # \u8d44\u4ea7\u52a0\u8f7d\u7b56\u7565, \u53ef\u6839\u636e\u8d44\u4ea7\u89c4\u6a21\u81ea\u884c\u8c03\u6574. \u9ed8\u8ba4\u5f02\u6b65\u52a0\u8f7d\u8d44\u4ea7, \u5f02\u6b65\u641c\u7d22\u5206\u9875; \u5982\u679c\u4e3aall, \u5219\u8d44\u4ea7\u5168\u90e8\u52a0\u8f7d, \u672c\u5730\u641c\u7d22\u5206\u9875. # ASSET_LOAD_POLICY: # zip\u538b\u7f29\u7684\u6700\u5927\u989d\u5ea6 (\u5355\u4f4d: M) # ZIP_MAX_SIZE: 1024M # zip\u538b\u7f29\u5b58\u653e\u7684\u4e34\u65f6\u76ee\u5f55 /tmp # ZIP_TMP_PATH: /tmp # \u5411 SSH Client \u8fde\u63a5\u53d1\u9001\u5fc3\u8df3\u7684\u65f6\u95f4\u95f4\u9694 (\u5355\u4f4d: \u79d2)\uff0c\u9ed8\u8ba4\u4e3a30, 0\u5219\u8868\u793a\u4e0d\u53d1\u9001 # CLIENT_ALIVE_INTERVAL: 30 # \u5411\u8d44\u4ea7\u53d1\u9001\u5fc3\u8df3\u5305\u7684\u91cd\u8bd5\u6b21\u6570\uff0c\u9ed8\u8ba4\u4e3a3 # RETRY_ALIVE_COUNT_MAX: 3 # \u4f1a\u8bdd\u5171\u4eab\u4f7f\u7528\u7684\u7c7b\u578b [local, redis], \u9ed8\u8ba4local SHARE_ROOM_TYPE : redis # Redis\u914d\u7f6e REDIS_HOST : 127.0.0.1 REDIS_PORT : 6379 REDIS_PASSWORD : ZhYnLrodpmPncovxJTnRyiBs # REDIS_CLUSTERS: REDIS_DB_ROOM : 6 ./koko \u53ef\u4ee5 -d \u53c2\u6570\u5728\u540e\u53f0\u8fd0\u884c ./koko -d","title":"8. \u6b63\u5e38\u90e8\u7f72 koko \u7ec4\u4ef6"},{"location":"install/step_by_step/#81-docker-koko","text":"\u5982\u679c\u524d\u9762\u5df2\u7ecf\u6b63\u5e38\u90e8\u7f72\u4e86 koko, \u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 docker run --name jms_koko -d \\ -p 2222 :2222 -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 127 .0.0.1:5000:5000 \\ -e CORE_HOST = http://192.168.244.144:8080 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ --restart = always \\ jumpserver/jms_koko:1.5.9","title":"8.1. docker \u90e8\u7f72 koko \u7ec4\u4ef6"},{"location":"install/step_by_step/#9-guacamole","text":"\u5efa\u8bae\u4f7f\u7528 docker \u90e8\u7f72 guacamole \u7ec4\u4ef6 , \u90e8\u5206\u73af\u5883\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u7f16\u8bd1\u5b89\u88c5 cd /opt && \\ git clone --depth = 1 https://github.com/jumpserver/docker-guacamole.git cd /opt/docker-guacamole && \\ tar -xf guacamole-server-1.0.0.tar.gz && \\ tar -xf ssh-forward.tar.gz -C /bin/ && \\ chmod +x /bin/ssh-forward cd /opt/docker-guacamole/guacamole-server-1.0.0 \u6839\u636e guacamole\u5b98\u65b9\u6587\u6863 \u6587\u6863\u5b89\u88c5\u5bf9\u5e94\u7684\u4f9d\u8d56\u5305 Ubuntu: apt-get install -y libcairo2-dev libjpeg-turbo8-dev libpng12-dev libossp-uuid-dev && \\ apt-get install -y libavcodec-dev libavutil-dev libswscale-dev libfreerdp-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev && \\ ln -s /usr/local/lib/freerdp /usr/lib/x86_64-linux-gnu/freerdp Debian: apt-get install -y libcairo2-dev libjpeg62-turbo-dev libpng12-dev libossp-uuid-dev && \\ apt-get install -y libavcodec-dev libavutil-dev libswscale-dev libfreerdp-dev libpango1.0-dev libssh2-1-dev libtelnet-dev libvncserver-dev libpulse-dev libssl-dev libvorbis-dev libwebp-dev && \\ ln -s /usr/local/lib/freerdp /usr/lib/x86_64-linux-gnu/freerdp Fedora/CentOS/RHEL: yum -y localinstall --nogpgcheck https://mirrors.aliyun.com/rpmfusion/free/el/rpmfusion-free-release-7.noarch.rpm https://mirrors.aliyun.com/rpmfusion/nonfree/el/rpmfusion-nonfree-release-7.noarch.rpm && \\ yum install -y cairo-devel libjpeg-turbo-devel libpng-devel uuid-devel && \\ yum install -y ffmpeg-devel freerdp1.2-devel pango-devel libssh2-devel libtelnet-devel libvncserver-devel pulseaudio-libs-devel openssl-devel libvorbis-devel libwebp-devel && \\ ln -s /usr/local/lib/freerdp /usr/lib64/freerdp autoreconf -fi && \\ ./configure --with-init-dir = /etc/init.d && \\ make && \\ make install \u9700\u8981\u5148\u5728\u5f53\u524d\u73af\u5883\u914d\u7f6e\u597d java Ubuntu: apt-get -y install default-jre default-jdk Centos: yum install -y java-1.8.0-openjdk mkdir -p /config/guacamole /config/guacamole/extensions /config/guacamole/record /config/guacamole/drive && \\ chown daemon:daemon /config/guacamole/record /config/guacamole/drive && \\ cd /config \u8bbf\u95ee \u6b64\u5904 \u4e0b\u8f7d\u6700\u65b0\u7684 tomcat9 \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u901a\u8fc7\u56fd\u5185\u955c\u50cf\u6e90\u4e0b\u8f7d wget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-9/v9.0.35/bin/apache-tomcat-9.0.35.tar.gz tar -xf apache-tomcat-9.0.35.tar.gz && \\ mv apache-tomcat-9.0.35 tomcat9 && \\ rm -rf /config/tomcat9/webapps/* && \\ sed -i 's/Connector port=\"8080\"/Connector port=\"8081\"/g' /config/tomcat9/conf/server.xml && \\ echo \"java.util.logging.ConsoleHandler.encoding = UTF-8\" >> /config/tomcat9/conf/logging.properties && \\ ln -sf /opt/docker-guacamole/guacamole-1.0.0.war /config/tomcat9/webapps/ROOT.war && \\ ln -sf /opt/docker-guacamole/guacamole-auth-jumpserver-1.0.0.jar /config/guacamole/extensions/guacamole-auth-jumpserver-1.0.0.jar && \\ ln -sf /opt/docker-guacamole/root/app/guacamole/guacamole.properties /config/guacamole/guacamole.properties \u8bbe\u7f6e guacamole \u73af\u5883 export JUMPSERVER_SERVER = http://127.0.0.1:8080 echo \"export JUMPSERVER_SERVER=http://127.0.0.1:8080\" >> ~/.bashrc export BOOTSTRAP_TOKEN = zxffNymGjP79j6BN echo \"export BOOTSTRAP_TOKEN=zxffNymGjP79j6BN\" >> ~/.bashrc export JUMPSERVER_KEY_DIR = /config/guacamole/keys echo \"export JUMPSERVER_KEY_DIR=/config/guacamole/keys\" >> ~/.bashrc export GUACAMOLE_HOME = /config/guacamole echo \"export GUACAMOLE_HOME=/config/guacamole\" >> ~/.bashrc export GUACAMOLE_LOG_LEVEL = ERROR echo \"export GUACAMOLE_LOG_LEVEL=ERROR\" >> ~/.bashrc export JUMPSERVER_ENABLE_DRIVE = true echo \"export JUMPSERVER_ENABLE_DRIVE=true\" >> ~/.bashrc \u73af\u5883\u53d8\u91cf\u8bf4\u660e JUMPSERVER_SERVER \u6307 core \u8bbf\u95ee\u5730\u5740 BOOTSTRAP_TOKEN \u4e3a Jumpserver/config.yml \u91cc\u9762\u7684 BOOTSTRAP_TOKEN \u503c JUMPSERVER_KEY_DIR \u8ba4\u8bc1\u6210\u529f\u540e key \u5b58\u653e\u76ee\u5f55 GUACAMOLE_HOME \u4e3a guacamole.properties \u914d\u7f6e\u6587\u4ef6\u6240\u5728\u76ee\u5f55 GUACAMOLE_LOG_LEVEL \u4e3a\u751f\u6210\u65e5\u5fd7\u7684\u7b49\u7ea7 JUMPSERVER_ENABLE_DRIVE \u4e3a rdp \u534f\u8bae\u6302\u8f7d\u5171\u4eab\u76d8 \u542f\u52a8 guacamole /etc/init.d/guacd start sh /config/tomcat9/bin/startup.sh","title":"9. \u6b63\u5e38\u5b89\u88c5\u5e76\u542f\u52a8 guacamole \u7ec4\u4ef6"},{"location":"install/step_by_step/#91-docker-guacamole","text":"\u5982\u679c\u524d\u9762\u5df2\u7ecf\u6b63\u5e38\u90e8\u7f72\u4e86 guacamole, \u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4 docker run --name jms_guacamole -d \\ -p 127 .0.0.1:8081:8080 \\ -e JUMPSERVER_SERVER = http://<Jumpserver_url> \\ -e BOOTSTRAP_TOKEN = <Jumpserver_BOOTSTRAP_TOKEN> \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:<Tag> <Jumpserver_url> \u4e3a jumpserver \u7684 url \u5730\u5740, <Jumpserver_BOOTSTRAP_TOKEN> \u9700\u8981\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6, \u4fdd\u8bc1\u4e00\u81f4, <Tag> \u662f\u7248\u672c \u4f8b: docker run --name jms_guacamole -d \\ -p 127 .0.0.1:8081:8080 \\ -e JUMPSERVER_SERVER = http://192.168.244.144:8080 \\ -e BOOTSTRAP_TOKEN = abcdefg1234 \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9","title":"9.1 docker \u90e8\u7f72 guacamole \u7ec4\u4ef6"},{"location":"install/step_by_step/#10-luna","text":"cd /opt \u8bbf\u95ee \u6b64\u5904 \u83b7\u53d6 \u7f51\u7edc\u6709\u95ee\u9898\u8bbf\u95ee \u6b64\u5904 \u5feb\u901f\u4e0b\u8f7d wget http://demo.jumpserver.org/download/luna/1.5.9/luna.tar.gz wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz tar -xf luna.tar.gz chown -R nginx:nginx luna","title":"10. \u4e0b\u8f7d luna \u7ec4\u4ef6"},{"location":"install/step_by_step/#11-nginx","text":"\u53c2\u8003 \u5b98\u65b9\u6587\u6863 \u5b89\u88c5\u6700\u65b0\u7684\u7a33\u5b9a\u7248 nginx echo > /etc/nginx/conf.d/default.conf vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /koko/ { proxy_pass http: // localhost: 5000 ; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // localhost: 8081 /; proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /ws/ { proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; proxy_pass http: // localhost: 8070 ; proxy_http_version 1 . 1 ; proxy_buffering off; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; } } nginx -t nginx -s reload","title":"11. \u914d\u7f6e nginx \u6574\u5408\u5404\u7ec4\u4ef6"},{"location":"install/step_by_step/#12-jumpserver","text":"\u68c0\u67e5\u5e94\u7528\u662f\u5426\u5df2\u7ecf\u6b63\u5e38\u8fd0\u884c \u670d\u52a1\u5168\u90e8\u542f\u52a8\u540e, \u8bbf\u95ee jumpserver \u670d\u52a1\u5668 nginx \u4ee3\u7406\u7684 80 \u7aef\u53e3, \u4e0d\u8981\u901a\u8fc78080\u7aef\u53e3\u8bbf\u95ee \u9ed8\u8ba4\u8d26\u53f7: admin \u5bc6\u7801: admin \u540e\u7eed\u7684\u4f7f\u7528\u8bf7\u53c2\u8003 \u5b89\u5168\u5efa\u8bae \u5feb\u901f\u5165\u95e8","title":"12. \u5f00\u59cb\u4f7f\u7528 JumpServer"},{"location":"install/uninstall/","text":"\u5378\u8f7d\u6587\u6863 \u00b6 \u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006, \u8bf7\u786e\u8ba4\u5df2\u7ecf\u5907\u4efd\u597d\u6570\u636e\u5e93 \u786e\u4fdd\u5df2\u7ecf\u505c\u6b62 jms koko guacamole \u8fdb\u7a0b \u786e\u5b9a\u6570\u636e\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5 \u8bf7\u81ea\u884c\u66ff\u6362\u6587\u4e2d\u76f8\u5173\u8def\u5f84\u4e3a\u4f60\u7684\u5b9e\u9645\u73af\u5883\u8def\u5f84 1. \u6b63\u5e38\u90e8\u7f72\u5378\u8f7d \u00b6 rm -rf /opt/jumpserver rm -rf /opt/koko /opt/kokodir rm -rf /opt/docker-guacamole rm -rf /opt/py3 rm -rf /config rm -rf /etc/nginx/conf.d/jumpserver.conf 2. \u811a\u672c\u90e8\u7f72\u5378\u8f7d \u00b6 cd /opt/setuptools ./jmsctl.sh uninstall 3. docker \u7ec4\u4ef6\u90e8\u7f72\u5378\u8f7d \u00b6 rm -rf /opt/jumpserver rm -rf /opt/py3 rm -rf /etc/nginx/conf.d/jumpserver.conf docker rm jms_koko docker rm jms_guacamole docker rmi jumpserver/jms_koko:1.5.9 docker rmi jumpserver/jms_guacamole:1.5.9 rm -rf /usr/lib/systemd/system/jms.service rm -rf /opt/start_jms.sh rm -rf /opt/stop_jms.sh 4. docker-compose \u90e8\u7f72\u5378\u8f7d \u00b6 cd /opt/Dockerfile docker-compose down docker volume prune docker rmi jumpserver/jms_core:1.5.9 docker rmi jumpserver/jms_koko:1.5.9 docker rmi jumpserver/jms_guacamole:1.5.9 docker rmi jumpserver/jms_nginx:1.5.9 docker rmi jumpserver/jms_redis:1.5.9 docker rmi jumpserver/jms_mysql:1.5.9 rm -rf /opt/Dockerfile 5. ansible-playbook \u90e8\u7f72\u5378\u8f7d \u00b6 ansible-playbook uninstall.yml \u5220\u9664\u6570\u636e\u5e93 mysql -uroot drop database jumpserver ; exit \u6e05\u7a7a redis redis-cli -h 127 .0.0.1 flushall exit","title":"\u5378\u8f7d\u6587\u6863"},{"location":"install/uninstall/#_1","text":"\u6b64\u64cd\u4f5c\u4e0d\u53ef\u9006, \u8bf7\u786e\u8ba4\u5df2\u7ecf\u5907\u4efd\u597d\u6570\u636e\u5e93 \u786e\u4fdd\u5df2\u7ecf\u505c\u6b62 jms koko guacamole \u8fdb\u7a0b \u786e\u5b9a\u6570\u636e\u5df2\u7ecf\u5904\u7406\u5b8c\u6bd5 \u8bf7\u81ea\u884c\u66ff\u6362\u6587\u4e2d\u76f8\u5173\u8def\u5f84\u4e3a\u4f60\u7684\u5b9e\u9645\u73af\u5883\u8def\u5f84","title":"\u5378\u8f7d\u6587\u6863"},{"location":"install/uninstall/#1","text":"rm -rf /opt/jumpserver rm -rf /opt/koko /opt/kokodir rm -rf /opt/docker-guacamole rm -rf /opt/py3 rm -rf /config rm -rf /etc/nginx/conf.d/jumpserver.conf","title":"1. \u6b63\u5e38\u90e8\u7f72\u5378\u8f7d"},{"location":"install/uninstall/#2","text":"cd /opt/setuptools ./jmsctl.sh uninstall","title":"2. \u811a\u672c\u90e8\u7f72\u5378\u8f7d"},{"location":"install/uninstall/#3-docker","text":"rm -rf /opt/jumpserver rm -rf /opt/py3 rm -rf /etc/nginx/conf.d/jumpserver.conf docker rm jms_koko docker rm jms_guacamole docker rmi jumpserver/jms_koko:1.5.9 docker rmi jumpserver/jms_guacamole:1.5.9 rm -rf /usr/lib/systemd/system/jms.service rm -rf /opt/start_jms.sh rm -rf /opt/stop_jms.sh","title":"3. docker \u7ec4\u4ef6\u90e8\u7f72\u5378\u8f7d"},{"location":"install/uninstall/#4-docker-compose","text":"cd /opt/Dockerfile docker-compose down docker volume prune docker rmi jumpserver/jms_core:1.5.9 docker rmi jumpserver/jms_koko:1.5.9 docker rmi jumpserver/jms_guacamole:1.5.9 docker rmi jumpserver/jms_nginx:1.5.9 docker rmi jumpserver/jms_redis:1.5.9 docker rmi jumpserver/jms_mysql:1.5.9 rm -rf /opt/Dockerfile","title":"4. docker-compose \u90e8\u7f72\u5378\u8f7d"},{"location":"install/uninstall/#5-ansible-playbook","text":"ansible-playbook uninstall.yml \u5220\u9664\u6570\u636e\u5e93 mysql -uroot drop database jumpserver ; exit \u6e05\u7a7a redis redis-cli -h 127 .0.0.1 flushall exit","title":"5. ansible-playbook \u90e8\u7f72\u5378\u8f7d"},{"location":"install/prod/distributed_01/","text":"NFS \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.99 +----------+------------+-----------------+------------------------+ | Protocol | ServerName | IP | Used By | +==========+============+=================+========================+ | TCP | NFS | 192.168.100.99 | Core, Tengine | +----------+------------+-----------------+------------------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --add-service = nfs --permanent --zone = public firewall-cmd --add-service = mountd --permanent --zone = public firewall-cmd --add-service = rpc-bind --permanent --zone = public firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u5e94\u8be5\u4f7f\u7528\u66f4\u4e25\u683c\u7684\u65b9\u5f0f 3. \u5b89\u88c5 nfs-server \u00b6 yum -y install nfs-utils rpcbind systemctl enable rpcbind nfs-server nfs-lock nfs-idmap systemctl start rpcbind nfs-server nfs-lock nfs-idmap 4. \u521b\u5efa NFS \u5171\u4eab\u76ee\u5f55 \u00b6 mkdir /data \u6b64\u5171\u4eab\u76ee\u5f55\u5b58\u653e jumpserver \u7684\u5f55\u50cf\u53ca\u4efb\u52a1\u7ed3\u679c 5. \u8bbe\u7f6e NFS \u8bbf\u95ee\u6743\u9650 \u00b6 vi /etc/exports /data 192 . 168 . 100 .* ( rw , sync , no_root_squash ) /data \u662f\u521a\u624d\u521b\u5efa\u7684\u5c06\u88ab\u5171\u4eab\u7684\u76ee\u5f55, 192.168.100.* \u8868\u793a\u6574\u4e2a 192.168.100.* \u7684\u8d44\u4ea7\u90fd\u6709\u62ec\u53f7\u91cc\u9762\u7684\u6743\u9650 \u4e5f\u53ef\u4ee5\u5199\u5177\u4f53\u7684\u6388\u6743\u5bf9\u8c61 /data 192.168.100.30(rw,sync,no_root_squash) 192.168.100.31(rw,sync,no_root_squash) 6. \u4f7f exports \u751f\u6548 \u00b6 exportfs -a","title":"NFS \u90e8\u7f72"},{"location":"install/prod/distributed_01/#nfs","text":"","title":"NFS \u90e8\u7f72"},{"location":"install/prod/distributed_01/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.99 +----------+------------+-----------------+------------------------+ | Protocol | ServerName | IP | Used By | +==========+============+=================+========================+ | TCP | NFS | 192.168.100.99 | Core, Tengine | +----------+------------+-----------------+------------------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_01/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_01/#1-epel","text":"yum upgrade -y yum -y install epel-release","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_01/#2","text":"firewall-cmd --add-service = nfs --permanent --zone = public firewall-cmd --add-service = mountd --permanent --zone = public firewall-cmd --add-service = rpc-bind --permanent --zone = public firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u5e94\u8be5\u4f7f\u7528\u66f4\u4e25\u683c\u7684\u65b9\u5f0f","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_01/#3-nfs-server","text":"yum -y install nfs-utils rpcbind systemctl enable rpcbind nfs-server nfs-lock nfs-idmap systemctl start rpcbind nfs-server nfs-lock nfs-idmap","title":"3. \u5b89\u88c5 nfs-server"},{"location":"install/prod/distributed_01/#4-nfs","text":"mkdir /data \u6b64\u5171\u4eab\u76ee\u5f55\u5b58\u653e jumpserver \u7684\u5f55\u50cf\u53ca\u4efb\u52a1\u7ed3\u679c","title":"4. \u521b\u5efa NFS \u5171\u4eab\u76ee\u5f55"},{"location":"install/prod/distributed_01/#5-nfs","text":"vi /etc/exports /data 192 . 168 . 100 .* ( rw , sync , no_root_squash ) /data \u662f\u521a\u624d\u521b\u5efa\u7684\u5c06\u88ab\u5171\u4eab\u7684\u76ee\u5f55, 192.168.100.* \u8868\u793a\u6574\u4e2a 192.168.100.* \u7684\u8d44\u4ea7\u90fd\u6709\u62ec\u53f7\u91cc\u9762\u7684\u6743\u9650 \u4e5f\u53ef\u4ee5\u5199\u5177\u4f53\u7684\u6388\u6743\u5bf9\u8c61 /data 192.168.100.30(rw,sync,no_root_squash) 192.168.100.31(rw,sync,no_root_squash)","title":"5. \u8bbe\u7f6e NFS \u8bbf\u95ee\u6743\u9650"},{"location":"install/prod/distributed_01/#6-exports","text":"exportfs -a","title":"6. \u4f7f exports \u751f\u6548"},{"location":"install/prod/distributed_02/","text":"Tengine \u4ee3\u7406\u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.100 +----------+------------+-----------------+---------------+ | Protocol | ServerName | IP | Port | +==========+============+=================+===============+ | TCP | Tengine | 192.168.100.100 | 80, 443, 2222 | +----------+------------+-----------------+---------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --zone = public --add-port = 80 /tcp --permanent firewall-cmd --zone = public --add-port = 443 /tcp --permanent firewall-cmd --zone = public --add-port = 2222 /tcp --permanent firewall-cmd --reload semanage fcontext -a -t httpd_sys_content_t '/opt/jumpserver(/.*)?' setsebool -P httpd_can_network_connect 1 \u751f\u4ea7\u73af\u5883\u4e0b\u4e0d\u5e94\u8be5\u5173\u95ed selinux 3. \u5b89\u88c5 tengine \u00b6 cd /opt yum localinstall -y http://demo.jumpserver.org/download/centos/7/tengine-2.3.2-1.el7.ngx.x86_64.rpm \u751f\u4ea7\u73af\u5883\u8bf7\u81ea\u884c\u7f16\u8bd1\u5b89\u88c5 tengine \u8be5 rpm \u6e90\u7801\u70b9\u51fb\u6b64\u5904 4. \u4e0b\u8f7d luna \u00b6 cd /opt wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u5982\u679c\u7f51\u7edc\u5b58\u5728\u95ee\u9898\u53ef\u4ee5\u70b9\u51fb \u6b64\u5904 \u4e0b\u8f7d wget https://demo.jumpserver.org/download/luna/1.5.9/luna.tar.gz 5. \u89e3\u538b luna \u00b6 tar -xf luna.tar.gz chown -R nginx:nginx luna 6. \u5b89\u88c5 nfs \u00b6 yum -y install nfs-utils 7. \u6302\u8f7d nfs \u00b6 showmount -e 192 .168.100.99 mkdir -p /opt/jumpserver/data restorecon -R /opt/jumpserver/data/ mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data echo \"192.168.100.99:/data /opt/jumpserver/data nfs defaults 0 0\" >> /etc/fstab 192.168.100.99 \u4e3a nfs server \u5730\u5740\uff0c\u8bf7\u81ea\u884c\u66f4\u6539 8. \u914d\u7f6e ssh \u53cd\u5411\u4ee3\u7406 \u00b6 vi /etc/nginx/nginx.conf user nginx; worker_processes auto; error_log /var/ log /nginx/ error.log warn ; pid /var/ run/nginx.pid; events { worker_connections 1024 ; } stream { log_format proxy '$remote_addr [$time_local] ' '$protocol $status $bytes_sent $bytes_received ' '$session_time \"$upstream_addr\" ' '\"$upstream_bytes_sent\" \"$upstream_bytes_received\" \"$upstream_connect_time\"' ; access_log /var/ log /nginx/ tcp - access.log proxy; open_log_file_cache off; upstream kokossh { server 192 . 168 . 100 . 40 : 2222 ; server 192 . 168 . 100 . 41 : 2222 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f koko ssh \u7684\u540e\u7aefip least_conn; } server { listen 2222 ; proxy_pass kokossh; proxy_protocol on ; proxy_connect_timeout 1 s; } } http { include /etc/ nginx/mime.types; default_type application/octet - stream; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"' ; access_log /var/ log /nginx/ access.log main; sendfile on ; # tcp_nopush on ; keepalive_timeout 65 ; # \u5173\u95ed\u7248\u672c\u663e\u793a server_tokens off; include /etc/ nginx /conf.d/ *. conf ; } 9. \u914d\u7f6e http \u53cd\u5411\u4ee3\u7406 \u00b6 vi /etc/nginx/conf.d/jumpserver.conf upstream jumpserver { server 192 . 168 . 100 . 30 : 80 ; server 192 . 168 . 100 . 31 : 80 ; # \u8fd9\u91cc\u662f core \u7684\u540e\u7aefip session_sticky; } upstream koko { server 192 . 168 . 100 . 40 : 5000 ; server 192 . 168 . 100 . 41 : 5001 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f koko \u7684\u540e\u7aefip session_sticky; } upstream guacamole { server 192 . 168 . 100 . 50 : 8081 ; server 192 . 168 . 100 . 51 : 8081 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f guacamole \u7684\u540e\u7aefip session_sticky; } server { listen 80 ; # server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d # return 301 https: // $server_name$request_uri; # } # server { # \u63a8\u8350\u4f7f\u7528 https \u8bbf\u95ee , \u8bf7\u81ea\u884c\u4fee\u6539\u4e0b\u9762\u7684\u9009\u9879 # listen 443 ssl ; # server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d # ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 # ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 # ssl_session_timeout 5 m; # ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # ssl_protocols TLSv1 TLSv1. 1 TLSv1. 2 ; # ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location / { proxy_pass http: // jumpserver; # jumpserver proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /koko/ { proxy_pass http: // koko; # koko proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // guacamole/; # guacamole proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } } 10. \u542f\u52a8 nginx \u00b6 nginx -t systemctl enable nginx systemctl start nginx \u8bbf\u95ee http://192.168.100.100 \u9ed8\u8ba4\u8d26\u53f7: admin \u5bc6\u7801: admin \u5230\u4f1a\u8bdd\u7ba1\u7406-\u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko Guacamole \u7b49\u5e94\u7528\u7684\u6ce8\u518c ssh -p2222 admin@192.168.100.100 sftp -P2222 admin@192.168.100.100 \u5bc6\u7801: admin \u5982\u679c\u662f\u7528\u5728 Windows \u4e0b, Xshell Terminal \u767b\u5f55\u8bed\u6cd5\u5982\u4e0b ssh admin@192.168.100.100 2222 sftp admin@192.168.100.100 2222 \u5bc6\u7801: admin \u5982\u679c\u80fd\u767b\u9646\u4ee3\u8868\u90e8\u7f72\u6210\u529f","title":"Tengine \u90e8\u7f72"},{"location":"install/prod/distributed_02/#tengine","text":"","title":"Tengine \u4ee3\u7406\u90e8\u7f72"},{"location":"install/prod/distributed_02/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.100 +----------+------------+-----------------+---------------+ | Protocol | ServerName | IP | Port | +==========+============+=================+===============+ | TCP | Tengine | 192.168.100.100 | 80, 443, 2222 | +----------+------------+-----------------+---------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_02/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_02/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_02/#2","text":"firewall-cmd --zone = public --add-port = 80 /tcp --permanent firewall-cmd --zone = public --add-port = 443 /tcp --permanent firewall-cmd --zone = public --add-port = 2222 /tcp --permanent firewall-cmd --reload semanage fcontext -a -t httpd_sys_content_t '/opt/jumpserver(/.*)?' setsebool -P httpd_can_network_connect 1 \u751f\u4ea7\u73af\u5883\u4e0b\u4e0d\u5e94\u8be5\u5173\u95ed selinux","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_02/#3-tengine","text":"cd /opt yum localinstall -y http://demo.jumpserver.org/download/centos/7/tengine-2.3.2-1.el7.ngx.x86_64.rpm \u751f\u4ea7\u73af\u5883\u8bf7\u81ea\u884c\u7f16\u8bd1\u5b89\u88c5 tengine \u8be5 rpm \u6e90\u7801\u70b9\u51fb\u6b64\u5904","title":"3. \u5b89\u88c5 tengine"},{"location":"install/prod/distributed_02/#4-luna","text":"cd /opt wget https://github.com/jumpserver/luna/releases/download/1.5.9/luna.tar.gz \u5982\u679c\u7f51\u7edc\u5b58\u5728\u95ee\u9898\u53ef\u4ee5\u70b9\u51fb \u6b64\u5904 \u4e0b\u8f7d wget https://demo.jumpserver.org/download/luna/1.5.9/luna.tar.gz","title":"4. \u4e0b\u8f7d luna"},{"location":"install/prod/distributed_02/#5-luna","text":"tar -xf luna.tar.gz chown -R nginx:nginx luna","title":"5. \u89e3\u538b luna"},{"location":"install/prod/distributed_02/#6-nfs","text":"yum -y install nfs-utils","title":"6. \u5b89\u88c5 nfs"},{"location":"install/prod/distributed_02/#7-nfs","text":"showmount -e 192 .168.100.99 mkdir -p /opt/jumpserver/data restorecon -R /opt/jumpserver/data/ mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data echo \"192.168.100.99:/data /opt/jumpserver/data nfs defaults 0 0\" >> /etc/fstab 192.168.100.99 \u4e3a nfs server \u5730\u5740\uff0c\u8bf7\u81ea\u884c\u66f4\u6539","title":"7. \u6302\u8f7d nfs"},{"location":"install/prod/distributed_02/#8-ssh","text":"vi /etc/nginx/nginx.conf user nginx; worker_processes auto; error_log /var/ log /nginx/ error.log warn ; pid /var/ run/nginx.pid; events { worker_connections 1024 ; } stream { log_format proxy '$remote_addr [$time_local] ' '$protocol $status $bytes_sent $bytes_received ' '$session_time \"$upstream_addr\" ' '\"$upstream_bytes_sent\" \"$upstream_bytes_received\" \"$upstream_connect_time\"' ; access_log /var/ log /nginx/ tcp - access.log proxy; open_log_file_cache off; upstream kokossh { server 192 . 168 . 100 . 40 : 2222 ; server 192 . 168 . 100 . 41 : 2222 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f koko ssh \u7684\u540e\u7aefip least_conn; } server { listen 2222 ; proxy_pass kokossh; proxy_protocol on ; proxy_connect_timeout 1 s; } } http { include /etc/ nginx/mime.types; default_type application/octet - stream; log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"' ; access_log /var/ log /nginx/ access.log main; sendfile on ; # tcp_nopush on ; keepalive_timeout 65 ; # \u5173\u95ed\u7248\u672c\u663e\u793a server_tokens off; include /etc/ nginx /conf.d/ *. conf ; }","title":"8. \u914d\u7f6e ssh \u53cd\u5411\u4ee3\u7406"},{"location":"install/prod/distributed_02/#9-http","text":"vi /etc/nginx/conf.d/jumpserver.conf upstream jumpserver { server 192 . 168 . 100 . 30 : 80 ; server 192 . 168 . 100 . 31 : 80 ; # \u8fd9\u91cc\u662f core \u7684\u540e\u7aefip session_sticky; } upstream koko { server 192 . 168 . 100 . 40 : 5000 ; server 192 . 168 . 100 . 41 : 5001 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f koko \u7684\u540e\u7aefip session_sticky; } upstream guacamole { server 192 . 168 . 100 . 50 : 8081 ; server 192 . 168 . 100 . 51 : 8081 ; # \u591a\u8282\u70b9 # \u8fd9\u91cc\u662f guacamole \u7684\u540e\u7aefip session_sticky; } server { listen 80 ; # server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d # return 301 https: // $server_name$request_uri; # } # server { # \u63a8\u8350\u4f7f\u7528 https \u8bbf\u95ee , \u8bf7\u81ea\u884c\u4fee\u6539\u4e0b\u9762\u7684\u9009\u9879 # listen 443 ssl ; # server_name demo.jumpserver.org; # \u81ea\u884c\u4fee\u6539\u6210\u4f60\u7684\u57df\u540d # ssl_certificate /etc/ nginx /sslkey/ 1 _jumpserver.org_bundle.crt; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 # ssl_certificate_key /etc/ nginx /sslkey/ 2 _jumpserver.org. key ; # \u81ea\u884c\u8bbe\u7f6e\u8bc1\u4e66 # ssl_session_timeout 5 m; # ssl_ciphers ECDHE - RSA - AES128 - GCM - SHA256:ECDHE:ECDH:AES:HIGH: ! NULL: ! aNULL: ! MD5: ! ADH: ! RC4; # ssl_protocols TLSv1 TLSv1. 1 TLSv1. 2 ; # ssl_prefer_server_ciphers on ; client_max_body_size 100 m; # \u5f55\u50cf\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /luna/ { try_files $uri / / index.html; alias /opt/ luna/; # luna \u8def\u5f84 } location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location / { proxy_pass http: // jumpserver; # jumpserver proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /koko/ { proxy_pass http: // koko; # koko proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location /guacamole/ { proxy_pass http: // guacamole/; # guacamole proxy_buffering off; proxy_http_version 1 . 1 ; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } }","title":"9. \u914d\u7f6e http \u53cd\u5411\u4ee3\u7406"},{"location":"install/prod/distributed_02/#10-nginx","text":"nginx -t systemctl enable nginx systemctl start nginx \u8bbf\u95ee http://192.168.100.100 \u9ed8\u8ba4\u8d26\u53f7: admin \u5bc6\u7801: admin \u5230\u4f1a\u8bdd\u7ba1\u7406-\u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko Guacamole \u7b49\u5e94\u7528\u7684\u6ce8\u518c ssh -p2222 admin@192.168.100.100 sftp -P2222 admin@192.168.100.100 \u5bc6\u7801: admin \u5982\u679c\u662f\u7528\u5728 Windows \u4e0b, Xshell Terminal \u767b\u5f55\u8bed\u6cd5\u5982\u4e0b ssh admin@192.168.100.100 2222 sftp admin@192.168.100.100 2222 \u5bc6\u7801: admin \u5982\u679c\u80fd\u767b\u9646\u4ee3\u8868\u90e8\u7f72\u6210\u529f","title":"10. \u542f\u52a8 nginx"},{"location":"install/prod/distributed_03/","text":"MariaDB \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 \u670d\u52a1: MariaDB Server +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Mariadb | 192.168.100.10 | 3306 | Core | +----------+------------+-----------------+---------------+------------------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.0/24 \" port protocol=\" tcp \" port=\" 3306 \" accept\" firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u8bf7\u52ff\u6388\u6743\u6574\u4e2a\u7f51\u6bb5, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 3. \u5b89\u88c5 mariadb \u00b6 yum install -y mariadb mariadb-server mariadb-devel 4. \u542f\u52a8 mariadb \u00b6 systemctl enable mariadb systemctl start mariadb 5. \u521b\u5efa\u6570\u636e\u5e93\u53ca\u6388\u6743 \u00b6 mysql -uroot create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '192.168.100.%' identified by 'weakPassword' ; flush privileges ; \u6570\u636e\u5e93\u5bc6\u7801\u5e94\u8be5\u91c7\u7528\u66f4\u5b89\u5168\u7684\u5bc6\u7801","title":"Mariadb \u90e8\u7f72"},{"location":"install/prod/distributed_03/#mariadb","text":"","title":"MariaDB \u90e8\u7f72"},{"location":"install/prod/distributed_03/#_1","text":"\u7cfb\u7edf: CentOS 7 \u670d\u52a1: MariaDB Server +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Mariadb | 192.168.100.10 | 3306 | Core | +----------+------------+-----------------+---------------+------------------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_03/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_03/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_03/#2","text":"firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.0/24 \" port protocol=\" tcp \" port=\" 3306 \" accept\" firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u8bf7\u52ff\u6388\u6743\u6574\u4e2a\u7f51\u6bb5, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_03/#3-mariadb","text":"yum install -y mariadb mariadb-server mariadb-devel","title":"3. \u5b89\u88c5 mariadb"},{"location":"install/prod/distributed_03/#4-mariadb","text":"systemctl enable mariadb systemctl start mariadb","title":"4. \u542f\u52a8 mariadb"},{"location":"install/prod/distributed_03/#5","text":"mysql -uroot create database jumpserver default charset 'utf8' collate 'utf8_bin' ; grant all on jumpserver . * to 'jumpserver' @ '192.168.100.%' identified by 'weakPassword' ; flush privileges ; \u6570\u636e\u5e93\u5bc6\u7801\u5e94\u8be5\u91c7\u7528\u66f4\u5b89\u5168\u7684\u5bc6\u7801","title":"5. \u521b\u5efa\u6570\u636e\u5e93\u53ca\u6388\u6743"},{"location":"install/prod/distributed_04/","text":"Redis \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.20 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Redis | 192.168.100.20 | 6379 | Core | +----------+------------+-----------------+---------------+------------------------+ \u6ce8\u610f: Redis \u7684\u6570\u636e\u5e93 3,4,5 \u88ab Core \u4f7f\u7528, 6 \u88ab Koko \u4f7f\u7528 \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.0/24 \" port protocol=\" tcp \" port=\" 6379 \" accept\" firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u5e94\u8be5\u6700\u5c0f\u5316\u6388\u6743 3. \u5b89\u88c5 redis \u00b6 yum install -y install epel-release yum install -y redis 4. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 vi /etc/redis.conf ... # bind 127 . 0 . 0 . 1 # \u6ce8\u91ca\u8fd9\u884c , \u65b0\u589e\u5982\u4e0b\u5185\u5bb9 bind 0 . 0 . 0 . 0 requirepass weakPassword # redis \u8fde\u63a5\u5bc6\u7801 maxmemory - policy allkeys - lru # \u6e05\u7406\u7b56\u7565 , \u4f18\u5148\u79fb\u9664\u6700\u8fd1\u672a\u4f7f\u7528\u7684key ... 5. \u542f\u52a8 redis \u00b6 systemctl start redis systemctl enable redis","title":"Redis \u90e8\u7f72"},{"location":"install/prod/distributed_04/#redis","text":"","title":"Redis \u90e8\u7f72"},{"location":"install/prod/distributed_04/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.20 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Redis | 192.168.100.20 | 6379 | Core | +----------+------------+-----------------+---------------+------------------------+ \u6ce8\u610f: Redis \u7684\u6570\u636e\u5e93 3,4,5 \u88ab Core \u4f7f\u7528, 6 \u88ab Koko \u4f7f\u7528","title":"\u73af\u5883"},{"location":"install/prod/distributed_04/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_04/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_04/#2","text":"firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.0/24 \" port protocol=\" tcp \" port=\" 6379 \" accept\" firewall-cmd --reload \u751f\u4ea7\u73af\u5883\u5e94\u8be5\u6700\u5c0f\u5316\u6388\u6743","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_04/#3-redis","text":"yum install -y install epel-release yum install -y redis","title":"3. \u5b89\u88c5 redis"},{"location":"install/prod/distributed_04/#4","text":"vi /etc/redis.conf ... # bind 127 . 0 . 0 . 1 # \u6ce8\u91ca\u8fd9\u884c , \u65b0\u589e\u5982\u4e0b\u5185\u5bb9 bind 0 . 0 . 0 . 0 requirepass weakPassword # redis \u8fde\u63a5\u5bc6\u7801 maxmemory - policy allkeys - lru # \u6e05\u7406\u7b56\u7565 , \u4f18\u5148\u79fb\u9664\u6700\u8fd1\u672a\u4f7f\u7528\u7684key ...","title":"4. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"install/prod/distributed_04/#5-redis","text":"systemctl start redis systemctl enable redis","title":"5. \u542f\u52a8 redis"},{"location":"install/prod/distributed_05/","text":"Core \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.30 +----------+------------+-----------------+---------------+-------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+=========================+ | TCP | Core | 192.168.100.30 | 80 | Tengine | +----------+------------+-----------------+---------------+-------------------------+ | TCP | Core | 192.168.100.31 | 80 | Tengine | +----------+------------+-----------------+---------------+-------------------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 80 \" accept\" firewall-cmd --reload setsebool -P httpd_can_network_connect 1 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 3. \u5b89\u88c5 git \u00b6 yum -y install gcc git 4. \u5b89\u88c5 python3.6 \u00b6 yum -y install python36 python36-devel 5. \u914d\u7f6e py3 \u865a\u62df\u73af\u5883 \u00b6 python3.6 -m venv /opt/py3 source /opt/py3/bin/activate 6. \u4e0b\u8f7d core \u00b6 cd /opt git clone --depth = 1 https://github.com/jumpserver/jumpserver.git \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u4ece \u6b64\u5904 \u4e0b\u8f7d cd /opt wget http://demo.jumpserver.org/download/jumpserver/latest/jumpserver.tar.gz tar xf jumpserver.tar.gz 7. \u5b89\u88c5 rpm \u4f9d\u8d56\u5305 \u00b6 yum -y install $( cat /opt/jumpserver/requirements/rpm_requirements.txt ) 8. \u5b89\u88c5 python \u4f9d\u8d56 \u00b6 pip install wheel pip install --upgrade pip setuptools pip install -r /opt/jumpserver/requirements/requirements.txt 9. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 \u00b6 cd /opt/jumpserver cp config_example.yml config.yml SECRET_KEY = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50 ` echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.bashrc BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.bashrc sed -i \"s/SECRET_KEY:/SECRET_KEY: $SECRET_KEY /g\" /opt/jumpserver/config.yml sed -i \"s/BOOTSTRAP_TOKEN:/BOOTSTRAP_TOKEN: $BOOTSTRAP_TOKEN /g\" /opt/jumpserver/config.yml sed -i \"s/# DEBUG: true/DEBUG: false/g\" /opt/jumpserver/config.yml sed -i \"s/# LOG_LEVEL: DEBUG/LOG_LEVEL: ERROR/g\" /opt/jumpserver/config.yml sed -i \"s/# SESSION_EXPIRE_AT_BROWSER_CLOSE: false/SESSION_EXPIRE_AT_BROWSER_CLOSE: true/g\" /opt/jumpserver/config.yml echo -e \"\\033[31m \u4f60\u7684SECRET_KEY\u662f $SECRET_KEY \\033[0m\" echo -e \"\\033[31m \u4f60\u7684BOOTSTRAP_TOKEN\u662f $BOOTSTRAP_TOKEN \\033[0m\" vi config.yml \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, BOOTSTRAP_TOKEN \u7ed9\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528, redis \u4fe1\u606f\u8981\u7ed9 koko \u4f7f\u7528 \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 192.168.100.10 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : weakPassword DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 192.168.100.20 REDIS_PORT : 6379 REDIS_PASSWORD : weakPassword # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True 10. \u6302\u8f7d nfs \u00b6 yum -y install nfs-utils showmount -e 192 .168.100.99 mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data 192.168.100.99 \u4e3a nfs \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u66f4\u6539 vi /etc/fstab 192 . 168 . 100 . 99 : /data / opt /jumpserver/ data nfs defaults 0 0 11. \u8fd0\u884c core \u00b6 cd /opt/jumpserver ./jms start -d 12. \u90e8\u7f72 nginx \u00b6 vi /etc/yum.repos.d/nginx.repo [nginx] name = nginx repo baseurl = http: // nginx.org /packages/ centos /7/ $basearch/ gpgcheck = 0 enabled = 1 yum -y install nginx systemctl enable nginx 13. \u914d\u7f6e ninx \u00b6 echo > /etc/nginx/conf.d/default.conf vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_http_version 1 . 1 ; proxy_buffering off; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } } 14. \u8fd0\u884c nginx \u00b6 nginx -t systemctl start nginx \u591a\u8282\u70b9\u90e8\u7f72 \u00b6 \u591a\u8282\u70b9\u90e8\u7f72\u4e0e\u4e0a\u9762\u4e00\u81f4, config.yml \u4e0d\u9700\u8981\u91cd\u65b0\u751f\u6210, \u76f4\u63a5\u590d\u5236\u4e3b\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef \u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668 yum upgrade -y yum -y install gcc epel-release git yum -y install python36 python36-devel python3.6 -m venv /opt/py3 source /opt/py3/bin/activate git clone --depth = 1 https://github.com/jumpserver/jumpserver.git yum -y install $( cat /opt/jumpserver/requirements/rpm_requirements.txt ) pip install wheel pip install --upgrade pip setuptools pip install -r /opt/jumpserver/requirements/requirements.txt \u590d\u5236\u4e3b\u8282\u70b9 config.yml \u5230 /opt/jumpserver scp root@192.168.100.30:/opt/jumpserver/config.yml /opt/jumpserver 192.168.100.30 \u4e3a\u4e3b core \u670d\u52a1\u5668 ip\uff0c\u6309\u7167\u63d0\u793a\u8f93\u5165\u5bc6\u7801 \u914d\u7f6e nfs yum -y install nfs-utils showmount -e 192 .168.100.99 mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data echo \"192.168.100.99:/data /opt/jumpserver/data nfs defaults 0 0\" >> /etc/fstab 192.168.100.99 \u4e3a nfs \u670d\u52a1\u5668 \u542f\u52a8 core cd /opt/jumpserver ./jms start -d \u914d\u7f6e nginx echo -e \"[nginx-stable]\\nname=nginx stable repo\\nbaseurl=http://nginx.org/packages/centos/\\$releasever/\\$basearch/\\ngpgcheck=1\\nenabled=1\\ngpgkey=https://nginx.org/keys/nginx_signing.key\" > /etc/yum.repos.d/nginx.repo rpm --import https://nginx.org/keys/nginx_signing.key yum -y install nginx echo > /etc/nginx/conf.d/default.conf \u590d\u5236\u4e3b\u8282\u70b9\u7684 jumpserver.conf \u5230\u5f53\u524d\u8282\u70b9 scp root@192.168.100.30:/etc/nginx/conf.d/jumpserver.conf /etc/nginx/conf.d/ 192.168.100.30 \u4e3a\u4e3b core \u670d\u52a1\u5668 ip\uff0c\u6309\u7167\u63d0\u793a\u8f93\u5165\u5bc6\u7801 \u8fd0\u884c nginx nginx -t systemctl start nginx systemctl enable nginx","title":"Core \u90e8\u7f72"},{"location":"install/prod/distributed_05/#core","text":"","title":"Core \u90e8\u7f72"},{"location":"install/prod/distributed_05/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.30 +----------+------------+-----------------+---------------+-------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+=========================+ | TCP | Core | 192.168.100.30 | 80 | Tengine | +----------+------------+-----------------+---------------+-------------------------+ | TCP | Core | 192.168.100.31 | 80 | Tengine | +----------+------------+-----------------+---------------+-------------------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_05/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_05/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_05/#2","text":"firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 80 \" accept\" firewall-cmd --reload setsebool -P httpd_can_network_connect 1 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_05/#3-git","text":"yum -y install gcc git","title":"3. \u5b89\u88c5 git"},{"location":"install/prod/distributed_05/#4-python36","text":"yum -y install python36 python36-devel","title":"4. \u5b89\u88c5 python3.6"},{"location":"install/prod/distributed_05/#5-py3","text":"python3.6 -m venv /opt/py3 source /opt/py3/bin/activate","title":"5. \u914d\u7f6e py3 \u865a\u62df\u73af\u5883"},{"location":"install/prod/distributed_05/#6-core","text":"cd /opt git clone --depth = 1 https://github.com/jumpserver/jumpserver.git \u7f51\u7edc\u6709\u95ee\u9898\u53ef\u4ee5\u4ece \u6b64\u5904 \u4e0b\u8f7d cd /opt wget http://demo.jumpserver.org/download/jumpserver/latest/jumpserver.tar.gz tar xf jumpserver.tar.gz","title":"6. \u4e0b\u8f7d core"},{"location":"install/prod/distributed_05/#7-rpm","text":"yum -y install $( cat /opt/jumpserver/requirements/rpm_requirements.txt )","title":"7. \u5b89\u88c5 rpm \u4f9d\u8d56\u5305"},{"location":"install/prod/distributed_05/#8-python","text":"pip install wheel pip install --upgrade pip setuptools pip install -r /opt/jumpserver/requirements/requirements.txt","title":"8. \u5b89\u88c5 python \u4f9d\u8d56"},{"location":"install/prod/distributed_05/#9","text":"cd /opt/jumpserver cp config_example.yml config.yml SECRET_KEY = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 50 ` echo \"SECRET_KEY= $SECRET_KEY \" >> ~/.bashrc BOOTSTRAP_TOKEN = ` cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 16 ` echo \"BOOTSTRAP_TOKEN= $BOOTSTRAP_TOKEN \" >> ~/.bashrc sed -i \"s/SECRET_KEY:/SECRET_KEY: $SECRET_KEY /g\" /opt/jumpserver/config.yml sed -i \"s/BOOTSTRAP_TOKEN:/BOOTSTRAP_TOKEN: $BOOTSTRAP_TOKEN /g\" /opt/jumpserver/config.yml sed -i \"s/# DEBUG: true/DEBUG: false/g\" /opt/jumpserver/config.yml sed -i \"s/# LOG_LEVEL: DEBUG/LOG_LEVEL: ERROR/g\" /opt/jumpserver/config.yml sed -i \"s/# SESSION_EXPIRE_AT_BROWSER_CLOSE: false/SESSION_EXPIRE_AT_BROWSER_CLOSE: true/g\" /opt/jumpserver/config.yml echo -e \"\\033[31m \u4f60\u7684SECRET_KEY\u662f $SECRET_KEY \\033[0m\" echo -e \"\\033[31m \u4f60\u7684BOOTSTRAP_TOKEN\u662f $BOOTSTRAP_TOKEN \\033[0m\" vi config.yml \u6ce8\u610f\u4e0d\u80fd\u4f7f\u7528\u7eaf\u6570\u5b57\u5b57\u7b26\u4e32, BOOTSTRAP_TOKEN \u7ed9\u5176\u4ed6\u7ec4\u4ef6\u4f7f\u7528, redis \u4fe1\u606f\u8981\u7ed9 koko \u4f7f\u7528 \u4ee5\u4e0b\u6a21\u677f\u4ec5\u4f9b\u53c2\u8003 # SECURITY WARNING: keep the secret key used in production secret! # \u52a0\u5bc6\u79d8\u94a5 \u751f\u4ea7\u73af\u5883\u4e2d\u8bf7\u4fee\u6539\u4e3a\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u8bf7\u52ff\u5916\u6cc4, \u53ef\u4f7f\u7528\u547d\u4ee4\u751f\u6210 # cat /dev/urandom | tr -dc A-Za-z0-9 | head -c 49;echo SECRET_KEY : W5Ic3fMXNZ0p5RIy5DhJYJllppTfcfkW8Yuf94VBMfpcssbfu # SECURITY WARNING: keep the bootstrap token used in production secret! # \u9884\u5171\u4eabToken coco\u548cguacamole\u7528\u6765\u6ce8\u518c\u670d\u52a1\u8d26\u53f7\uff0c\u4e0d\u5728\u4f7f\u7528\u539f\u6765\u7684\u6ce8\u518c\u63a5\u53d7\u673a\u5236 BOOTSTRAP_TOKEN : zxffNymGjP79j6BN # Development env open this, when error occur display the full process track, Production disable it # DEBUG \u6a21\u5f0f \u5f00\u542fDEBUG\u540e\u9047\u5230\u9519\u8bef\u65f6\u53ef\u4ee5\u770b\u5230\u66f4\u591a\u65e5\u5fd7 DEBUG : false # DEBUG, INFO, WARNING, ERROR, CRITICAL can set. See https://docs.djangoproject.com/en/1.10/topics/logging/ # \u65e5\u5fd7\u7ea7\u522b LOG_LEVEL : ERROR # LOG_DIR: # Session expiration setting, Default 24 hour, Also set expired on on browser close # \u6d4f\u89c8\u5668Session\u8fc7\u671f\u65f6\u95f4\uff0c\u9ed8\u8ba424\u5c0f\u65f6, \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5173\u95ed\u5219\u8fc7\u671f # SESSION_COOKIE_AGE: 86400 SESSION_EXPIRE_AT_BROWSER_CLOSE : true # Database setting, Support sqlite3, mysql, postgres .... # \u6570\u636e\u5e93\u8bbe\u7f6e # See https://docs.djangoproject.com/en/1.10/ref/settings/#databases # SQLite setting: # \u4f7f\u7528\u5355\u6587\u4ef6sqlite\u6570\u636e\u5e93 # DB_ENGINE: sqlite3 # DB_NAME: # MySQL or postgres setting like: # \u4f7f\u7528Mysql\u4f5c\u4e3a\u6570\u636e\u5e93 DB_ENGINE : mysql DB_HOST : 192.168.100.10 DB_PORT : 3306 DB_USER : jumpserver DB_PASSWORD : weakPassword DB_NAME : jumpserver # When Django start it will bind this host and port # ./manage.py runserver 127.0.0.1:8080 # \u8fd0\u884c\u65f6\u7ed1\u5b9a\u7aef\u53e3 HTTP_BIND_HOST : 0.0.0.0 HTTP_LISTEN_PORT : 8080 WS_LISTEN_PORT : 8070 # Use Redis as broker for celery and web socket # Redis\u914d\u7f6e REDIS_HOST : 192.168.100.20 REDIS_PORT : 6379 REDIS_PASSWORD : weakPassword # REDIS_DB_CELERY: 3 # REDIS_DB_CACHE: 4 # Use OpenID authorization # \u4f7f\u7528OpenID \u6765\u8fdb\u884c\u8ba4\u8bc1\u8bbe\u7f6e # BASE_SITE_URL: http://localhost:8080 # AUTH_OPENID: false # True or False # AUTH_OPENID_SERVER_URL: https://openid-auth-server.com/ # AUTH_OPENID_REALM_NAME: realm-name # AUTH_OPENID_CLIENT_ID: client-id # AUTH_OPENID_CLIENT_SECRET: client-secret # AUTH_OPENID_IGNORE_SSL_VERIFICATION: True # AUTH_OPENID_SHARE_SESSION: True # Use Radius authorization # \u4f7f\u7528Radius\u6765\u8ba4\u8bc1 # AUTH_RADIUS: false # RADIUS_SERVER: localhost # RADIUS_PORT: 1812 # RADIUS_SECRET: # CAS \u914d\u7f6e # AUTH_CAS': False, # CAS_SERVER_URL': \"http://host/cas/\", # CAS_ROOT_PROXIED_AS': 'http://jumpserver-host:port', # CAS_LOGOUT_COMPLETELY': True, # CAS_VERSION': 3, # LDAP/AD settings # LDAP \u641c\u7d22\u5206\u9875\u6570\u91cf # AUTH_LDAP_SEARCH_PAGED_SIZE: 1000 # # \u5b9a\u65f6\u540c\u6b65\u7528\u6237 # \u542f\u7528 / \u7981\u7528 # AUTH_LDAP_SYNC_IS_PERIODIC: True # \u540c\u6b65\u95f4\u9694 (\u5355\u4f4d: \u65f6) (\u4f18\u5148\uff09 # AUTH_LDAP_SYNC_INTERVAL: 12 # Crontab \u8868\u8fbe\u5f0f # AUTH_LDAP_SYNC_CRONTAB: * 6 * * * # # LDAP \u7528\u6237\u767b\u5f55\u65f6\u4ec5\u5141\u8bb8\u5728\u7528\u6237\u5217\u8868\u4e2d\u7684\u7528\u6237\u6267\u884c LDAP Server \u8ba4\u8bc1 # AUTH_LDAP_USER_LOGIN_ONLY_IN_USERS: False # # LDAP \u8ba4\u8bc1\u65f6\u5982\u679c\u65e5\u5fd7\u4e2d\u51fa\u73b0\u4ee5\u4e0b\u4fe1\u606f\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3a 0 (\u8be6\u60c5\u53c2\u89c1\uff1ahttps://www.python-ldap.org/en/latest/faq.html) # In order to perform this operation a successful bind must be completed on the connection # AUTH_LDAP_OPTIONS_OPT_REFERRALS: -1 # OTP settings # OTP/MFA \u914d\u7f6e # OTP_VALID_WINDOW: 0 # OTP_ISSUER_NAME: Jumpserver # Perm show single asset to ungrouped node # \u662f\u5426\u628a\u672a\u6388\u6743\u8282\u70b9\u8d44\u4ea7\u653e\u5165\u5230 \u672a\u5206\u7ec4 \u8282\u70b9\u4e2d # PERM_SINGLE_ASSET_TO_UNGROUP_NODE: false # # \u542f\u7528\u5b9a\u65f6\u4efb\u52a1 # PERIOD_TASK_ENABLE: True # # \u542f\u7528\u4e8c\u6b21\u590d\u5408\u8ba4\u8bc1\u914d\u7f6e # LOGIN_CONFIRM_ENABLE: False # # Windows \u767b\u5f55\u8df3\u8fc7\u624b\u52a8\u8f93\u5165\u5bc6\u7801 WINDOWS_SKIP_ALL_MANUAL_PASSWORD : True","title":"9. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6"},{"location":"install/prod/distributed_05/#10-nfs","text":"yum -y install nfs-utils showmount -e 192 .168.100.99 mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data 192.168.100.99 \u4e3a nfs \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u66f4\u6539 vi /etc/fstab 192 . 168 . 100 . 99 : /data / opt /jumpserver/ data nfs defaults 0 0","title":"10. \u6302\u8f7d nfs"},{"location":"install/prod/distributed_05/#11-core","text":"cd /opt/jumpserver ./jms start -d","title":"11. \u8fd0\u884c core"},{"location":"install/prod/distributed_05/#12-nginx","text":"vi /etc/yum.repos.d/nginx.repo [nginx] name = nginx repo baseurl = http: // nginx.org /packages/ centos /7/ $basearch/ gpgcheck = 0 enabled = 1 yum -y install nginx systemctl enable nginx","title":"12. \u90e8\u7f72 nginx"},{"location":"install/prod/distributed_05/#13-ninx","text":"echo > /etc/nginx/conf.d/default.conf vi /etc/nginx/conf.d/jumpserver.conf server { listen 80 ; client_max_body_size 100 m; # \u5f55\u50cf\u53ca\u6587\u4ef6\u4e0a\u4f20\u5927\u5c0f\u9650\u5236 location /media/ { add_header Content - Encoding gzip; root /opt/ jumpserver /data/ ; # \u5f55\u50cf\u4f4d\u7f6e , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /static/ { root /opt/ jumpserver /data/ ; # \u9759\u6001\u8d44\u6e90 , \u5982\u679c\u4fee\u6539\u5b89\u88c5\u76ee\u5f55 , \u6b64\u5904\u9700\u8981\u4fee\u6539 } location /ws/ { proxy_pass http: // localhost: 8070 ; proxy_http_version 1 . 1 ; proxy_buffering off; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \"upgrade\" ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } location / { proxy_pass http: // localhost: 8080 ; proxy_set_header X - Real - IP $remote_addr; proxy_set_header Host $host; proxy_set_header X - Forwarded - For $proxy_add_x_forwarded_for; access_log off; } }","title":"13. \u914d\u7f6e ninx"},{"location":"install/prod/distributed_05/#14-nginx","text":"nginx -t systemctl start nginx","title":"14. \u8fd0\u884c nginx"},{"location":"install/prod/distributed_05/#_3","text":"\u591a\u8282\u70b9\u90e8\u7f72\u4e0e\u4e0a\u9762\u4e00\u81f4, config.yml \u4e0d\u9700\u8981\u91cd\u65b0\u751f\u6210, \u76f4\u63a5\u590d\u5236\u4e3b\u8282\u70b9\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef \u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668 yum upgrade -y yum -y install gcc epel-release git yum -y install python36 python36-devel python3.6 -m venv /opt/py3 source /opt/py3/bin/activate git clone --depth = 1 https://github.com/jumpserver/jumpserver.git yum -y install $( cat /opt/jumpserver/requirements/rpm_requirements.txt ) pip install wheel pip install --upgrade pip setuptools pip install -r /opt/jumpserver/requirements/requirements.txt \u590d\u5236\u4e3b\u8282\u70b9 config.yml \u5230 /opt/jumpserver scp root@192.168.100.30:/opt/jumpserver/config.yml /opt/jumpserver 192.168.100.30 \u4e3a\u4e3b core \u670d\u52a1\u5668 ip\uff0c\u6309\u7167\u63d0\u793a\u8f93\u5165\u5bc6\u7801 \u914d\u7f6e nfs yum -y install nfs-utils showmount -e 192 .168.100.99 mount -t nfs 192 .168.100.99:/data /opt/jumpserver/data echo \"192.168.100.99:/data /opt/jumpserver/data nfs defaults 0 0\" >> /etc/fstab 192.168.100.99 \u4e3a nfs \u670d\u52a1\u5668 \u542f\u52a8 core cd /opt/jumpserver ./jms start -d \u914d\u7f6e nginx echo -e \"[nginx-stable]\\nname=nginx stable repo\\nbaseurl=http://nginx.org/packages/centos/\\$releasever/\\$basearch/\\ngpgcheck=1\\nenabled=1\\ngpgkey=https://nginx.org/keys/nginx_signing.key\" > /etc/yum.repos.d/nginx.repo rpm --import https://nginx.org/keys/nginx_signing.key yum -y install nginx echo > /etc/nginx/conf.d/default.conf \u590d\u5236\u4e3b\u8282\u70b9\u7684 jumpserver.conf \u5230\u5f53\u524d\u8282\u70b9 scp root@192.168.100.30:/etc/nginx/conf.d/jumpserver.conf /etc/nginx/conf.d/ 192.168.100.30 \u4e3a\u4e3b core \u670d\u52a1\u5668 ip\uff0c\u6309\u7167\u63d0\u793a\u8f93\u5165\u5bc6\u7801 \u8fd0\u884c nginx nginx -t systemctl start nginx systemctl enable nginx","title":"\u591a\u8282\u70b9\u90e8\u7f72"},{"location":"install/prod/distributed_06/","text":"koko \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.40 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | koko | 192.168.100.40 | 2222, 5000 | Tengine | +----------+------------+-----------------+---------------+------------------------+ | TCP | koko | 192.168.100.41 | 2222, 5000 | Tengine | +----------+------------+-----------------+---------------+------------------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 2222 \" accept\" firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 5000 \" accept\" firewall-cmd --reload 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 3. \u914d\u7f6e docker \u6e90 \u00b6 yum install -y yum-utils device-mapper-persistent-data lvm2 wget yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum makecache fast 4. \u5b89\u88c5 docker \u00b6 yum -y install docker-ce 5. \u914d\u7f6e docker \u52a0\u901f \u00b6 mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json 6. \u542f\u52a8 docker \u00b6 systemctl enable docker systemctl start docker 7. \u542f\u52a8 koko \u00b6 docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 5000 :5000 \\ -e CORE_HOST = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ -e REDIS_HOST = 192 .168.100.20 \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = weakPassword \\ jumpserver/jms_koko:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c CORE_HOST=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko \u6ce8\u518c \u591a\u8282\u70b9\u90e8\u7f72 \u00b6 \u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668, \u524d\u9762\u5b89\u88c5 docker \u90fd\u662f\u4e00\u6837\u7684 yum upgrade -y yum -y install epel-release wget firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 2222 \" accept\" firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 5000 \" accept\" firewall-cmd --reload yum -y install docker-ce mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json systemctl enable docker systemctl start docker \u542f\u52a8 koko docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 5000 :5000 \\ -e CORE_HOST = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ -e REDIS_HOST = 192 .168.100.20 \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = weakPassword \\ jumpserver/jms_koko:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c CORE_HOST=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko \u6ce8\u518c","title":"Koko \u90e8\u7f72"},{"location":"install/prod/distributed_06/#koko","text":"","title":"koko \u90e8\u7f72"},{"location":"install/prod/distributed_06/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.40 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | koko | 192.168.100.40 | 2222, 5000 | Tengine | +----------+------------+-----------------+---------------+------------------------+ | TCP | koko | 192.168.100.41 | 2222, 5000 | Tengine | +----------+------------+-----------------+---------------+------------------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_06/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_06/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_06/#2","text":"firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 2222 \" accept\" firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 5000 \" accept\" firewall-cmd --reload 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_06/#3-docker","text":"yum install -y yum-utils device-mapper-persistent-data lvm2 wget yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum makecache fast","title":"3. \u914d\u7f6e docker \u6e90"},{"location":"install/prod/distributed_06/#4-docker","text":"yum -y install docker-ce","title":"4. \u5b89\u88c5 docker"},{"location":"install/prod/distributed_06/#5-docker","text":"mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json","title":"5. \u914d\u7f6e docker \u52a0\u901f"},{"location":"install/prod/distributed_06/#6-docker","text":"systemctl enable docker systemctl start docker","title":"6. \u542f\u52a8 docker"},{"location":"install/prod/distributed_06/#7-koko","text":"docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 5000 :5000 \\ -e CORE_HOST = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ -e REDIS_HOST = 192 .168.100.20 \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = weakPassword \\ jumpserver/jms_koko:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c CORE_HOST=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko \u6ce8\u518c","title":"7. \u542f\u52a8 koko"},{"location":"install/prod/distributed_06/#_3","text":"\u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668, \u524d\u9762\u5b89\u88c5 docker \u90fd\u662f\u4e00\u6837\u7684 yum upgrade -y yum -y install epel-release wget firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 2222 \" accept\" firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 5000 \" accept\" firewall-cmd --reload yum -y install docker-ce mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json systemctl enable docker systemctl start docker \u542f\u52a8 koko docker run --name jms_koko -d \\ -p 2222 :2222 \\ -p 5000 :5000 \\ -e CORE_HOST = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e LOG_LEVEL = ERROR \\ -e REDIS_HOST = 192 .168.100.20 \\ -e REDIS_PORT = 6379 \\ -e REDIS_PASSWORD = weakPassword \\ jumpserver/jms_koko:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c CORE_HOST=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 koko \u6ce8\u518c","title":"\u591a\u8282\u70b9\u90e8\u7f72"},{"location":"install/prod/distributed_07/","text":"guacamole \u90e8\u7f72 \u00b6 \u73af\u5883 \u00b6 \u7cfb\u7edf: CentOS 7 IP: 192.168.100.50 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Guacamole | 192.168.100.50 | 8081 | Tengine | +----------+------------+-----------------+---------------+------------------------+ | TCP | Guacamole | 192.168.100.51 | 8081 | Tengine | +----------+------------+-----------------+---------------+------------------------+ \u5b89\u88c5\u6b65\u9aa4 \u00b6 1. \u5b89\u88c5 epel \u5e93 \u00b6 yum upgrade -y yum -y install epel-release wget 2. \u914d\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 8081 \" accept\" firewall-cmd --reload 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539 3. \u914d\u7f6e docker \u6e90 \u00b6 yum install -y yum-utils device-mapper-persistent-data lvm2 wget yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum makecache fast 4. \u5b89\u88c5 docker \u00b6 yum -y install docker-ce 5. \u914d\u7f6e docker \u52a0\u901f \u00b6 mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json 6. \u542f\u52a8 docker \u00b6 systemctl enable docker systemctl start docker 7. \u542f\u52a8 guacamole \u00b6 docker run --name jms_guacamole -d \\ -p 8081 :8080 \\ -e JUMPSERVER_KEY_DIR = /config/guacamole/key \\ -e JUMPSERVER_SERVER = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c JUMPSERVER_SERVER=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 guacamole \u6ce8\u518c \u591a\u8282\u70b9\u90e8\u7f72 \u00b6 \u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668, \u524d\u9762\u5b89\u88c5 docker \u90fd\u662f\u4e00\u6837\u7684 yum upgrade -y yum -y install epel-release wget firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 8081 \" accept\" firewall-cmd --reload yum -y install docker-ce mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json systemctl enable docker systemctl start docker \u542f\u52a8 guacamole docker run --name jms_guacamole -d \\ -p 8081 :8080 \\ -e JUMPSERVER_KEY_DIR = /config/guacamole/key \\ -e JUMPSERVER_SERVER = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c JUMPSERVER_SERVER=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 guacamole \u6ce8\u518c","title":"Guacamole \u90e8\u7f72"},{"location":"install/prod/distributed_07/#guacamole","text":"","title":"guacamole \u90e8\u7f72"},{"location":"install/prod/distributed_07/#_1","text":"\u7cfb\u7edf: CentOS 7 IP: 192.168.100.50 +----------+------------+-----------------+---------------+------------------------+ | Protocol | ServerName | IP | Port | Used By | +==========+============+=================+===============+========================+ | TCP | Guacamole | 192.168.100.50 | 8081 | Tengine | +----------+------------+-----------------+---------------+------------------------+ | TCP | Guacamole | 192.168.100.51 | 8081 | Tengine | +----------+------------+-----------------+---------------+------------------------+","title":"\u73af\u5883"},{"location":"install/prod/distributed_07/#_2","text":"","title":"\u5b89\u88c5\u6b65\u9aa4"},{"location":"install/prod/distributed_07/#1-epel","text":"yum upgrade -y yum -y install epel-release wget","title":"1. \u5b89\u88c5 epel \u5e93"},{"location":"install/prod/distributed_07/#2","text":"firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 8081 \" accept\" firewall-cmd --reload 192.168.100.100 \u4e3a tengine \u670d\u52a1\u5668 ip, \u8bf7\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539","title":"2. \u914d\u7f6e\u9632\u706b\u5899"},{"location":"install/prod/distributed_07/#3-docker","text":"yum install -y yum-utils device-mapper-persistent-data lvm2 wget yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo yum makecache fast","title":"3. \u914d\u7f6e docker \u6e90"},{"location":"install/prod/distributed_07/#4-docker","text":"yum -y install docker-ce","title":"4. \u5b89\u88c5 docker"},{"location":"install/prod/distributed_07/#5-docker","text":"mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json","title":"5. \u914d\u7f6e docker \u52a0\u901f"},{"location":"install/prod/distributed_07/#6-docker","text":"systemctl enable docker systemctl start docker","title":"6. \u542f\u52a8 docker"},{"location":"install/prod/distributed_07/#7-guacamole","text":"docker run --name jms_guacamole -d \\ -p 8081 :8080 \\ -e JUMPSERVER_KEY_DIR = /config/guacamole/key \\ -e JUMPSERVER_SERVER = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c JUMPSERVER_SERVER=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 guacamole \u6ce8\u518c","title":"7. \u542f\u52a8 guacamole"},{"location":"install/prod/distributed_07/#_3","text":"\u767b\u5f55\u5230\u65b0\u7684\u8282\u70b9\u670d\u52a1\u5668, \u524d\u9762\u5b89\u88c5 docker \u90fd\u662f\u4e00\u6837\u7684 yum upgrade -y yum -y install epel-release wget firewall-cmd --permanent --add-rich-rule = \"rule family=\" ipv4 \" source address=\" 192 .168.100.100 \" port protocol=\" tcp \" port=\" 8081 \" accept\" firewall-cmd --reload yum -y install docker-ce mkdir /etc/docker wget -O /etc/docker/daemon.json http://demo.jumpserver.org/download/docker/daemon.json systemctl enable docker systemctl start docker \u542f\u52a8 guacamole docker run --name jms_guacamole -d \\ -p 8081 :8080 \\ -e JUMPSERVER_KEY_DIR = /config/guacamole/key \\ -e JUMPSERVER_SERVER = http://192.168.100.100 \\ -e BOOTSTRAP_TOKEN = zxffNymGjP79j6BN \\ -e GUACAMOLE_LOG_LEVEL = ERROR \\ jumpserver/jms_guacamole:1.5.9 \u5982\u679c\u4f60\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86 \u57df\u540d \u548c ssl , \u8bf7\u4f7f\u7528\u57df\u540d\u6ce8\u518c JUMPSERVER_SERVER=https://demo.jumpserver.org \u8bf7\u81ea\u884c\u66ff\u6362\u6b64\u5904\u7684\u57df\u540d BOOTSTRAP_TOKEN \u7684\u503c\u4ece jumpserver/config.yml \u91cc\u9762\u83b7\u53d6 \u8bbf\u95ee web\u9875\u9762 \u4f1a\u8bdd\u7ba1\u7406 - \u7ec8\u7aef\u7ba1\u7406 \u68c0\u67e5 guacamole \u6ce8\u518c","title":"\u591a\u8282\u70b9\u90e8\u7f72"},{"location":"issues/list/","text":"\u95ee\u9898\u6e05\u5355 \u00b6 bug \u6f0f\u6d1e \u53ca \u529f\u80fd\u5f02\u5e38 1.5.8 \u7248\u672c \u00b6 \u79fb\u52a8\u8d44\u4ea7\u5230 \u8282\u70b9 \u540e\u8d44\u4ea7\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u4e00\u4e2a Default \u8282\u70b9 \u5f85\u4f18\u5316 \u7cfb\u7edf\u7528\u6237 \u63a8\u9001\u4efb\u52a1\u5076\u5c14\u4f1a\u63a8\u9001\u5931\u8d25 \u5076\u5c14\u89e6\u53d1, \u5f85\u4f18\u5316 \u7528\u6237 api key \u65e0\u6cd5\u5220\u9664 1.5.9 \u7248\u672c\u5df2\u4fee\u590d \u4efb\u52a1\u5217\u8868 \u8282\u70b9 \u663e\u793a\u6240\u6709\u5b50\u8282\u70b9\u8d44\u4ea7 \u529f\u80fd\u5f02\u5e38 1.5.9 \u7248\u672c\u5df2\u4fee\u590d \u6587\u4ef6\u7ba1\u7406 \u4e0a\u4f20\u6587\u4ef6 60s \u81ea\u52a8\u65ad\u5f00 \u5df2\u4fee\u590d, \u91cd\u65b0\u62c9\u53d6\u6700\u65b0\u7684 1.5.8 \u7248\u672c koko \u5373\u53ef RDP \u8d44\u4ea7\u4e0d\u80fd\u4e0a\u4f20\u8d85\u8fc7 4G \u6587\u4ef6 guacamole \u81ea\u8eab bug, \u9700\u8981\u7b49\u5f85 guacamole \u5b98\u65b9\u4fee\u590d","title":"\u95ee\u9898\u6e05\u5355"},{"location":"issues/list/#_1","text":"bug \u6f0f\u6d1e \u53ca \u529f\u80fd\u5f02\u5e38","title":"\u95ee\u9898\u6e05\u5355"},{"location":"issues/list/#158","text":"\u79fb\u52a8\u8d44\u4ea7\u5230 \u8282\u70b9 \u540e\u8d44\u4ea7\u4f1a\u9ed8\u8ba4\u6dfb\u52a0\u4e00\u4e2a Default \u8282\u70b9 \u5f85\u4f18\u5316 \u7cfb\u7edf\u7528\u6237 \u63a8\u9001\u4efb\u52a1\u5076\u5c14\u4f1a\u63a8\u9001\u5931\u8d25 \u5076\u5c14\u89e6\u53d1, \u5f85\u4f18\u5316 \u7528\u6237 api key \u65e0\u6cd5\u5220\u9664 1.5.9 \u7248\u672c\u5df2\u4fee\u590d \u4efb\u52a1\u5217\u8868 \u8282\u70b9 \u663e\u793a\u6240\u6709\u5b50\u8282\u70b9\u8d44\u4ea7 \u529f\u80fd\u5f02\u5e38 1.5.9 \u7248\u672c\u5df2\u4fee\u590d \u6587\u4ef6\u7ba1\u7406 \u4e0a\u4f20\u6587\u4ef6 60s \u81ea\u52a8\u65ad\u5f00 \u5df2\u4fee\u590d, \u91cd\u65b0\u62c9\u53d6\u6700\u65b0\u7684 1.5.8 \u7248\u672c koko \u5373\u53ef RDP \u8d44\u4ea7\u4e0d\u80fd\u4e0a\u4f20\u8d85\u8fc7 4G \u6587\u4ef6 guacamole \u81ea\u8eab bug, \u9700\u8981\u7b49\u5f85 guacamole \u5b98\u65b9\u4fee\u590d","title":"1.5.8 \u7248\u672c"},{"location":"user-guide/applications/user-database-app/","text":"\u6570\u636e\u5e93\u5e94\u7528 \u00b6","title":"\u6570\u636e\u5e93\u5e94\u7528"},{"location":"user-guide/applications/user-database-app/#_1","text":"","title":"\u6570\u636e\u5e93\u5e94\u7528"},{"location":"user-guide/assets/user-asset/","text":"\u6211\u7684\u8d44\u4ea7 \u00b6 \u67e5\u770b\u6388\u6743\u7684\u8d44\u4ea7 \u8fd9\u91cc\u663e\u793a\u81ea\u5df1\u88ab\u6388\u6743\u4e86\u7684\u8d44\u4ea7\u5217\u8868, \u53ef\u4ee5\u901a\u8fc7\u8d44\u4ea7\u53f3\u4fa7\u7684\u8fde\u63a5\u529f\u80fd\u5feb\u901f\u8fde\u63a5\u8d44\u4ea7","title":"\u6211\u7684\u8d44\u4ea7"},{"location":"user-guide/assets/user-asset/#_1","text":"\u67e5\u770b\u6388\u6743\u7684\u8d44\u4ea7 \u8fd9\u91cc\u663e\u793a\u81ea\u5df1\u88ab\u6388\u6743\u4e86\u7684\u8d44\u4ea7\u5217\u8868, \u53ef\u4ee5\u901a\u8fc7\u8d44\u4ea7\u53f3\u4fa7\u7684\u8fde\u63a5\u529f\u80fd\u5feb\u901f\u8fde\u63a5\u8d44\u4ea7","title":"\u6211\u7684\u8d44\u4ea7"},{"location":"user-guide/ops/command-executions/create/","text":"\u547d\u4ee4\u6267\u884c \u00b6 \u901a\u8fc7 web \u4e0b\u53d1\u547d\u4ee4 \u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u5feb\u901f\u4e0b\u53d1\u547d\u4ee4\u5230\u8d44\u4ea7, \u76ee\u524d\u4ec5\u652f\u6301\u80fd\u88ab ansible \u7ba1\u7406\u7684\u8d44\u4ea7, \u8981\u6c42 \u7cfb\u7edf\u7528\u6237 \u767b\u9646\u65b9\u5f0f\u4e3a \u81ea\u52a8\u767b\u9646 \u5728\u5de6\u4fa7\u5148\u52fe\u9009\u8d44\u4ea7, \u5728\u53f3\u4e0b\u89d2\u6839\u636e\u9700\u8981\u5207\u6362\u7cfb\u7edf\u7528\u6237, \u5728\u4e0b\u65b9\u8f93\u5165\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4, \u70b9\u51fb\u6267\u884c\u5373\u53ef \u4ec5\u652f\u6301\u6807\u51c6\u7684 shell \u547d\u4ee4, \u5982: sudo ifconfig","title":"\u547d\u4ee4\u6267\u884c"},{"location":"user-guide/ops/command-executions/create/#_1","text":"\u901a\u8fc7 web \u4e0b\u53d1\u547d\u4ee4 \u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u5feb\u901f\u4e0b\u53d1\u547d\u4ee4\u5230\u8d44\u4ea7, \u76ee\u524d\u4ec5\u652f\u6301\u80fd\u88ab ansible \u7ba1\u7406\u7684\u8d44\u4ea7, \u8981\u6c42 \u7cfb\u7edf\u7528\u6237 \u767b\u9646\u65b9\u5f0f\u4e3a \u81ea\u52a8\u767b\u9646 \u5728\u5de6\u4fa7\u5148\u52fe\u9009\u8d44\u4ea7, \u5728\u53f3\u4e0b\u89d2\u6839\u636e\u9700\u8981\u5207\u6362\u7cfb\u7edf\u7528\u6237, \u5728\u4e0b\u65b9\u8f93\u5165\u9700\u8981\u6267\u884c\u7684\u547d\u4ee4, \u70b9\u51fb\u6267\u884c\u5373\u53ef \u4ec5\u652f\u6301\u6807\u51c6\u7684 shell \u547d\u4ee4, \u5982: sudo ifconfig","title":"\u547d\u4ee4\u6267\u884c"},{"location":"user-guide/terminal/web-sftp/","text":"\u6587\u4ef6\u7ba1\u7406 \u00b6 \u901a\u8fc7 web \u8fde\u63a5\u7ba1\u7406\u6587\u4ef6 \u5728\u5de6\u4fa7\u9009\u62e9\u8d44\u4ea7\u540e, \u53ef\u4ee5\u8fdb\u5165\u7ba1\u7406\u5458\u9884\u8bbe\u7684\u8d44\u4ea7\u76ee\u5f55 ( \u9ed8\u8ba4 /tmp ), \u53ef\u8de8\u8d44\u4ea7\u590d\u5236\u7c98\u8d34\u6587\u4ef6, \u76ee\u524d\u4ec5\u652f\u6301 ssh \u534f\u8bae\u4e14 \u7cfb\u7edf\u7528\u6237 \u8981\u6c42\u767b\u9646\u65b9\u5f0f\u4e3a \u81ea\u52a8\u767b\u9646 \u8fd8\u53ef\u4f7f\u7528\u547d\u4ee4\u884c\u767b\u5f55, \u652f\u6301 xftp filezilla \u7b49\u5de5\u5177 sftp -p 2222 \u7528\u6237\u540d@JumpServer IP\u5730\u5740 Windows \u6587\u4ef6\u7ba1\u7406 Windows \u6587\u4ef6\u4e0a\u4f20\u53ef\u4ee5\u76f4\u63a5\u628a\u6587\u4ef6\u62d6\u62fd\u5230 Windows \u7a97\u53e3, \u4e0a\u4f20\u540e\u6587\u4ef6\u5728 \u8ba1\u7b97\u673a - G\u76d8, \u4e0b\u8f7d\u628a\u6587\u4ef6\u653e\u5230 G \u76d8\u7684 download \u76ee\u5f55\u5373\u53ef\u5f39\u51fa\u4e0b\u8f7d\u7a97\u53e3, \u5feb\u6377\u952e\u4e3a\u4e0a\u4f20\u4e0b\u8f7d\u5de5\u5177\u680f Ctrl + alt + shift","title":"\u6587\u4ef6\u7ba1\u7406"},{"location":"user-guide/terminal/web-sftp/#_1","text":"\u901a\u8fc7 web \u8fde\u63a5\u7ba1\u7406\u6587\u4ef6 \u5728\u5de6\u4fa7\u9009\u62e9\u8d44\u4ea7\u540e, \u53ef\u4ee5\u8fdb\u5165\u7ba1\u7406\u5458\u9884\u8bbe\u7684\u8d44\u4ea7\u76ee\u5f55 ( \u9ed8\u8ba4 /tmp ), \u53ef\u8de8\u8d44\u4ea7\u590d\u5236\u7c98\u8d34\u6587\u4ef6, \u76ee\u524d\u4ec5\u652f\u6301 ssh \u534f\u8bae\u4e14 \u7cfb\u7edf\u7528\u6237 \u8981\u6c42\u767b\u9646\u65b9\u5f0f\u4e3a \u81ea\u52a8\u767b\u9646 \u8fd8\u53ef\u4f7f\u7528\u547d\u4ee4\u884c\u767b\u5f55, \u652f\u6301 xftp filezilla \u7b49\u5de5\u5177 sftp -p 2222 \u7528\u6237\u540d@JumpServer IP\u5730\u5740 Windows \u6587\u4ef6\u7ba1\u7406 Windows \u6587\u4ef6\u4e0a\u4f20\u53ef\u4ee5\u76f4\u63a5\u628a\u6587\u4ef6\u62d6\u62fd\u5230 Windows \u7a97\u53e3, \u4e0a\u4f20\u540e\u6587\u4ef6\u5728 \u8ba1\u7b97\u673a - G\u76d8, \u4e0b\u8f7d\u628a\u6587\u4ef6\u653e\u5230 G \u76d8\u7684 download \u76ee\u5f55\u5373\u53ef\u5f39\u51fa\u4e0b\u8f7d\u7a97\u53e3, \u5feb\u6377\u952e\u4e3a\u4e0a\u4f20\u4e0b\u8f7d\u5de5\u5177\u680f Ctrl + alt + shift","title":"\u6587\u4ef6\u7ba1\u7406"},{"location":"user-guide/terminal/web-terminal/","text":"Web\u7ec8\u7aef \u00b6 \u901a\u8fc7 web \u8fde\u63a5\u8d44\u4ea7 \u9664\u4e86\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55 JumpServer \u5916, \u8fd8\u53ef\u4f7f\u7528\u547d\u4ee4\u884c\u767b\u5f55 ssh -p 2222 \u7528\u6237\u540d@JumpServer IP\u5730\u5740","title":"Web\u7ec8\u7aef"},{"location":"user-guide/terminal/web-terminal/#web","text":"\u901a\u8fc7 web \u8fde\u63a5\u8d44\u4ea7 \u9664\u4e86\u4f7f\u7528\u6d4f\u89c8\u5668\u767b\u5f55 JumpServer \u5916, \u8fd8\u53ef\u4f7f\u7528\u547d\u4ee4\u884c\u767b\u5f55 ssh -p 2222 \u7528\u6237\u540d@JumpServer IP\u5730\u5740","title":"Web\u7ec8\u7aef"},{"location":"user-guide/users/profile/","text":"\u4e2a\u4eba\u4fe1\u606f \u00b6 \u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f, \u53f3\u4fa7\u7684\u529f\u80fd\u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u6240\u9700\u8fdb\u884c\u8bbe\u7f6e","title":"\u4e2a\u4eba\u4fe1\u606f"},{"location":"user-guide/users/profile/#_1","text":"\u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f, \u53f3\u4fa7\u7684\u529f\u80fd\u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u6240\u9700\u8fdb\u884c\u8bbe\u7f6e","title":"\u4e2a\u4eba\u4fe1\u606f"}]}